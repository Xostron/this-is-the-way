<!doctype html><html lang=ru class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Интерфейсы HTTP в Node.js разработаны для поддержки многих особенностей протокола, которые традиционно были сложны в использовании"><meta name=author content=nodejsdev.ru><link href=https://nodejsdev.ru/api/http/ rel=canonical><link href=../globals/ rel=prev><link href=../http2/ rel=next><link rel=icon href=../../nodejs.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.17"><title>HTTP ⚡️ Node.js с примерами кода</title><link rel=stylesheet href=../../assets/stylesheets/main.7e37652d.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=/assets/stylesheets/styles.css?7><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><meta property=og:type content=website><meta property=og:title content="HTTP - Node.js"><meta property=og:description content="Интерфейсы HTTP в Node.js разработаны для поддержки многих особенностей протокола, которые традиционно были сложны в использовании"><meta property=og:image content=https://nodejsdev.ru/assets/images/social/api/http.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta content=https://nodejsdev.ru/api/http/ property=og:url><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="HTTP - Node.js"><meta name=twitter:description content="Интерфейсы HTTP в Node.js разработаны для поддержки многих особенностей протокола, которые традиционно были сложны в использовании"><meta name=twitter:image content=https://nodejsdev.ru/assets/images/social/api/http.png> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=green data-md-color-accent=green> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#http class=md-skip> Перейти к содержанию </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label="Верхний колонтитул"> <a href=../.. title=Node.js class="md-header__button md-logo" aria-label=Node.js data-md-component=logo> <img src=../../nodejs-white.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Node.js </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> HTTP </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=green data-md-color-accent=green aria-label="Переключиться на светлую тему" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Переключиться на светлую тему" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=green data-md-color-accent=green aria-label="Переключиться на тёмную тему" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Переключиться на тёмную тему" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=green data-md-color-accent=green aria-label="Переключиться на системную тему" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Переключиться на системную тему" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Поиск placeholder=Поиск autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Поиск> <button type=reset class="md-search__icon md-icon" title=Очистить aria-label=Очистить tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Инициализация поиска </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/xsltdev/nodejsdev.ru title="Перейти к репозиторию" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> Справочник на Github </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Вкладки data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> 🏠 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> API </a> </li> <li class=md-tabs__item> <a href=../../guides/ class=md-tabs__link> Гайды </a> </li> <li class=md-tabs__item> <a href=../../frameworks/ class=md-tabs__link> Фреймворки </a> </li> <li class=md-tabs__item> <a href=https://devmaps.ru/nodejs-2020 class=md-tabs__link> Карта обучения </a> </li> <li class=md-tabs__item> <a href=https://boosty.to/bndby class=md-tabs__link> Спасибо </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Навигация data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=Node.js class="md-nav__button md-logo" aria-label=Node.js data-md-component=logo> <img src=../../nodejs-white.svg alt=logo> </a> Node.js </label> <div class=md-nav__source> <a href=https://github.com/xsltdev/nodejsdev.ru title="Перейти к репозиторию" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> Справочник на Github </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> 🏠 </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> API </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../addons/ class=md-nav__link> <span class=md-ellipsis> C++ addons </span> </a> </li> <li class=md-nav__item> <a href=../assert/ class=md-nav__link> <span class=md-ellipsis> Assert </span> </a> </li> <li class=md-nav__item> <a href=../async_context/ class=md-nav__link> <span class=md-ellipsis> Asynchronous context tracking </span> </a> </li> <li class=md-nav__item> <a href=../async_hooks/ class=md-nav__link> <span class=md-ellipsis> Async hooks </span> </a> </li> <li class=md-nav__item> <a href=../buffer/ class=md-nav__link> <span class=md-ellipsis> Buffer </span> </a> </li> <li class=md-nav__item> <a href=../child_process/ class=md-nav__link> <span class=md-ellipsis> Child process </span> </a> </li> <li class=md-nav__item> <a href=../cli/ class=md-nav__link> <span class=md-ellipsis> Command-line API </span> </a> </li> <li class=md-nav__item> <a href=../cluster/ class=md-nav__link> <span class=md-ellipsis> Cluster </span> </a> </li> <li class=md-nav__item> <a href=../console/ class=md-nav__link> <span class=md-ellipsis> Console </span> </a> </li> <li class=md-nav__item> <a href=../corepack/ class=md-nav__link> <span class=md-ellipsis> Corepack </span> </a> </li> <li class=md-nav__item> <a href=../crypto/ class=md-nav__link> <span class=md-ellipsis> Crypto </span> </a> </li> <li class=md-nav__item> <a href=../debugger/ class=md-nav__link> <span class=md-ellipsis> Debugger </span> </a> </li> <li class=md-nav__item> <a href=../dgram/ class=md-nav__link> <span class=md-ellipsis> UDP/datagram sockets </span> </a> </li> <li class=md-nav__item> <a href=../diagnostics_channel/ class=md-nav__link> <span class=md-ellipsis> Diagnostics Channel </span> </a> </li> <li class=md-nav__item> <a href=../dns/ class=md-nav__link> <span class=md-ellipsis> DNS </span> </a> </li> <li class=md-nav__item> <a href=../domain/ class=md-nav__link> <span class=md-ellipsis> Domain </span> </a> </li> <li class=md-nav__item> <a href=../embedding/ class=md-nav__link> <span class=md-ellipsis> C++ embedder API </span> </a> </li> <li class=md-nav__item> <a href=../errors/ class=md-nav__link> <span class=md-ellipsis> Errors </span> </a> </li> <li class=md-nav__item> <a href=../esm/ class=md-nav__link> <span class=md-ellipsis> ECMAScript modules </span> </a> </li> <li class=md-nav__item> <a href=../events/ class=md-nav__link> <span class=md-ellipsis> Events </span> </a> </li> <li class=md-nav__item> <a href=../fs/ class=md-nav__link> <span class=md-ellipsis> File system </span> </a> </li> <li class=md-nav__item> <a href=../globals/ class=md-nav__link> <span class=md-ellipsis> Глобальные объекты </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> HTTP </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> HTTP </span> </a> <nav class="md-nav md-nav--secondary" aria-label=Содержание> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Содержание </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#httpagent class=md-nav__link> <span class=md-ellipsis> Класс http.Agent </span> </a> <nav class=md-nav aria-label="Класс http.Agent"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#new-agent class=md-nav__link> <span class=md-ellipsis> new Agent </span> </a> </li> <li class=md-nav__item> <a href=#agentcreateconnection class=md-nav__link> <span class=md-ellipsis> agent.createConnection </span> </a> </li> <li class=md-nav__item> <a href=#agentkeepsocketalive class=md-nav__link> <span class=md-ellipsis> agent.keepSocketAlive </span> </a> </li> <li class=md-nav__item> <a href=#agentreusesocket class=md-nav__link> <span class=md-ellipsis> agent.reuseSocket </span> </a> </li> <li class=md-nav__item> <a href=#agentdestroy class=md-nav__link> <span class=md-ellipsis> agent.destroy </span> </a> </li> <li class=md-nav__item> <a href=#agentfreesockets class=md-nav__link> <span class=md-ellipsis> agent.freeSockets </span> </a> </li> <li class=md-nav__item> <a href=#agentgetname class=md-nav__link> <span class=md-ellipsis> agent.getName </span> </a> </li> <li class=md-nav__item> <a href=#agentmaxfreesockets class=md-nav__link> <span class=md-ellipsis> agent.maxFreeSockets </span> </a> </li> <li class=md-nav__item> <a href=#agentmaxsockets class=md-nav__link> <span class=md-ellipsis> agent.maxSockets </span> </a> </li> <li class=md-nav__item> <a href=#agentmaxtotalsockets class=md-nav__link> <span class=md-ellipsis> agent.maxTotalSockets </span> </a> </li> <li class=md-nav__item> <a href=#agentrequests class=md-nav__link> <span class=md-ellipsis> agent.requests </span> </a> </li> <li class=md-nav__item> <a href=#agentsockets class=md-nav__link> <span class=md-ellipsis> agent.sockets </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#httpclientrequest class=md-nav__link> <span class=md-ellipsis> Класс http.ClientRequest </span> </a> <nav class=md-nav aria-label="Класс http.ClientRequest"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#abort class=md-nav__link> <span class=md-ellipsis> Событие abort </span> </a> </li> <li class=md-nav__item> <a href=#close class=md-nav__link> <span class=md-ellipsis> Событие close </span> </a> </li> <li class=md-nav__item> <a href=#connect class=md-nav__link> <span class=md-ellipsis> Событие connect </span> </a> </li> <li class=md-nav__item> <a href=#continue class=md-nav__link> <span class=md-ellipsis> Событие continue </span> </a> </li> <li class=md-nav__item> <a href=#finish class=md-nav__link> <span class=md-ellipsis> Событие finish </span> </a> </li> <li class=md-nav__item> <a href=#information class=md-nav__link> <span class=md-ellipsis> Событие information </span> </a> </li> <li class=md-nav__item> <a href=#response class=md-nav__link> <span class=md-ellipsis> Событие response </span> </a> </li> <li class=md-nav__item> <a href=#socket class=md-nav__link> <span class=md-ellipsis> Событие socket </span> </a> </li> <li class=md-nav__item> <a href=#timeout class=md-nav__link> <span class=md-ellipsis> Событие timeout </span> </a> </li> <li class=md-nav__item> <a href=#upgrade class=md-nav__link> <span class=md-ellipsis> Событие upgrade </span> </a> </li> <li class=md-nav__item> <a href=#requestabort class=md-nav__link> <span class=md-ellipsis> request.abort </span> </a> </li> <li class=md-nav__item> <a href=#requestaborted class=md-nav__link> <span class=md-ellipsis> request.aborted </span> </a> </li> <li class=md-nav__item> <a href=#requestconnection class=md-nav__link> <span class=md-ellipsis> request.connection </span> </a> </li> <li class=md-nav__item> <a href=#requestcork class=md-nav__link> <span class=md-ellipsis> request.cork </span> </a> </li> <li class=md-nav__item> <a href=#requestend class=md-nav__link> <span class=md-ellipsis> request.end </span> </a> </li> <li class=md-nav__item> <a href=#requestdestroy class=md-nav__link> <span class=md-ellipsis> request.destroy </span> </a> <nav class=md-nav aria-label=request.destroy> <ul class=md-nav__list> <li class=md-nav__item> <a href=#requestdestroyed class=md-nav__link> <span class=md-ellipsis> request.destroyed </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#requestfinished class=md-nav__link> <span class=md-ellipsis> request.finished </span> </a> </li> <li class=md-nav__item> <a href=#requestflushheaders class=md-nav__link> <span class=md-ellipsis> request.flushHeaders </span> </a> </li> <li class=md-nav__item> <a href=#requestgetheader class=md-nav__link> <span class=md-ellipsis> request.getHeader </span> </a> </li> <li class=md-nav__item> <a href=#requestgetheadernames class=md-nav__link> <span class=md-ellipsis> request.getHeaderNames </span> </a> </li> <li class=md-nav__item> <a href=#requestgetheaders class=md-nav__link> <span class=md-ellipsis> request.getHeaders </span> </a> </li> <li class=md-nav__item> <a href=#requestgetrawheadernames class=md-nav__link> <span class=md-ellipsis> request.getRawHeaderNames </span> </a> </li> <li class=md-nav__item> <a href=#requesthasheader class=md-nav__link> <span class=md-ellipsis> request.hasHeader </span> </a> </li> <li class=md-nav__item> <a href=#requestmaxheaderscount class=md-nav__link> <span class=md-ellipsis> request.maxHeadersCount </span> </a> </li> <li class=md-nav__item> <a href=#requestpath class=md-nav__link> <span class=md-ellipsis> request.path </span> </a> </li> <li class=md-nav__item> <a href=#requestmethod class=md-nav__link> <span class=md-ellipsis> request.method </span> </a> </li> <li class=md-nav__item> <a href=#requesthost class=md-nav__link> <span class=md-ellipsis> request.host </span> </a> </li> <li class=md-nav__item> <a href=#requestprotocol class=md-nav__link> <span class=md-ellipsis> request.protocol </span> </a> </li> <li class=md-nav__item> <a href=#requestremoveheader class=md-nav__link> <span class=md-ellipsis> request.removeHeader </span> </a> </li> <li class=md-nav__item> <a href=#requestreusedsocket class=md-nav__link> <span class=md-ellipsis> request.reusedSocket </span> </a> </li> <li class=md-nav__item> <a href=#requestsetheader class=md-nav__link> <span class=md-ellipsis> request.setHeader </span> </a> </li> <li class=md-nav__item> <a href=#requestsetnodelay class=md-nav__link> <span class=md-ellipsis> request.setNoDelay </span> </a> </li> <li class=md-nav__item> <a href=#requestsetsocketkeepalive class=md-nav__link> <span class=md-ellipsis> request.setSocketKeepAlive </span> </a> </li> <li class=md-nav__item> <a href=#requestsettimeout class=md-nav__link> <span class=md-ellipsis> request.setTimeout </span> </a> </li> <li class=md-nav__item> <a href=#requestsocket class=md-nav__link> <span class=md-ellipsis> request.socket </span> </a> </li> <li class=md-nav__item> <a href=#requestuncork class=md-nav__link> <span class=md-ellipsis> request.uncork </span> </a> </li> <li class=md-nav__item> <a href=#requestwritableended class=md-nav__link> <span class=md-ellipsis> request.writableEnded </span> </a> </li> <li class=md-nav__item> <a href=#requestwritablefinished class=md-nav__link> <span class=md-ellipsis> request.writableFinished </span> </a> </li> <li class=md-nav__item> <a href=#requestwrite class=md-nav__link> <span class=md-ellipsis> request.write </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#httpserver class=md-nav__link> <span class=md-ellipsis> http.Server </span> </a> <nav class=md-nav aria-label=http.Server> <ul class=md-nav__list> <li class=md-nav__item> <a href=#checkcontinue class=md-nav__link> <span class=md-ellipsis> Событие: checkContinue </span> </a> </li> <li class=md-nav__item> <a href=#checkexpectation class=md-nav__link> <span class=md-ellipsis> Событие: checkExpectation </span> </a> </li> <li class=md-nav__item> <a href=#clienterror class=md-nav__link> <span class=md-ellipsis> Событие: clientError </span> </a> </li> <li class=md-nav__item> <a href=#close_1 class=md-nav__link> <span class=md-ellipsis> Событие: close </span> </a> </li> <li class=md-nav__item> <a href=#connect_1 class=md-nav__link> <span class=md-ellipsis> Событие: connect </span> </a> </li> <li class=md-nav__item> <a href=#connection class=md-nav__link> <span class=md-ellipsis> Событие: connection </span> </a> </li> <li class=md-nav__item> <a href=#droprequest class=md-nav__link> <span class=md-ellipsis> Событие: dropRequest </span> </a> </li> <li class=md-nav__item> <a href=#request class=md-nav__link> <span class=md-ellipsis> Событие: request </span> </a> </li> <li class=md-nav__item> <a href=#upgrade_1 class=md-nav__link> <span class=md-ellipsis> Событие: upgrade </span> </a> </li> <li class=md-nav__item> <a href=#serverclose class=md-nav__link> <span class=md-ellipsis> server.close </span> </a> </li> <li class=md-nav__item> <a href=#servercloseallconnections class=md-nav__link> <span class=md-ellipsis> server.closeAllConnections </span> </a> </li> <li class=md-nav__item> <a href=#servercloseidleconnections class=md-nav__link> <span class=md-ellipsis> server.closeIdleConnections </span> </a> </li> <li class=md-nav__item> <a href=#serverheaderstimeout class=md-nav__link> <span class=md-ellipsis> server.headersTimeout </span> </a> </li> <li class=md-nav__item> <a href=#serverlisten class=md-nav__link> <span class=md-ellipsis> server.listen </span> </a> </li> <li class=md-nav__item> <a href=#serverlistening class=md-nav__link> <span class=md-ellipsis> server.listening </span> </a> </li> <li class=md-nav__item> <a href=#servermaxheaderscount class=md-nav__link> <span class=md-ellipsis> server.maxHeadersCount </span> </a> </li> <li class=md-nav__item> <a href=#serverrequesttimeout class=md-nav__link> <span class=md-ellipsis> server.requestTimeout </span> </a> </li> <li class=md-nav__item> <a href=#serversettimeout class=md-nav__link> <span class=md-ellipsis> server.setTimeout </span> </a> </li> <li class=md-nav__item> <a href=#servermaxrequestspersocket class=md-nav__link> <span class=md-ellipsis> server.maxRequestsPerSocket </span> </a> </li> <li class=md-nav__item> <a href=#servertimeout class=md-nav__link> <span class=md-ellipsis> server.timeout </span> </a> </li> <li class=md-nav__item> <a href=#serverkeepalivetimeout class=md-nav__link> <span class=md-ellipsis> server.keepAliveTimeout </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#httpserverresponse class=md-nav__link> <span class=md-ellipsis> http.ServerResponse </span> </a> <nav class=md-nav aria-label=http.ServerResponse> <ul class=md-nav__list> <li class=md-nav__item> <a href=#close_2 class=md-nav__link> <span class=md-ellipsis> Событие: close </span> </a> </li> <li class=md-nav__item> <a href=#finish_1 class=md-nav__link> <span class=md-ellipsis> Событие: finish </span> </a> </li> <li class=md-nav__item> <a href=#responseaddtrailers class=md-nav__link> <span class=md-ellipsis> response.addTrailers </span> </a> </li> <li class=md-nav__item> <a href=#responseconnection class=md-nav__link> <span class=md-ellipsis> response.connection </span> </a> </li> <li class=md-nav__item> <a href=#responsecork class=md-nav__link> <span class=md-ellipsis> response.cork </span> </a> </li> <li class=md-nav__item> <a href=#responseend class=md-nav__link> <span class=md-ellipsis> response.end </span> </a> </li> <li class=md-nav__item> <a href=#responsefinished class=md-nav__link> <span class=md-ellipsis> response.finished </span> </a> </li> <li class=md-nav__item> <a href=#responseflushheaders class=md-nav__link> <span class=md-ellipsis> response.flushHeaders </span> </a> </li> <li class=md-nav__item> <a href=#responsegetheader class=md-nav__link> <span class=md-ellipsis> response.getHeader </span> </a> </li> <li class=md-nav__item> <a href=#responsegetheadernames class=md-nav__link> <span class=md-ellipsis> response.getHeaderNames </span> </a> </li> <li class=md-nav__item> <a href=#responsegetheaders class=md-nav__link> <span class=md-ellipsis> response.getHeaders </span> </a> </li> <li class=md-nav__item> <a href=#responsehasheader class=md-nav__link> <span class=md-ellipsis> response.hasHeader </span> </a> </li> <li class=md-nav__item> <a href=#responseheaderssent class=md-nav__link> <span class=md-ellipsis> response.headersSent </span> </a> </li> <li class=md-nav__item> <a href=#responseremoveheader class=md-nav__link> <span class=md-ellipsis> response.removeHeader </span> </a> </li> <li class=md-nav__item> <a href=#responsereq class=md-nav__link> <span class=md-ellipsis> response.req </span> </a> </li> <li class=md-nav__item> <a href=#responsesenddate class=md-nav__link> <span class=md-ellipsis> response.sendDate </span> </a> </li> <li class=md-nav__item> <a href=#responsesetheader class=md-nav__link> <span class=md-ellipsis> response.setHeader </span> </a> </li> <li class=md-nav__item> <a href=#responsesettimeout class=md-nav__link> <span class=md-ellipsis> response.setTimeout </span> </a> </li> <li class=md-nav__item> <a href=#responsesocket class=md-nav__link> <span class=md-ellipsis> response.socket </span> </a> </li> <li class=md-nav__item> <a href=#responsestatuscode class=md-nav__link> <span class=md-ellipsis> response.statusCode </span> </a> </li> <li class=md-nav__item> <a href=#responsestatusmessage class=md-nav__link> <span class=md-ellipsis> response.statusMessage </span> </a> </li> <li class=md-nav__item> <a href=#responsestrictcontentlength class=md-nav__link> <span class=md-ellipsis> response.strictContentLength </span> </a> </li> <li class=md-nav__item> <a href=#responseuncork class=md-nav__link> <span class=md-ellipsis> response.uncork </span> </a> </li> <li class=md-nav__item> <a href=#responsewritableended class=md-nav__link> <span class=md-ellipsis> response.writableEnded </span> </a> </li> <li class=md-nav__item> <a href=#responsewritablefinished class=md-nav__link> <span class=md-ellipsis> response.writableFinished </span> </a> </li> <li class=md-nav__item> <a href=#responsewrite class=md-nav__link> <span class=md-ellipsis> response.write </span> </a> </li> <li class=md-nav__item> <a href=#responsewritecontinue class=md-nav__link> <span class=md-ellipsis> response.writeContinue </span> </a> </li> <li class=md-nav__item> <a href=#responsewriteearlyhints class=md-nav__link> <span class=md-ellipsis> response.writeEarlyHints </span> </a> </li> <li class=md-nav__item> <a href=#responsewritehead class=md-nav__link> <span class=md-ellipsis> response.writeHead </span> </a> </li> <li class=md-nav__item> <a href=#responsewriteprocessing class=md-nav__link> <span class=md-ellipsis> response.writeProcessing </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#httpincomingmessage class=md-nav__link> <span class=md-ellipsis> http.IncomingMessage </span> </a> <nav class=md-nav aria-label=http.IncomingMessage> <ul class=md-nav__list> <li class=md-nav__item> <a href=#aborted class=md-nav__link> <span class=md-ellipsis> Событие: aborted </span> </a> </li> <li class=md-nav__item> <a href=#close_3 class=md-nav__link> <span class=md-ellipsis> Событие: close </span> </a> </li> <li class=md-nav__item> <a href=#messageaborted class=md-nav__link> <span class=md-ellipsis> message.aborted </span> </a> </li> <li class=md-nav__item> <a href=#messagecomplete class=md-nav__link> <span class=md-ellipsis> message.complete </span> </a> </li> <li class=md-nav__item> <a href=#messageconnection class=md-nav__link> <span class=md-ellipsis> message.connection </span> </a> </li> <li class=md-nav__item> <a href=#messagedestroy class=md-nav__link> <span class=md-ellipsis> message.destroy </span> </a> </li> <li class=md-nav__item> <a href=#messageheaders class=md-nav__link> <span class=md-ellipsis> message.headers </span> </a> </li> <li class=md-nav__item> <a href=#messageheadersdistinct class=md-nav__link> <span class=md-ellipsis> message.headersDistinct </span> </a> </li> <li class=md-nav__item> <a href=#messagehttpversion class=md-nav__link> <span class=md-ellipsis> message.httpVersion </span> </a> </li> <li class=md-nav__item> <a href=#messagemethod class=md-nav__link> <span class=md-ellipsis> message.method </span> </a> </li> <li class=md-nav__item> <a href=#messagerawheaders class=md-nav__link> <span class=md-ellipsis> message.rawHeaders </span> </a> </li> <li class=md-nav__item> <a href=#messagerawtrailers class=md-nav__link> <span class=md-ellipsis> message.rawTrailers </span> </a> </li> <li class=md-nav__item> <a href=#messagesettimeout class=md-nav__link> <span class=md-ellipsis> message.setTimeout </span> </a> </li> <li class=md-nav__item> <a href=#messagesocket class=md-nav__link> <span class=md-ellipsis> message.socket </span> </a> </li> <li class=md-nav__item> <a href=#messagestatuscode class=md-nav__link> <span class=md-ellipsis> message.statusCode </span> </a> </li> <li class=md-nav__item> <a href=#messagestatusmessage class=md-nav__link> <span class=md-ellipsis> message.statusMessage </span> </a> </li> <li class=md-nav__item> <a href=#messagetrailers class=md-nav__link> <span class=md-ellipsis> message.trailers </span> </a> </li> <li class=md-nav__item> <a href=#messagetrailersdistinct class=md-nav__link> <span class=md-ellipsis> message.trailersDistinct </span> </a> </li> <li class=md-nav__item> <a href=#messageurl class=md-nav__link> <span class=md-ellipsis> message.url </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#httpoutgoingmessage class=md-nav__link> <span class=md-ellipsis> http.OutgoingMessage </span> </a> <nav class=md-nav aria-label=http.OutgoingMessage> <ul class=md-nav__list> <li class=md-nav__item> <a href=#drain class=md-nav__link> <span class=md-ellipsis> Событие: drain </span> </a> </li> <li class=md-nav__item> <a href=#finish_2 class=md-nav__link> <span class=md-ellipsis> Событие: finish </span> </a> </li> <li class=md-nav__item> <a href=#prefinish class=md-nav__link> <span class=md-ellipsis> Событие: prefinish </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessageaddtrailers class=md-nav__link> <span class=md-ellipsis> outgoingMessage.addTrailers </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessageappendheader class=md-nav__link> <span class=md-ellipsis> outgoingMessage.appendHeader </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessageconnection class=md-nav__link> <span class=md-ellipsis> outgoingMessage.connection </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagecork class=md-nav__link> <span class=md-ellipsis> outgoingMessage.cork </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagedestroy class=md-nav__link> <span class=md-ellipsis> outgoingMessage.destroy </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessageend class=md-nav__link> <span class=md-ellipsis> outgoingMessage.end </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessageflushheaders class=md-nav__link> <span class=md-ellipsis> outgoingMessage.flushHeaders </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagegetheader class=md-nav__link> <span class=md-ellipsis> outgoingMessage.getHeader </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagegetheadernames class=md-nav__link> <span class=md-ellipsis> outgoingMessage.getHeaderNames </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagegetheaders class=md-nav__link> <span class=md-ellipsis> outgoingMessage.getHeaders </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagehasheader class=md-nav__link> <span class=md-ellipsis> outgoingMessage.hasHeader </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessageheaderssent class=md-nav__link> <span class=md-ellipsis> outgoingMessage.headersSent </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagepipe class=md-nav__link> <span class=md-ellipsis> outgoingMessage.pipe </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessageremoveheader class=md-nav__link> <span class=md-ellipsis> outgoingMessage.removeHeader </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagesetheader class=md-nav__link> <span class=md-ellipsis> outgoingMessage.setHeader </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagesetheaders class=md-nav__link> <span class=md-ellipsis> outgoingMessage.setHeaders </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagesettimeout class=md-nav__link> <span class=md-ellipsis> outgoingMessage.setTimeout </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagesocket class=md-nav__link> <span class=md-ellipsis> outgoingMessage.socket </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessageuncork class=md-nav__link> <span class=md-ellipsis> outgoingMessage.uncork </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagewritablecorked class=md-nav__link> <span class=md-ellipsis> outgoingMessage.writableCorked </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagewritableended class=md-nav__link> <span class=md-ellipsis> outgoingMessage.writableEnded </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagewritablefinished class=md-nav__link> <span class=md-ellipsis> outgoingMessage.writableFinished </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagewritablehighwatermark class=md-nav__link> <span class=md-ellipsis> outgoingMessage.writableHighWaterMark </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagewritablelength class=md-nav__link> <span class=md-ellipsis> outgoingMessage.writableLength </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagewritableobjectmode class=md-nav__link> <span class=md-ellipsis> outgoingMessage.writableObjectMode </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagewrite class=md-nav__link> <span class=md-ellipsis> outgoingMessage.write </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#httpmethods class=md-nav__link> <span class=md-ellipsis> http.METHODS </span> </a> </li> <li class=md-nav__item> <a href=#httpstatus_codes class=md-nav__link> <span class=md-ellipsis> http.STATUS_CODES </span> </a> </li> <li class=md-nav__item> <a href=#httpcreateserver class=md-nav__link> <span class=md-ellipsis> http.createServer </span> </a> </li> <li class=md-nav__item> <a href=#httpget class=md-nav__link> <span class=md-ellipsis> http.get </span> </a> </li> <li class=md-nav__item> <a href=#httpglobalagent class=md-nav__link> <span class=md-ellipsis> http.globalAgent </span> </a> </li> <li class=md-nav__item> <a href=#httpmaxheadersize class=md-nav__link> <span class=md-ellipsis> http.maxHeaderSize </span> </a> </li> <li class=md-nav__item> <a href=#httprequest class=md-nav__link> <span class=md-ellipsis> http.request </span> </a> </li> <li class=md-nav__item> <a href=#httprequest_1 class=md-nav__link> <span class=md-ellipsis> http.request </span> </a> </li> <li class=md-nav__item> <a href=#httpvalidateheadername class=md-nav__link> <span class=md-ellipsis> http.validateHeaderName </span> </a> </li> <li class=md-nav__item> <a href=#httpvalidateheadervalue class=md-nav__link> <span class=md-ellipsis> http.validateHeaderValue </span> </a> </li> <li class=md-nav__item> <a href=#httpsetmaxidlehttpparsers class=md-nav__link> <span class=md-ellipsis> http.setMaxIdleHTTPParsers </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../http2/ class=md-nav__link> <span class=md-ellipsis> HTTP/2 </span> </a> </li> <li class=md-nav__item> <a href=../https/ class=md-nav__link> <span class=md-ellipsis> HTTPS </span> </a> </li> <li class=md-nav__item> <a href=../inspector/ class=md-nav__link> <span class=md-ellipsis> Inspector </span> </a> </li> <li class=md-nav__item> <a href=../intl/ class=md-nav__link> <span class=md-ellipsis> Internationalization </span> </a> </li> <li class=md-nav__item> <a href=../module/ class=md-nav__link> <span class=md-ellipsis> API node:module </span> </a> </li> <li class=md-nav__item> <a href=../modules/ class=md-nav__link> <span class=md-ellipsis> CommonJS modules </span> </a> </li> <li class=md-nav__item> <a href=../n-api/ class=md-nav__link> <span class=md-ellipsis> Node-API </span> </a> </li> <li class=md-nav__item> <a href=../net/ class=md-nav__link> <span class=md-ellipsis> Net </span> </a> </li> <li class=md-nav__item> <a href=../os/ class=md-nav__link> <span class=md-ellipsis> OS </span> </a> </li> <li class=md-nav__item> <a href=../packages/ class=md-nav__link> <span class=md-ellipsis> Packages </span> </a> </li> <li class=md-nav__item> <a href=../path/ class=md-nav__link> <span class=md-ellipsis> Path </span> </a> </li> <li class=md-nav__item> <a href=../perf_hooks/ class=md-nav__link> <span class=md-ellipsis> Performance hooks </span> </a> </li> <li class=md-nav__item> <a href=../permissions/ class=md-nav__link> <span class=md-ellipsis> Permissions </span> </a> </li> <li class=md-nav__item> <a href=../process/ class=md-nav__link> <span class=md-ellipsis> Process </span> </a> </li> <li class=md-nav__item> <a href=../punycode/ class=md-nav__link> <span class=md-ellipsis> Punycode </span> </a> </li> <li class=md-nav__item> <a href=../querystring/ class=md-nav__link> <span class=md-ellipsis> Query strings </span> </a> </li> <li class=md-nav__item> <a href=../readline/ class=md-nav__link> <span class=md-ellipsis> Readline </span> </a> </li> <li class=md-nav__item> <a href=../repl/ class=md-nav__link> <span class=md-ellipsis> REPL </span> </a> </li> <li class=md-nav__item> <a href=../report/ class=md-nav__link> <span class=md-ellipsis> Report </span> </a> </li> <li class=md-nav__item> <a href=../single-executable-applications/ class=md-nav__link> <span class=md-ellipsis> Single executable applications </span> </a> </li> <li class=md-nav__item> <a href=../stream/ class=md-nav__link> <span class=md-ellipsis> Stream </span> </a> </li> <li class=md-nav__item> <a href=../string_decoder/ class=md-nav__link> <span class=md-ellipsis> String decoder </span> </a> </li> <li class=md-nav__item> <a href=../test/ class=md-nav__link> <span class=md-ellipsis> Test runner </span> </a> </li> <li class=md-nav__item> <a href=../timers/ class=md-nav__link> <span class=md-ellipsis> Timers </span> </a> </li> <li class=md-nav__item> <a href=../tls/ class=md-nav__link> <span class=md-ellipsis> TLS/SSL </span> </a> </li> <li class=md-nav__item> <a href=../tracing/ class=md-nav__link> <span class=md-ellipsis> Trace events </span> </a> </li> <li class=md-nav__item> <a href=../tty/ class=md-nav__link> <span class=md-ellipsis> TTY </span> </a> </li> <li class=md-nav__item> <a href=../url/ class=md-nav__link> <span class=md-ellipsis> URL </span> </a> </li> <li class=md-nav__item> <a href=../util/ class=md-nav__link> <span class=md-ellipsis> Utilities </span> </a> </li> <li class=md-nav__item> <a href=../v8/ class=md-nav__link> <span class=md-ellipsis> V8 </span> </a> </li> <li class=md-nav__item> <a href=../vm/ class=md-nav__link> <span class=md-ellipsis> VM </span> </a> </li> <li class=md-nav__item> <a href=../wasi/ class=md-nav__link> <span class=md-ellipsis> WASI </span> </a> </li> <li class=md-nav__item> <a href=../webcrypto/ class=md-nav__link> <span class=md-ellipsis> Web Crypto API </span> </a> </li> <li class=md-nav__item> <a href=../webstreams/ class=md-nav__link> <span class=md-ellipsis> Web Streams API </span> </a> </li> <li class=md-nav__item> <a href=../worker_threads/ class=md-nav__link> <span class=md-ellipsis> Worker threads </span> </a> </li> <li class=md-nav__item> <a href=../zlib/ class=md-nav__link> <span class=md-ellipsis> Zlib </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../guides/ class=md-nav__link> <span class=md-ellipsis> Гайды </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../frameworks/ class=md-nav__link> <span class=md-ellipsis> Фреймворки </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=https://devmaps.ru/nodejs-2020 class=md-nav__link> <span class=md-ellipsis> Карта обучения </span> </a> </li> <li class=md-nav__item> <a href=https://boosty.to/bndby class=md-nav__link> <span class=md-ellipsis> Спасибо </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=Содержание> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Содержание </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#httpagent class=md-nav__link> <span class=md-ellipsis> Класс http.Agent </span> </a> <nav class=md-nav aria-label="Класс http.Agent"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#new-agent class=md-nav__link> <span class=md-ellipsis> new Agent </span> </a> </li> <li class=md-nav__item> <a href=#agentcreateconnection class=md-nav__link> <span class=md-ellipsis> agent.createConnection </span> </a> </li> <li class=md-nav__item> <a href=#agentkeepsocketalive class=md-nav__link> <span class=md-ellipsis> agent.keepSocketAlive </span> </a> </li> <li class=md-nav__item> <a href=#agentreusesocket class=md-nav__link> <span class=md-ellipsis> agent.reuseSocket </span> </a> </li> <li class=md-nav__item> <a href=#agentdestroy class=md-nav__link> <span class=md-ellipsis> agent.destroy </span> </a> </li> <li class=md-nav__item> <a href=#agentfreesockets class=md-nav__link> <span class=md-ellipsis> agent.freeSockets </span> </a> </li> <li class=md-nav__item> <a href=#agentgetname class=md-nav__link> <span class=md-ellipsis> agent.getName </span> </a> </li> <li class=md-nav__item> <a href=#agentmaxfreesockets class=md-nav__link> <span class=md-ellipsis> agent.maxFreeSockets </span> </a> </li> <li class=md-nav__item> <a href=#agentmaxsockets class=md-nav__link> <span class=md-ellipsis> agent.maxSockets </span> </a> </li> <li class=md-nav__item> <a href=#agentmaxtotalsockets class=md-nav__link> <span class=md-ellipsis> agent.maxTotalSockets </span> </a> </li> <li class=md-nav__item> <a href=#agentrequests class=md-nav__link> <span class=md-ellipsis> agent.requests </span> </a> </li> <li class=md-nav__item> <a href=#agentsockets class=md-nav__link> <span class=md-ellipsis> agent.sockets </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#httpclientrequest class=md-nav__link> <span class=md-ellipsis> Класс http.ClientRequest </span> </a> <nav class=md-nav aria-label="Класс http.ClientRequest"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#abort class=md-nav__link> <span class=md-ellipsis> Событие abort </span> </a> </li> <li class=md-nav__item> <a href=#close class=md-nav__link> <span class=md-ellipsis> Событие close </span> </a> </li> <li class=md-nav__item> <a href=#connect class=md-nav__link> <span class=md-ellipsis> Событие connect </span> </a> </li> <li class=md-nav__item> <a href=#continue class=md-nav__link> <span class=md-ellipsis> Событие continue </span> </a> </li> <li class=md-nav__item> <a href=#finish class=md-nav__link> <span class=md-ellipsis> Событие finish </span> </a> </li> <li class=md-nav__item> <a href=#information class=md-nav__link> <span class=md-ellipsis> Событие information </span> </a> </li> <li class=md-nav__item> <a href=#response class=md-nav__link> <span class=md-ellipsis> Событие response </span> </a> </li> <li class=md-nav__item> <a href=#socket class=md-nav__link> <span class=md-ellipsis> Событие socket </span> </a> </li> <li class=md-nav__item> <a href=#timeout class=md-nav__link> <span class=md-ellipsis> Событие timeout </span> </a> </li> <li class=md-nav__item> <a href=#upgrade class=md-nav__link> <span class=md-ellipsis> Событие upgrade </span> </a> </li> <li class=md-nav__item> <a href=#requestabort class=md-nav__link> <span class=md-ellipsis> request.abort </span> </a> </li> <li class=md-nav__item> <a href=#requestaborted class=md-nav__link> <span class=md-ellipsis> request.aborted </span> </a> </li> <li class=md-nav__item> <a href=#requestconnection class=md-nav__link> <span class=md-ellipsis> request.connection </span> </a> </li> <li class=md-nav__item> <a href=#requestcork class=md-nav__link> <span class=md-ellipsis> request.cork </span> </a> </li> <li class=md-nav__item> <a href=#requestend class=md-nav__link> <span class=md-ellipsis> request.end </span> </a> </li> <li class=md-nav__item> <a href=#requestdestroy class=md-nav__link> <span class=md-ellipsis> request.destroy </span> </a> <nav class=md-nav aria-label=request.destroy> <ul class=md-nav__list> <li class=md-nav__item> <a href=#requestdestroyed class=md-nav__link> <span class=md-ellipsis> request.destroyed </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#requestfinished class=md-nav__link> <span class=md-ellipsis> request.finished </span> </a> </li> <li class=md-nav__item> <a href=#requestflushheaders class=md-nav__link> <span class=md-ellipsis> request.flushHeaders </span> </a> </li> <li class=md-nav__item> <a href=#requestgetheader class=md-nav__link> <span class=md-ellipsis> request.getHeader </span> </a> </li> <li class=md-nav__item> <a href=#requestgetheadernames class=md-nav__link> <span class=md-ellipsis> request.getHeaderNames </span> </a> </li> <li class=md-nav__item> <a href=#requestgetheaders class=md-nav__link> <span class=md-ellipsis> request.getHeaders </span> </a> </li> <li class=md-nav__item> <a href=#requestgetrawheadernames class=md-nav__link> <span class=md-ellipsis> request.getRawHeaderNames </span> </a> </li> <li class=md-nav__item> <a href=#requesthasheader class=md-nav__link> <span class=md-ellipsis> request.hasHeader </span> </a> </li> <li class=md-nav__item> <a href=#requestmaxheaderscount class=md-nav__link> <span class=md-ellipsis> request.maxHeadersCount </span> </a> </li> <li class=md-nav__item> <a href=#requestpath class=md-nav__link> <span class=md-ellipsis> request.path </span> </a> </li> <li class=md-nav__item> <a href=#requestmethod class=md-nav__link> <span class=md-ellipsis> request.method </span> </a> </li> <li class=md-nav__item> <a href=#requesthost class=md-nav__link> <span class=md-ellipsis> request.host </span> </a> </li> <li class=md-nav__item> <a href=#requestprotocol class=md-nav__link> <span class=md-ellipsis> request.protocol </span> </a> </li> <li class=md-nav__item> <a href=#requestremoveheader class=md-nav__link> <span class=md-ellipsis> request.removeHeader </span> </a> </li> <li class=md-nav__item> <a href=#requestreusedsocket class=md-nav__link> <span class=md-ellipsis> request.reusedSocket </span> </a> </li> <li class=md-nav__item> <a href=#requestsetheader class=md-nav__link> <span class=md-ellipsis> request.setHeader </span> </a> </li> <li class=md-nav__item> <a href=#requestsetnodelay class=md-nav__link> <span class=md-ellipsis> request.setNoDelay </span> </a> </li> <li class=md-nav__item> <a href=#requestsetsocketkeepalive class=md-nav__link> <span class=md-ellipsis> request.setSocketKeepAlive </span> </a> </li> <li class=md-nav__item> <a href=#requestsettimeout class=md-nav__link> <span class=md-ellipsis> request.setTimeout </span> </a> </li> <li class=md-nav__item> <a href=#requestsocket class=md-nav__link> <span class=md-ellipsis> request.socket </span> </a> </li> <li class=md-nav__item> <a href=#requestuncork class=md-nav__link> <span class=md-ellipsis> request.uncork </span> </a> </li> <li class=md-nav__item> <a href=#requestwritableended class=md-nav__link> <span class=md-ellipsis> request.writableEnded </span> </a> </li> <li class=md-nav__item> <a href=#requestwritablefinished class=md-nav__link> <span class=md-ellipsis> request.writableFinished </span> </a> </li> <li class=md-nav__item> <a href=#requestwrite class=md-nav__link> <span class=md-ellipsis> request.write </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#httpserver class=md-nav__link> <span class=md-ellipsis> http.Server </span> </a> <nav class=md-nav aria-label=http.Server> <ul class=md-nav__list> <li class=md-nav__item> <a href=#checkcontinue class=md-nav__link> <span class=md-ellipsis> Событие: checkContinue </span> </a> </li> <li class=md-nav__item> <a href=#checkexpectation class=md-nav__link> <span class=md-ellipsis> Событие: checkExpectation </span> </a> </li> <li class=md-nav__item> <a href=#clienterror class=md-nav__link> <span class=md-ellipsis> Событие: clientError </span> </a> </li> <li class=md-nav__item> <a href=#close_1 class=md-nav__link> <span class=md-ellipsis> Событие: close </span> </a> </li> <li class=md-nav__item> <a href=#connect_1 class=md-nav__link> <span class=md-ellipsis> Событие: connect </span> </a> </li> <li class=md-nav__item> <a href=#connection class=md-nav__link> <span class=md-ellipsis> Событие: connection </span> </a> </li> <li class=md-nav__item> <a href=#droprequest class=md-nav__link> <span class=md-ellipsis> Событие: dropRequest </span> </a> </li> <li class=md-nav__item> <a href=#request class=md-nav__link> <span class=md-ellipsis> Событие: request </span> </a> </li> <li class=md-nav__item> <a href=#upgrade_1 class=md-nav__link> <span class=md-ellipsis> Событие: upgrade </span> </a> </li> <li class=md-nav__item> <a href=#serverclose class=md-nav__link> <span class=md-ellipsis> server.close </span> </a> </li> <li class=md-nav__item> <a href=#servercloseallconnections class=md-nav__link> <span class=md-ellipsis> server.closeAllConnections </span> </a> </li> <li class=md-nav__item> <a href=#servercloseidleconnections class=md-nav__link> <span class=md-ellipsis> server.closeIdleConnections </span> </a> </li> <li class=md-nav__item> <a href=#serverheaderstimeout class=md-nav__link> <span class=md-ellipsis> server.headersTimeout </span> </a> </li> <li class=md-nav__item> <a href=#serverlisten class=md-nav__link> <span class=md-ellipsis> server.listen </span> </a> </li> <li class=md-nav__item> <a href=#serverlistening class=md-nav__link> <span class=md-ellipsis> server.listening </span> </a> </li> <li class=md-nav__item> <a href=#servermaxheaderscount class=md-nav__link> <span class=md-ellipsis> server.maxHeadersCount </span> </a> </li> <li class=md-nav__item> <a href=#serverrequesttimeout class=md-nav__link> <span class=md-ellipsis> server.requestTimeout </span> </a> </li> <li class=md-nav__item> <a href=#serversettimeout class=md-nav__link> <span class=md-ellipsis> server.setTimeout </span> </a> </li> <li class=md-nav__item> <a href=#servermaxrequestspersocket class=md-nav__link> <span class=md-ellipsis> server.maxRequestsPerSocket </span> </a> </li> <li class=md-nav__item> <a href=#servertimeout class=md-nav__link> <span class=md-ellipsis> server.timeout </span> </a> </li> <li class=md-nav__item> <a href=#serverkeepalivetimeout class=md-nav__link> <span class=md-ellipsis> server.keepAliveTimeout </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#httpserverresponse class=md-nav__link> <span class=md-ellipsis> http.ServerResponse </span> </a> <nav class=md-nav aria-label=http.ServerResponse> <ul class=md-nav__list> <li class=md-nav__item> <a href=#close_2 class=md-nav__link> <span class=md-ellipsis> Событие: close </span> </a> </li> <li class=md-nav__item> <a href=#finish_1 class=md-nav__link> <span class=md-ellipsis> Событие: finish </span> </a> </li> <li class=md-nav__item> <a href=#responseaddtrailers class=md-nav__link> <span class=md-ellipsis> response.addTrailers </span> </a> </li> <li class=md-nav__item> <a href=#responseconnection class=md-nav__link> <span class=md-ellipsis> response.connection </span> </a> </li> <li class=md-nav__item> <a href=#responsecork class=md-nav__link> <span class=md-ellipsis> response.cork </span> </a> </li> <li class=md-nav__item> <a href=#responseend class=md-nav__link> <span class=md-ellipsis> response.end </span> </a> </li> <li class=md-nav__item> <a href=#responsefinished class=md-nav__link> <span class=md-ellipsis> response.finished </span> </a> </li> <li class=md-nav__item> <a href=#responseflushheaders class=md-nav__link> <span class=md-ellipsis> response.flushHeaders </span> </a> </li> <li class=md-nav__item> <a href=#responsegetheader class=md-nav__link> <span class=md-ellipsis> response.getHeader </span> </a> </li> <li class=md-nav__item> <a href=#responsegetheadernames class=md-nav__link> <span class=md-ellipsis> response.getHeaderNames </span> </a> </li> <li class=md-nav__item> <a href=#responsegetheaders class=md-nav__link> <span class=md-ellipsis> response.getHeaders </span> </a> </li> <li class=md-nav__item> <a href=#responsehasheader class=md-nav__link> <span class=md-ellipsis> response.hasHeader </span> </a> </li> <li class=md-nav__item> <a href=#responseheaderssent class=md-nav__link> <span class=md-ellipsis> response.headersSent </span> </a> </li> <li class=md-nav__item> <a href=#responseremoveheader class=md-nav__link> <span class=md-ellipsis> response.removeHeader </span> </a> </li> <li class=md-nav__item> <a href=#responsereq class=md-nav__link> <span class=md-ellipsis> response.req </span> </a> </li> <li class=md-nav__item> <a href=#responsesenddate class=md-nav__link> <span class=md-ellipsis> response.sendDate </span> </a> </li> <li class=md-nav__item> <a href=#responsesetheader class=md-nav__link> <span class=md-ellipsis> response.setHeader </span> </a> </li> <li class=md-nav__item> <a href=#responsesettimeout class=md-nav__link> <span class=md-ellipsis> response.setTimeout </span> </a> </li> <li class=md-nav__item> <a href=#responsesocket class=md-nav__link> <span class=md-ellipsis> response.socket </span> </a> </li> <li class=md-nav__item> <a href=#responsestatuscode class=md-nav__link> <span class=md-ellipsis> response.statusCode </span> </a> </li> <li class=md-nav__item> <a href=#responsestatusmessage class=md-nav__link> <span class=md-ellipsis> response.statusMessage </span> </a> </li> <li class=md-nav__item> <a href=#responsestrictcontentlength class=md-nav__link> <span class=md-ellipsis> response.strictContentLength </span> </a> </li> <li class=md-nav__item> <a href=#responseuncork class=md-nav__link> <span class=md-ellipsis> response.uncork </span> </a> </li> <li class=md-nav__item> <a href=#responsewritableended class=md-nav__link> <span class=md-ellipsis> response.writableEnded </span> </a> </li> <li class=md-nav__item> <a href=#responsewritablefinished class=md-nav__link> <span class=md-ellipsis> response.writableFinished </span> </a> </li> <li class=md-nav__item> <a href=#responsewrite class=md-nav__link> <span class=md-ellipsis> response.write </span> </a> </li> <li class=md-nav__item> <a href=#responsewritecontinue class=md-nav__link> <span class=md-ellipsis> response.writeContinue </span> </a> </li> <li class=md-nav__item> <a href=#responsewriteearlyhints class=md-nav__link> <span class=md-ellipsis> response.writeEarlyHints </span> </a> </li> <li class=md-nav__item> <a href=#responsewritehead class=md-nav__link> <span class=md-ellipsis> response.writeHead </span> </a> </li> <li class=md-nav__item> <a href=#responsewriteprocessing class=md-nav__link> <span class=md-ellipsis> response.writeProcessing </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#httpincomingmessage class=md-nav__link> <span class=md-ellipsis> http.IncomingMessage </span> </a> <nav class=md-nav aria-label=http.IncomingMessage> <ul class=md-nav__list> <li class=md-nav__item> <a href=#aborted class=md-nav__link> <span class=md-ellipsis> Событие: aborted </span> </a> </li> <li class=md-nav__item> <a href=#close_3 class=md-nav__link> <span class=md-ellipsis> Событие: close </span> </a> </li> <li class=md-nav__item> <a href=#messageaborted class=md-nav__link> <span class=md-ellipsis> message.aborted </span> </a> </li> <li class=md-nav__item> <a href=#messagecomplete class=md-nav__link> <span class=md-ellipsis> message.complete </span> </a> </li> <li class=md-nav__item> <a href=#messageconnection class=md-nav__link> <span class=md-ellipsis> message.connection </span> </a> </li> <li class=md-nav__item> <a href=#messagedestroy class=md-nav__link> <span class=md-ellipsis> message.destroy </span> </a> </li> <li class=md-nav__item> <a href=#messageheaders class=md-nav__link> <span class=md-ellipsis> message.headers </span> </a> </li> <li class=md-nav__item> <a href=#messageheadersdistinct class=md-nav__link> <span class=md-ellipsis> message.headersDistinct </span> </a> </li> <li class=md-nav__item> <a href=#messagehttpversion class=md-nav__link> <span class=md-ellipsis> message.httpVersion </span> </a> </li> <li class=md-nav__item> <a href=#messagemethod class=md-nav__link> <span class=md-ellipsis> message.method </span> </a> </li> <li class=md-nav__item> <a href=#messagerawheaders class=md-nav__link> <span class=md-ellipsis> message.rawHeaders </span> </a> </li> <li class=md-nav__item> <a href=#messagerawtrailers class=md-nav__link> <span class=md-ellipsis> message.rawTrailers </span> </a> </li> <li class=md-nav__item> <a href=#messagesettimeout class=md-nav__link> <span class=md-ellipsis> message.setTimeout </span> </a> </li> <li class=md-nav__item> <a href=#messagesocket class=md-nav__link> <span class=md-ellipsis> message.socket </span> </a> </li> <li class=md-nav__item> <a href=#messagestatuscode class=md-nav__link> <span class=md-ellipsis> message.statusCode </span> </a> </li> <li class=md-nav__item> <a href=#messagestatusmessage class=md-nav__link> <span class=md-ellipsis> message.statusMessage </span> </a> </li> <li class=md-nav__item> <a href=#messagetrailers class=md-nav__link> <span class=md-ellipsis> message.trailers </span> </a> </li> <li class=md-nav__item> <a href=#messagetrailersdistinct class=md-nav__link> <span class=md-ellipsis> message.trailersDistinct </span> </a> </li> <li class=md-nav__item> <a href=#messageurl class=md-nav__link> <span class=md-ellipsis> message.url </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#httpoutgoingmessage class=md-nav__link> <span class=md-ellipsis> http.OutgoingMessage </span> </a> <nav class=md-nav aria-label=http.OutgoingMessage> <ul class=md-nav__list> <li class=md-nav__item> <a href=#drain class=md-nav__link> <span class=md-ellipsis> Событие: drain </span> </a> </li> <li class=md-nav__item> <a href=#finish_2 class=md-nav__link> <span class=md-ellipsis> Событие: finish </span> </a> </li> <li class=md-nav__item> <a href=#prefinish class=md-nav__link> <span class=md-ellipsis> Событие: prefinish </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessageaddtrailers class=md-nav__link> <span class=md-ellipsis> outgoingMessage.addTrailers </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessageappendheader class=md-nav__link> <span class=md-ellipsis> outgoingMessage.appendHeader </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessageconnection class=md-nav__link> <span class=md-ellipsis> outgoingMessage.connection </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagecork class=md-nav__link> <span class=md-ellipsis> outgoingMessage.cork </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagedestroy class=md-nav__link> <span class=md-ellipsis> outgoingMessage.destroy </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessageend class=md-nav__link> <span class=md-ellipsis> outgoingMessage.end </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessageflushheaders class=md-nav__link> <span class=md-ellipsis> outgoingMessage.flushHeaders </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagegetheader class=md-nav__link> <span class=md-ellipsis> outgoingMessage.getHeader </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagegetheadernames class=md-nav__link> <span class=md-ellipsis> outgoingMessage.getHeaderNames </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagegetheaders class=md-nav__link> <span class=md-ellipsis> outgoingMessage.getHeaders </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagehasheader class=md-nav__link> <span class=md-ellipsis> outgoingMessage.hasHeader </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessageheaderssent class=md-nav__link> <span class=md-ellipsis> outgoingMessage.headersSent </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagepipe class=md-nav__link> <span class=md-ellipsis> outgoingMessage.pipe </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessageremoveheader class=md-nav__link> <span class=md-ellipsis> outgoingMessage.removeHeader </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagesetheader class=md-nav__link> <span class=md-ellipsis> outgoingMessage.setHeader </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagesetheaders class=md-nav__link> <span class=md-ellipsis> outgoingMessage.setHeaders </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagesettimeout class=md-nav__link> <span class=md-ellipsis> outgoingMessage.setTimeout </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagesocket class=md-nav__link> <span class=md-ellipsis> outgoingMessage.socket </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessageuncork class=md-nav__link> <span class=md-ellipsis> outgoingMessage.uncork </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagewritablecorked class=md-nav__link> <span class=md-ellipsis> outgoingMessage.writableCorked </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagewritableended class=md-nav__link> <span class=md-ellipsis> outgoingMessage.writableEnded </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagewritablefinished class=md-nav__link> <span class=md-ellipsis> outgoingMessage.writableFinished </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagewritablehighwatermark class=md-nav__link> <span class=md-ellipsis> outgoingMessage.writableHighWaterMark </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagewritablelength class=md-nav__link> <span class=md-ellipsis> outgoingMessage.writableLength </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagewritableobjectmode class=md-nav__link> <span class=md-ellipsis> outgoingMessage.writableObjectMode </span> </a> </li> <li class=md-nav__item> <a href=#outgoingmessagewrite class=md-nav__link> <span class=md-ellipsis> outgoingMessage.write </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#httpmethods class=md-nav__link> <span class=md-ellipsis> http.METHODS </span> </a> </li> <li class=md-nav__item> <a href=#httpstatus_codes class=md-nav__link> <span class=md-ellipsis> http.STATUS_CODES </span> </a> </li> <li class=md-nav__item> <a href=#httpcreateserver class=md-nav__link> <span class=md-ellipsis> http.createServer </span> </a> </li> <li class=md-nav__item> <a href=#httpget class=md-nav__link> <span class=md-ellipsis> http.get </span> </a> </li> <li class=md-nav__item> <a href=#httpglobalagent class=md-nav__link> <span class=md-ellipsis> http.globalAgent </span> </a> </li> <li class=md-nav__item> <a href=#httpmaxheadersize class=md-nav__link> <span class=md-ellipsis> http.maxHeaderSize </span> </a> </li> <li class=md-nav__item> <a href=#httprequest class=md-nav__link> <span class=md-ellipsis> http.request </span> </a> </li> <li class=md-nav__item> <a href=#httprequest_1 class=md-nav__link> <span class=md-ellipsis> http.request </span> </a> </li> <li class=md-nav__item> <a href=#httpvalidateheadername class=md-nav__link> <span class=md-ellipsis> http.validateHeaderName </span> </a> </li> <li class=md-nav__item> <a href=#httpvalidateheadervalue class=md-nav__link> <span class=md-ellipsis> http.validateHeaderValue </span> </a> </li> <li class=md-nav__item> <a href=#httpsetmaxidlehttpparsers class=md-nav__link> <span class=md-ellipsis> http.setMaxIdleHTTPParsers </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/xsltdev/nodejsdev.ru/edit/master/docs/api/http.md title="Редактировать страницу" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <h1 id=http>HTTP<a class=headerlink href=#http title="Permanent link">&para;</a></h1> <p><a href=https://nodejs.org/docs/latest-v18.x/api/http.html><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7.75 6.5a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5"/><path d="M2.5 1h8.44a1.5 1.5 0 0 1 1.06.44l10.25 10.25a1.5 1.5 0 0 1 0 2.12l-8.44 8.44a1.5 1.5 0 0 1-2.12 0L1.44 12A1.5 1.5 0 0 1 1 10.94V2.5A1.5 1.5 0 0 1 2.5 1m0 1.5v8.44l10.25 10.25 8.44-8.44L10.94 2.5Z"/></svg></span> v18.x.x</a></p> <div class="admonition success"> <p class=admonition-title>Стабильность: 2 – Стабильная</p> <p>АПИ является удовлетворительным. Совместимость с NPM имеет высший приоритет и не будет нарушена кроме случаев явной необходимости.</p> </div> <p>Для использования HTTP-сервера и клиента необходимо <code>require('node:http')</code>.</p> <p>Интерфейсы HTTP в Node.js разработаны для поддержки многих особенностей протокола, которые традиционно были сложны в использовании. В частности, большие, возможно, закодированные в виде кусков, сообщения. Интерфейс тщательно следит за тем, чтобы никогда не буферизировать целые запросы или ответы, поэтому пользователь может передавать данные в потоковом режиме.</p> <p>Заголовки HTTP-сообщений представлены объектом следующим образом:</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span></pre></div></td><td class=code><div><pre><span></span><code><span class=p>{</span>
<span class=w>    </span><span class=s1>&#39;content-length&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;123&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;content-type&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;text/plain&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;connection&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;keep-alive&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;host&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;example.com&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;accept&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;*/*&#39;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>Ключи приводятся в нижнем регистре. Значения не изменяются.</p> <p>Для того чтобы поддерживать весь спектр возможных HTTP-приложений, HTTP API Node.js является очень низкоуровневым. Он занимается только обработкой потоков и разбором сообщений. Он разбирает сообщение на заголовки и тело, но не разбирает собственно заголовки или тело.</p> <p>Смотрите <a href=#messageheaders><code>message.headers</code></a> для подробностей о том, как обрабатываются дублирующиеся заголовки.</p> <p>Необработанные заголовки в том виде, в котором они были получены, сохраняются в свойстве <code>rawHeaders</code>, которое представляет собой массив <code>[key, value, key2, value2, ...]</code>. Например, объект заголовка предыдущего сообщения может иметь следующий список <code>rawHeaders</code>:</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span></pre></div></td><td class=code><div><pre><span></span><code><span class=p>[</span>
<span class=w>    </span><span class=s1>&#39;ConTent-Length&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;123456&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;content-LENGTH&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;123&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;content-type&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;text/plain&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;CONNECTION&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;keep-alive&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;Host&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;example.com&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;accepT&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;*/*&#39;</span><span class=p>,</span>
<span class=p>];</span>
</code></pre></div></td></tr></table></div> <h2 id=httpagent>Класс http.Agent<a class=headerlink href=#httpagent title="Permanent link">&para;</a></h2> <p>Агент отвечает за управление сохранением и повторным использованием соединений для HTTP-клиентов. Он поддерживает очередь ожидающих запросов для данного хоста и порта, повторно используя одно сокетное соединение для каждого до тех пор, пока очередь не опустеет, после чего сокет либо уничтожается, либо помещается в пул, где он хранится для повторного использования для запросов к тому же хосту и порту. Будет ли он уничтожен или помещен в пул, зависит от <code>keepAlive</code> <a href=#new-agent>опция</a>.</p> <p>Для пула соединений включена функция TCP Keep-Alive, но серверы могут закрывать простаивающие соединения, в этом случае они будут удалены из пула, а новое соединение будет создано при новом HTTP-запросе на этот хост и порт. Серверы также могут отказаться разрешать несколько запросов через одно и то же соединение, в этом случае соединение будет создаваться заново для каждого запроса и не может быть объединено в пул. Агент будет по-прежнему выполнять запросы к этому серверу, но каждый запрос будет выполняться через новое соединение.</p> <p>Когда соединение закрывается клиентом или сервером, оно удаляется из пула. Любые неиспользуемые сокеты в пуле будут удалены, чтобы не заставлять процесс Node.js работать, когда нет незавершенных запросов. (см. <a href=../net/#socketunref><code>socket.unref()</code></a>).</p> <p>Хорошей практикой является <a href=#agentdestroy><code>destroy()</code></a> экземпляра <code>Agent</code>, когда он больше не используется, поскольку неиспользуемые сокеты потребляют ресурсы ОС.</p> <p>Сокеты удаляются из агента, когда сокет испускает либо событие <code>'close'</code>, либо событие <code>'agentRemove'</code>. Если вы хотите держать один HTTP-запрос открытым в течение длительного времени, не сохраняя его в агенте, можно поступить следующим образом:</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>options</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Делаем что-нибудь</span>
<span class=p>}).</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;socket&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>socket</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>socket</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;agentRemove&#39;</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div></td></tr></table></div> <p>Агент также может быть использован для отдельного запроса. Если указать <code>{agent: false}</code> в качестве опции для функций <code>http.get()</code> или <code>http.request()</code>, то для клиентского соединения будет использоваться одноразовый <code>Agent</code> с параметрами по умолчанию.</p> <p><code>agent:false</code>:</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>        </span><span class=nx>hostname</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>port</span><span class=o>:</span><span class=w> </span><span class=mf>80</span><span class=p>,</span>
<span class=w>        </span><span class=nx>path</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;/&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>agent</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span><span class=w> </span><span class=c1>// Создаем нового агента только для этого запроса</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=p>(</span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=c1>// Делаем что-нибудь с ответом</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>);</span>
</code></pre></div></td></tr></table></div> <h3 id=new-agent>new Agent<a class=headerlink href=#new-agent title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=ow>new</span><span class=w> </span><span class=nx>Agent</span><span class=p>([</span><span class=nx>options</span><span class=p>]);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>options</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a> Набор конфигурируемых опций для установки на агента. Может иметь следующие поля:<ul> <li><code>keepAlive</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a> Сохранять сокеты даже при отсутствии невыполненных запросов, чтобы их можно было использовать для будущих запросов без необходимости восстанавливать TCP-соединение. Не путать со значением <code>keep-alive</code> заголовка <code>Connection</code>. Заголовок <code>Connection: keep-alive</code> всегда отправляется при использовании агента, за исключением случаев, когда заголовок <code>Connection</code> указан явно или когда опции <code>keepAlive</code> и <code>maxSockets</code> соответственно установлены в <code>false</code> и <code>Infinity</code>, в этом случае будет использоваться <code>Connection: close</code>. <strong>По умолчанию:</strong> <code>false</code>.</li> <li><code>keepAliveMsecs</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> При использовании опции <code>keepAlive</code> указывает <a href=../net/#socketsetkeepaliveenable-initialdelay>начальную задержку</a> для пакетов TCP Keep-Alive. Игнорируется, если опция <code>keepAlive</code> имеет значение <code>false</code> или <code>undefined</code>. <strong>По умолчанию:</strong> <code>1000</code>.</li> <li><code>maxSockets</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> Максимальное количество сокетов, разрешенное для одного хоста. Если один и тот же хост открывает несколько одновременных соединений, каждый запрос будет использовать новый сокет, пока не будет достигнуто значение <code>maxSockets</code>. Если хост пытается открыть больше соединений, чем <code>maxSockets</code>, дополнительные запросы попадают в очередь ожидающих запросов и переходят в состояние активного соединения, когда существующее соединение завершается. Это гарантирует, что в любой момент времени с данного хоста будет не более <code>maxSockets</code> активных соединений. <strong>По умолчанию:</strong> <code>бесконечность</code>.</li> <li><code>maxTotalSockets</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> Максимальное количество сокетов, разрешенное для всех хостов в целом. Каждый запрос будет использовать новый сокет, пока не будет достигнуто максимальное значение. <strong>По умолчанию:</strong> <code>Infinity</code>.</li> <li><code>maxFreeSockets</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> Максимальное количество сокетов на хосте, которое можно оставить открытым в свободном состоянии. Имеет значение, только если <code>keepAlive</code> установлено в <code>true</code>. <strong>По умолчанию:</strong> <code>256</code>.</li> <li><code>scheduling</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> Стратегия планирования, которую следует применять при выборе следующего свободного сокета для использования. Это может быть <code>'fifo'</code> или <code>'lifo'</code>. Основное различие между этими двумя стратегиями планирования заключается в том, что <code>'lifo'</code> выбирает последний использованный сокет, а <code>'fifo'</code> выбирает наименее использованный сокет. В случае низкой скорости запросов в секунду, планирование <code>'lifo'</code> снижает риск выбора сокета, который мог быть закрыт сервером из-за неактивности. В случае высокой скорости запросов в секунду, планирование <code>'fifo'</code> будет максимизировать количество открытых сокетов, в то время как планирование <code>'lifo'</code> будет поддерживать его на минимально возможном уровне. <strong>По умолчанию:</strong> <code>'lifo'</code>.</li> <li><code>timeout</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> Таймаут сокета в миллисекундах. Таймаут устанавливается при создании сокета.</li> </ul> </li> </ul> <p>Также поддерживаются <code>опции</code> в <a href=../net/#socketconnectoptions-connectlistener><code>socket.connect()</code></a>.</p> <p>В стандартном <a href=#httpglobalagent><code>http.globalAgent</code></a>, который используется <a href=#httprequestoptions-callback><code>http.request()</code></a>, все эти значения установлены по умолчанию.</p> <p>Для настройки любого из них необходимо создать пользовательский экземпляр <code>http.Agent</code>.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>http</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;node:http&#39;</span><span class=p>);</span>
<span class=kd>const</span><span class=w> </span><span class=nx>keepAliveAgent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>Agent</span><span class=p>({</span><span class=w> </span><span class=nx>keepAlive</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=p>});</span>
<span class=nx>options</span><span class=p>.</span><span class=nx>agent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>keepAliveAgent</span><span class=p>;</span>
<span class=nx>http</span><span class=p>.</span><span class=nx>request</span><span class=p>(</span><span class=nx>options</span><span class=p>,</span><span class=w> </span><span class=nx>onResponseCallback</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <h3 id=agentcreateconnection>agent.createConnection<a class=headerlink href=#agentcreateconnection title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>agent</span><span class=p>.</span><span class=nx>createConnection</span><span class=p>(</span><span class=nx>options</span><span class=p>[,</span><span class=w> </span><span class=nx>callback</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>options</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a> Опции, содержащие детали соединения. Формат опций смотрите в <a href=../net/#netcreateconnectionoptions-connectlistener><code>net.createConnection()</code></a></li> <li><code>callback</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function><code>&lt;Function&gt;</code></a> Функция обратного вызова, которая получает созданный сокет</li> <li>Возвращает: {stream.Duplex}</li> </ul> <p>Создает сокет/поток, который будет использоваться для HTTP-запросов.</p> <p>По умолчанию эта функция аналогична <a href=../net/#netcreateconnectionoptions-connectlistener><code>net.createConnection()</code></a>. Однако пользовательские агенты могут переопределить этот метод, если требуется большая гибкость.</p> <p>Сокет/поток может быть предоставлен одним из двух способов: путем возврата сокета/потока из этой функции или путем передачи сокета/потока в <code>callback</code>.</p> <p>Этот метод гарантированно возвращает экземпляр класса <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>, подкласса {stream.Duplex}, если пользователь не укажет тип сокета, отличный от <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>.</p> <p><code>callback</code> имеет сигнатуру <code>(err, stream)</code>.</p> <h3 id=agentkeepsocketalive>agent.keepSocketAlive<a class=headerlink href=#agentkeepsocketalive title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>agent</span><span class=p>.</span><span class=nx>keepSocketAlive</span><span class=p>(</span><span class=nx>socket</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>socket</code> {stream.Duplex}</li> </ul> <p>Вызывается, когда <code>socket</code> отделяется от запроса и может быть сохранен <code>агентом</code>. Поведение по умолчанию:</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>socket</span><span class=p>.</span><span class=nx>setKeepAlive</span><span class=p>(</span><span class=kc>true</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=nx>keepAliveMsecs</span><span class=p>);</span>
<span class=nx>socket</span><span class=p>.</span><span class=nx>unref</span><span class=p>();</span>
<span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span>
</code></pre></div></td></tr></table></div> <p>Этот метод может быть переопределен конкретным подклассом <code>Agent</code>. Если этот метод возвращает ложное значение, то сокет будет уничтожен, а не сохранен для использования при следующем запросе.</p> <p>Аргумент <code>socket</code> может быть экземпляром <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>, подкласса {stream.Duplex}.</p> <h3 id=agentreusesocket>agent.reuseSocket<a class=headerlink href=#agentreusesocket title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>agent</span><span class=p>.</span><span class=nx>reuseSocket</span><span class=p>(</span><span class=nx>socket</span><span class=p>,</span><span class=w> </span><span class=nx>request</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>socket</code> {stream.Duplex}</li> <li><code>request</code> {http.ClientRequest}</li> </ul> <p>Вызывается, когда <code>socket</code> присоединяется к <code>request</code> после того, как он был сохранен из-за опций keep-alive. Поведение по умолчанию таково:</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>socket</span><span class=p>.</span><span class=nx>ref</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>Этот метод может быть переопределен конкретным подклассом <code>Agent</code>.</p> <p>Аргумент <code>socket</code> может быть экземпляром <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>, подкласса {stream.Duplex}.</p> <h3 id=agentdestroy>agent.destroy<a class=headerlink href=#agentdestroy title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>agent</span><span class=p>.</span><span class=nx>destroy</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>Уничтожьте все сокеты, которые в настоящее время используются агентом.</p> <p>Обычно в этом нет необходимости. Однако если используется агент с включенной опцией <code>keepAlive</code>, то лучше всего явно завершить работу агента, когда он больше не нужен. В противном случае сокеты могут оставаться открытыми довольно долгое время, прежде чем сервер их завершит.</p> <h3 id=agentfreesockets>agent.freeSockets<a class=headerlink href=#agentfreesockets title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a></li> </ul> <p>Объект, который содержит массивы сокетов, ожидающих использования агентом, когда включено <code>keepAlive</code>. Не модифицируйте.</p> <p>Сокеты в списке <code>freeSockets</code> будут автоматически уничтожены и удалены из массива по <code>таймауту</code>.</p> <h3 id=agentgetname>agent.getName<a class=headerlink href=#agentgetname title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>agent</span><span class=p>.</span><span class=nx>getName</span><span class=p>([</span><span class=nx>options</span><span class=p>]);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>options</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a> Набор опций, предоставляющих информацию для генерации имени<ul> <li><code>host</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> Доменное имя или IP-адрес сервера, на который будет отправлен запрос</li> <li><code>port</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> Порт удаленного сервера</li> <li><code>localAddress</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> Локальный интерфейс для привязки сетевых соединений при выдаче запроса</li> <li><code>family</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;integer&gt;</code></a> Должно быть 4 или 6, если это не равно <code>undefined</code>.</li> </ul> </li> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> </ul> <p>Получает уникальное имя для набора опций запроса, чтобы определить, может ли соединение быть использовано повторно. Для HTTP-агента это возвращает <code>host:port:localAddress</code> или <code>host:port:localAddress:family</code>. Для HTTPS-агента имя включает CA, cert, шифры и другие специфические для HTTPS/TLS опции, определяющие возможность повторного использования сокета.</p> <h3 id=agentmaxfreesockets>agent.maxFreeSockets<a class=headerlink href=#agentmaxfreesockets title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a></li> </ul> <p>По умолчанию установлено значение 256. Для агентов с включенной опцией <code>keepAlive</code> задается максимальное количество сокетов, которые будут оставлены открытыми в свободном состоянии.</p> <h3 id=agentmaxsockets>agent.maxSockets<a class=headerlink href=#agentmaxsockets title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a></li> </ul> <p>По умолчанию установлено на <code>бесконечность</code>. Определяет, сколько одновременных сокетов может быть открыто агентом для каждого origin. Origin - это возвращаемое значение <a href=#agentgetname><code>agent.getName()</code></a>.</p> <h3 id=agentmaxtotalsockets>agent.maxTotalSockets<a class=headerlink href=#agentmaxtotalsockets title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a></li> </ul> <p>По умолчанию имеет значение <code>бесконечность</code>. Определяет, сколько одновременных сокетов может быть открыто у агента. В отличие от <code>maxSockets</code>, этот параметр применяется ко всем источникам.</p> <h3 id=agentrequests>agent.requests<a class=headerlink href=#agentrequests title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a></li> </ul> <p>Объект, содержащий очереди запросов, которые еще не были назначены на сокеты. Не модифицируйте.</p> <h3 id=agentsockets>agent.sockets<a class=headerlink href=#agentsockets title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a></li> </ul> <p>Объект, содержащий массивы сокетов, используемых агентом в данный момент. Не модифицировать.</p> <h2 id=httpclientrequest>Класс http.ClientRequest<a class=headerlink href=#httpclientrequest title="Permanent link">&para;</a></h2> <ul> <li>Расширяет: {http.OutgoingMessage}</li> </ul> <p>Этот объект создается внутри и возвращается из <a href=#httprequest><code>http.request()</code></a>. Он представляет <em>проходящий</em> запрос, заголовок которого уже поставлен в очередь. Заголовок все еще можно изменить с помощью API <a href=#requestsetheader><code>setHeader(name, value)</code></a>, <a href=#requestgetheader><code>getHeader(name)</code></a>, <a href=#requestremoveheader><code>removeHeader(name)</code></a>. Фактический заголовок будет отправлен вместе с первым куском данных или при вызове <a href=#requestend><code>request.end()</code></a>.</p> <p>Чтобы получить ответ, добавьте к объекту запроса слушатель для <a href=#response><code>'response'</code></a>. <a href=#response><code>'response'</code></a> будет испущен из объекта запроса, когда будут получены заголовки ответа. Событие <a href=#response><code>'response'</code></a> выполняется с одним аргументом, который является экземпляром <a href=#httpincomingmessage><code>http.IncomingMessage</code></a>.</p> <p>Во время события <a href=#response><code>response</code></a> можно добавить слушателей к объекту ответа, в частности, для прослушивания события <code>данные</code>.</p> <p>Если обработчик <a href=#event-response><code>response</code></a> не добавлен, то ответ будет полностью отброшен. Однако если обработчик события <a href=#event-response><code>'response'</code></a> добавлен, то данные из объекта ответа <strong>должны</strong> быть потреблены, либо вызовом <code>response.read()</code> при каждом событии <code>'readable'</code>, либо добавлением обработчика <code>'data'</code>, либо вызовом метода <code>.resume()</code>. Пока данные не будут прочитаны, событие <code>'end'</code> не произойдет. Кроме того, пока данные не будут считаны, будет расходоваться память, что в конечном итоге может привести к ошибке "процесс вышел из памяти".</p> <p>Для обратной совместимости, <code>res</code> будет выдавать <code>'error'</code> только если зарегистрирован слушатель <code>'error'</code>.</p> <p>Установите заголовок <code>Content-Length</code>, чтобы ограничить размер тела ответа. Если <a href=#responsestrictcontentlength><code>response.strictContentLength</code></a> установлен в <code>true</code>, несоответствие значения заголовка <code>Content-Length</code> приведет к возникновению <code>ошибки</code>, определяемой <code>code:</code> <a href=../errors/#err_http_content_length_mismatch><code>'ERR_HTTP_CONTENT_LENGTH_MISMATCH</code></a>.</p> <p>Значение <code>Content-Length</code> должно быть в байтах, а не в символах. Используйте <a href=../buffer/#static-method-bufferbytelengthstring-encoding><code>Buffer.byteLength()</code></a> для определения длины тела в байтах.</p> <h3 id=abort>Событие abort<a class=headerlink href=#abort title="Permanent link">&para;</a></h3> <div class="admonition danger"> <p class=admonition-title>Стабильность: 0 – устарело или набрало много негативных отзывов</p> <p>Эта фича является проблемной и ее планируют изменить. Не стоит полагаться на нее. Использование фичи может вызвать ошибки. Не стоит ожидать от нее обратной совместимости.</p> <p>Вместо этого слушайте событие <code>'close'</code>.</p> </div> <p>Выдается, когда запрос был прерван клиентом. Это событие происходит только при первом вызове <code>abort()</code>.</p> <h3 id=close>Событие close<a class=headerlink href=#close title="Permanent link">&para;</a></h3> <p>Указывает, что запрос завершен, или его базовое соединение было прервано преждевременно (до завершения ответа).</p> <h3 id=connect>Событие connect<a class=headerlink href=#connect title="Permanent link">&para;</a></h3> <ul> <li><code>ответ</code> {http.IncomingMessage}</li> <li><code>сокет</code> {stream.Duplex}</li> <li><code>head</code> <a href=../buffer/#buffer><code>&lt;Buffer&gt;</code></a></li> </ul> <p>Выдается каждый раз, когда сервер отвечает на запрос методом <code>CONNECT</code>. Если это событие не прослушивается, клиенты, получающие метод <code>CONNECT</code>, закрывают свои соединения.</p> <p>Это событие гарантированно передается экземпляру класса <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>, подкласса {stream.Duplex}, если только пользователь не укажет тип сокета, отличный от <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>.</p> <p>Пара клиент-сервер демонстрирует, как слушать событие <code>'connect'</code>:</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>http</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;node:http&#39;</span><span class=p>);</span>
<span class=kd>const</span><span class=w> </span><span class=nx>net</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;node:net&#39;</span><span class=p>);</span>
<span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>URL</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;node:url&#39;</span><span class=p>);</span>

<span class=c1>// Create an HTTP tunneling proxy</span>
<span class=kd>const</span><span class=w> </span><span class=nx>proxy</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>createServer</span><span class=p>((</span><span class=nx>req</span><span class=p>,</span><span class=w> </span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>writeHead</span><span class=p>(</span><span class=mf>200</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;text/plain&#39;</span><span class=w> </span><span class=p>});</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>end</span><span class=p>(</span><span class=s1>&#39;okay&#39;</span><span class=p>);</span>
<span class=p>});</span>
<span class=nx>proxy</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;connect&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>req</span><span class=p>,</span><span class=w> </span><span class=nx>clientSocket</span><span class=p>,</span><span class=w> </span><span class=nx>head</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Connect to an origin server</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>port</span><span class=p>,</span><span class=w> </span><span class=nx>hostname</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>URL</span><span class=p>(</span><span class=sb>`http://</span><span class=si>${</span><span class=nx>req</span><span class=p>.</span><span class=nx>url</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>serverSocket</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>net</span><span class=p>.</span><span class=nx>connect</span><span class=p>(</span>
<span class=w>        </span><span class=nx>port</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=mf>80</span><span class=p>,</span>
<span class=w>        </span><span class=nx>hostname</span><span class=p>,</span>
<span class=w>        </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nx>clientSocket</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span>
<span class=w>                </span><span class=s1>&#39;HTTP/1.1 200 Connection Established\r\n&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>                    </span><span class=s1>&#39;Proxy-agent: Node.js-Proxy\r\n&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>                    </span><span class=s1>&#39;\r\n&#39;</span>
<span class=w>            </span><span class=p>);</span>
<span class=w>            </span><span class=nx>serverSocket</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=nx>head</span><span class=p>);</span>
<span class=w>            </span><span class=nx>serverSocket</span><span class=p>.</span><span class=nx>pipe</span><span class=p>(</span><span class=nx>clientSocket</span><span class=p>);</span>
<span class=w>            </span><span class=nx>clientSocket</span><span class=p>.</span><span class=nx>pipe</span><span class=p>(</span><span class=nx>serverSocket</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>});</span>

<span class=c1>// Now that proxy is running</span>
<span class=nx>proxy</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mf>1337</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;127.0.0.1&#39;</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Make a request to a tunneling proxy</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>options</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>port</span><span class=o>:</span><span class=w> </span><span class=mf>1337</span><span class=p>,</span>
<span class=w>        </span><span class=nx>host</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;127.0.0.1&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>method</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;CONNECT&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>path</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;www.google.com:80&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=p>};</span>

<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>req</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>request</span><span class=p>(</span><span class=nx>options</span><span class=p>);</span>
<span class=w>    </span><span class=nx>req</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span>

<span class=w>    </span><span class=nx>req</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;connect&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>res</span><span class=p>,</span><span class=w> </span><span class=nx>socket</span><span class=p>,</span><span class=w> </span><span class=nx>head</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;got connected!&#39;</span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Make a request over an HTTP tunnel</span>
<span class=w>        </span><span class=nx>socket</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span>
<span class=w>            </span><span class=s1>&#39;GET / HTTP/1.1\r\n&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>                </span><span class=s1>&#39;Host: www.google.com:80\r\n&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>                </span><span class=s1>&#39;Connection: close\r\n&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>                </span><span class=s1>&#39;\r\n&#39;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;data&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>chunk</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>chunk</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>        </span><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;end&#39;</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nx>proxy</span><span class=p>.</span><span class=nx>close</span><span class=p>();</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>});</span>
<span class=p>});</span>
</code></pre></div></td></tr></table></div> <h3 id=continue>Событие continue<a class=headerlink href=#continue title="Permanent link">&para;</a></h3> <p>Выдается, когда сервер посылает HTTP-ответ '100 Continue', обычно потому, что запрос содержит 'Expect: 100-continue'. Это указание, что клиент должен отправить тело запроса.</p> <h3 id=finish>Событие finish<a class=headerlink href=#finish title="Permanent link">&para;</a></h3> <p>Вызывается, когда запрос отправлен. Точнее, это событие возникает, когда последний сегмент заголовков и тела ответа был передан операционной системе для передачи по сети. Это не означает, что сервер уже что-то получил.</p> <h3 id=information>Событие information<a class=headerlink href=#information title="Permanent link">&para;</a></h3> <ul> <li><code>info</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a><ul> <li><code>httpVersion</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> <li><code>httpVersionMajor</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;integer&gt;</code></a></li> <li><code>httpVersionMinor</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;integer&gt;</code></a></li> <li><code>statusCode</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;integer&gt;</code></a></li> <li><code>statusMessage</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> <li><code>headers</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a></li> <li><code>rawHeaders</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string[]&gt;</code></a></li> </ul> </li> </ul> <p>Выдается, когда сервер посылает промежуточный ответ 1xx (исключая 101 Upgrade). Слушатели этого события получат объект, содержащий версию HTTP, код статуса, сообщение о статусе, объект заголовков с ключевыми значениями и массив с именами необработанных заголовков, за которыми следуют их соответствующие значения.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>http</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;node:http&#39;</span><span class=p>);</span>

<span class=kd>const</span><span class=w> </span><span class=nx>options</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>host</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;127.0.0.1&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=nx>port</span><span class=o>:</span><span class=w> </span><span class=mf>8080</span><span class=p>,</span>
<span class=w>    </span><span class=nx>path</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;/length_request&#39;</span><span class=p>,</span>
<span class=p>};</span>

<span class=c1>// Make a request</span>
<span class=kd>const</span><span class=w> </span><span class=nx>req</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>request</span><span class=p>(</span><span class=nx>options</span><span class=p>);</span>
<span class=nx>req</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span>

<span class=nx>req</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;information&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>info</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=sb>`Got information prior to main response: </span><span class=si>${</span><span class=nx>info</span><span class=p>.</span><span class=nx>statusCode</span><span class=si>}</span><span class=sb>`</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div></td></tr></table></div> <p>Статусы 101 Upgrade не вызывают этого события из-за отхода от традиционной цепочки HTTP-запросов/ответов, таких как веб-сокеты, обновления TLS на месте или HTTP 2.0. Чтобы получать уведомления о 101 обновлении, вместо этого слушайте событие <a href=#upgrade><code>'upgrade'</code></a>.</p> <h3 id=response>Событие response<a class=headerlink href=#response title="Permanent link">&para;</a></h3> <ul> <li><code>response</code> {http.IncomingMessage}</li> </ul> <p>Испускается, когда получен ответ на данный запрос. Это событие испускается только один раз.</p> <h3 id=socket>Событие socket<a class=headerlink href=#socket title="Permanent link">&para;</a></h3> <ul> <li><code>socket</code> {stream.Duplex}</li> </ul> <p>Это событие гарантированно передается экземпляру класса <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>, подкласса {stream.Duplex}, если пользователь не укажет тип сокета, отличный от <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>.</p> <h3 id=timeout>Событие timeout<a class=headerlink href=#timeout title="Permanent link">&para;</a></h3> <p>Выдается, когда базовый сокет завершает работу от бездействия. Это только уведомляет о том, что сокет бездействовал. Запрос должен быть уничтожен вручную.</p> <p>См. также: <a href=#requestsettimeouttimeout-callback><code>request.setTimeout()</code></a>.</p> <h3 id=upgrade>Событие upgrade<a class=headerlink href=#upgrade title="Permanent link">&para;</a></h3> <ul> <li><code>ответ</code> {http.IncomingMessage}</li> <li><code>сокет</code> {stream.Duplex}</li> <li><code>head</code> <a href=../buffer/#buffer><code>&lt;Buffer&gt;</code></a></li> </ul> <p>Выдается каждый раз, когда сервер отвечает на запрос с обновлением. Если это событие не прослушивается и код состояния ответа равен 101 Switching Protocols, клиенты, получившие заголовок обновления, закрывают свои соединения.</p> <p>Это событие гарантированно передается экземпляру класса <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>, подкласса {stream.Duplex}, если только пользователь не укажет тип сокета, отличный от <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>.</p> <p>Пара клиент-сервер демонстрирует, как прослушивать событие <code>update</code>.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>http</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;node:http&#39;</span><span class=p>);</span>

<span class=c1>// Create an HTTP server</span>
<span class=kd>const</span><span class=w> </span><span class=nx>server</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>createServer</span><span class=p>((</span><span class=nx>req</span><span class=p>,</span><span class=w> </span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>writeHead</span><span class=p>(</span><span class=mf>200</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;text/plain&#39;</span><span class=w> </span><span class=p>});</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>end</span><span class=p>(</span><span class=s1>&#39;okay&#39;</span><span class=p>);</span>
<span class=p>});</span>
<span class=nx>server</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;upgrade&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>req</span><span class=p>,</span><span class=w> </span><span class=nx>socket</span><span class=p>,</span><span class=w> </span><span class=nx>head</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>socket</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;HTTP/1.1 101 Web Socket Protocol Handshake\r\n&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>            </span><span class=s1>&#39;Upgrade: WebSocket\r\n&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>            </span><span class=s1>&#39;Connection: Upgrade\r\n&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>            </span><span class=s1>&#39;\r\n&#39;</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>socket</span><span class=p>.</span><span class=nx>pipe</span><span class=p>(</span><span class=nx>socket</span><span class=p>);</span><span class=w> </span><span class=c1>// echo back</span>
<span class=p>});</span>

<span class=c1>// Now that server is running</span>
<span class=nx>server</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mf>1337</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;127.0.0.1&#39;</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// make a request</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>options</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>port</span><span class=o>:</span><span class=w> </span><span class=mf>1337</span><span class=p>,</span>
<span class=w>        </span><span class=nx>host</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;127.0.0.1&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>headers</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nx>Connection</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;Upgrade&#39;</span><span class=p>,</span>
<span class=w>            </span><span class=nx>Upgrade</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;websocket&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>},</span>
<span class=w>    </span><span class=p>};</span>

<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>req</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>request</span><span class=p>(</span><span class=nx>options</span><span class=p>);</span>
<span class=w>    </span><span class=nx>req</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span>

<span class=w>    </span><span class=nx>req</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;upgrade&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>res</span><span class=p>,</span><span class=w> </span><span class=nx>socket</span><span class=p>,</span><span class=w> </span><span class=nx>upgradeHead</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;got upgraded!&#39;</span><span class=p>);</span>
<span class=w>        </span><span class=nx>socket</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span>
<span class=w>        </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>    </span><span class=p>});</span>
<span class=p>});</span>
</code></pre></div></td></tr></table></div> <h3 id=requestabort>request.abort<a class=headerlink href=#requestabort title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>abort</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <div class="admonition danger"> <p class=admonition-title>Стабильность: 0 – устарело или набрало много негативных отзывов</p> <p>Эта фича является проблемной и ее планируют изменить. Не стоит полагаться на нее. Использование фичи может вызвать ошибки. Не стоит ожидать от нее обратной совместимости.</p> <p>Вместо этого используйте <a href=#requestdestroyerror><code>request.destroy()</code></a>.</p> </div> <p>Помечает запрос как прерванный. Вызов этой функции приведет к тому, что оставшиеся данные в ответе будут удалены, а сокет будет уничтожен.</p> <h3 id=requestaborted>request.aborted<a class=headerlink href=#requestaborted title="Permanent link">&para;</a></h3> <div class="admonition danger"> <p class=admonition-title>Стабильность: 0 – устарело или набрало много негативных отзывов</p> <p>Эта фича является проблемной и ее планируют изменить. Не стоит полагаться на нее. Использование фичи может вызвать ошибки. Не стоит ожидать от нее обратной совместимости.</p> <p>Вместо этого проверьте <a href=#requestdestroyed><code>request.destroyed</code></a>.</p> </div> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Свойство <code>request.aborted</code> будет <code>true</code>, если запрос был прерван.</p> <h3 id=requestconnection>request.connection<a class=headerlink href=#requestconnection title="Permanent link">&para;</a></h3> <div class="admonition danger"> <p class=admonition-title>Стабильность: 0 – устарело или набрало много негативных отзывов</p> <p>Эта фича является проблемной и ее планируют изменить. Не стоит полагаться на нее. Использование фичи может вызвать ошибки. Не стоит ожидать от нее обратной совместимости.</p> <p>Используйте <a href=#requestsocket><code>request.socket</code></a>.</p> </div> <ul> <li>{stream.Duplex}</li> </ul> <p>См. <a href=#requestsocket><code>request.socket</code></a>.</p> <h3 id=requestcork>request.cork<a class=headerlink href=#requestcork title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>cork</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>См. <a href=../stream/#writablecork><code>writable.cork()</code></a>.</p> <h3 id=requestend>request.end<a class=headerlink href=#requestend title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>end</span><span class=p>([</span><span class=nx>data</span><span class=p>[,</span><span class=w> </span><span class=nx>encoding</span><span class=p>]][,</span><span class=w> </span><span class=nx>callback</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>данные</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> | <a href=../buffer/#buffer><code>&lt;Buffer&gt;</code></a> | <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array><code>&lt;Uint8Array&gt;</code></a></li> <li><code>encoding</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> <li><code>callback</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function><code>&lt;Function&gt;</code></a></li> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/this><code>&lt;this&gt;</code></a></li> </ul> <p>Завершает отправку запроса. Если какие-либо части тела остались неотправленными, он спустит их в поток. Если запрос чанкирован, то будет отправлено завершающее <code>'0\r\n\r\n'</code>.</p> <p>Если указано <code>data</code>, это эквивалентно вызову <a href=#requestwritechunk-encoding-callback><code>request.write(data, encoding)</code></a>, за которым следует <code>request.end(callback)</code>.</p> <p>Если указан <code>callback</code>, он будет вызван, когда поток запросов завершится.</p> <h3 id=requestdestroy>request.destroy<a class=headerlink href=#requestdestroy title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>destroy</span><span class=p>([</span><span class=nx>error</span><span class=p>]);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>error</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error><code>&lt;Error&gt;</code></a> Необязательно, ошибка, которую нужно выдать с событием <code>'error'</code>.</li> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/this><code>&lt;this&gt;</code></a></li> </ul> <p>Уничтожить запрос. Опционально выдает событие <code>'error'</code> и выдает событие <code>'close'</code>. Вызов этой функции приведет к тому, что оставшиеся данные в ответе будут сброшены, а сокет будет уничтожен.</p> <p>Подробности см. в <a href=../stream/#writabledestroyerror><code>writable.destroy()</code></a>.</p> <h4 id=requestdestroyed>request.destroyed<a class=headerlink href=#requestdestroyed title="Permanent link">&para;</a></h4> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Является <code>true</code> после вызова <a href=#requestdestroy><code>request.destroy()</code></a>.</p> <p>Более подробную информацию смотрите в <a href=../stream/#writabledestroyed><code>writable.destroyed</code></a>.</p> <h3 id=requestfinished>request.finished<a class=headerlink href=#requestfinished title="Permanent link">&para;</a></h3> <div class="admonition danger"> <p class=admonition-title>Стабильность: 0 – устарело или набрало много негативных отзывов</p> <p>Эта фича является проблемной и ее планируют изменить. Не стоит полагаться на нее. Использование фичи может вызвать ошибки. Не стоит ожидать от нее обратной совместимости.</p> <p>Используйте <a href=#requestwritableended><code>request.writableEnded</code></a>.</p> </div> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Свойство <code>request.finished</code> будет <code>true</code>, если был вызван <a href=#requestend><code>request.end()</code></a>. Свойство <code>request.end()</code> будет вызвано автоматически, если запрос был инициирован через <a href=#httpgetoptions-callback><code>http.get()</code></a>.</p> <h3 id=requestflushheaders>request.flushHeaders<a class=headerlink href=#requestflushheaders title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>flushHeaders</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>Смывает заголовки запроса.</p> <p>В целях эффективности Node.js обычно буферизирует заголовки запроса до тех пор, пока не будет вызван <code>request.end()</code> или не будет записан первый фрагмент данных запроса. Затем он пытается упаковать заголовки запроса и данные в один TCP-пакет.</p> <p>Обычно это желательно (это экономит время на обход TCP), но не тогда, когда первые данные не будут отправлены, возможно, намного позже. Функция <code>request.flushHeaders()</code> обходит эту оптимизацию и запускает запрос.</p> <h3 id=requestgetheader>request.getHeader<a class=headerlink href=#requestgetheader title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>getHeader</span><span class=p>(</span><span class=nx>name</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>name</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Data_types><code>&lt;any&gt;</code></a></li> </ul> <p>Считывает заголовок запроса. Имя не чувствительно к регистру. Тип возвращаемого значения зависит от аргументов, переданных в <a href=#requestsetheadername-value><code>request.setHeader()</code></a>.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;content-type&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;text/html&#39;</span><span class=p>);</span>
<span class=nx>request</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span>
<span class=w>    </span><span class=s1>&#39;Content-Length&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=nx>Buffer</span><span class=p>.</span><span class=nx>byteLength</span><span class=p>(</span><span class=nx>body</span><span class=p>)</span>
<span class=p>);</span>
<span class=nx>request</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Cookie&#39;</span><span class=p>,</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=s1>&#39;type=ninja&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;language=javascript&#39;</span><span class=p>,</span>
<span class=p>]);</span>
<span class=kd>const</span><span class=w> </span><span class=nx>contentType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>getHeader</span><span class=p>(</span><span class=s1>&#39;Content-Type&#39;</span><span class=p>);</span>
<span class=c1>// &#39;contentType&#39; - &#39;text/html&#39;</span>
<span class=kd>const</span><span class=w> </span><span class=nx>contentLength</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>getHeader</span><span class=p>(</span><span class=s1>&#39;Content-Length&#39;</span><span class=p>);</span>
<span class=c1>// &#39;contentLength&#39; имеет тип число</span>
<span class=kd>const</span><span class=w> </span><span class=nx>cookie</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>getHeader</span><span class=p>(</span><span class=s1>&#39;Cookie&#39;</span><span class=p>);</span>
<span class=c1>// &#39;cookie&#39; имеет тип string[]</span>
</code></pre></div></td></tr></table></div> <h3 id=requestgetheadernames>request.getHeaderNames<a class=headerlink href=#requestgetheadernames title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>getHeaderNames</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <ul> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string[]&gt;</code></a></li> </ul> <p>Возвращает массив, содержащий уникальные имена текущих исходящих заголовков. Все имена заголовков в нижнем регистре.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Foo&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;bar&#39;</span><span class=p>);</span>
<span class=nx>request</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Cookie&#39;</span><span class=p>,</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;foo=bar&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;bar=baz&#39;</span><span class=p>]);</span>

<span class=kd>const</span><span class=w> </span><span class=nx>headerNames</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>getHeaderNames</span><span class=p>();</span>
<span class=c1>// headerNames === [&#39;foo&#39;, &#39;cookie&#39;]</span>
</code></pre></div></td></tr></table></div> <h3 id=requestgetheaders>request.getHeaders<a class=headerlink href=#requestgetheaders title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>getHeaders</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <ul> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a></li> </ul> <p>Возвращает неглубокую копию текущих исходящих заголовков. Поскольку используется неглубокая копия, значения массива могут быть изменены без дополнительных вызовов различных методов модуля http, связанных с заголовками. Ключами возвращаемого объекта являются имена заголовков, а значениями - соответствующие значения заголовков. Все имена заголовков пишутся в нижнем регистре.</p> <p>Объект, возвращаемый методом <code>request.getHeaders()</code>, <em>не</em> прототипически наследует от JavaScript <code>Object</code>. Это означает, что типичные методы <code>Object</code>, такие как <code>obj.toString()</code>, <code>obj.hasOwnProperty()</code> и другие, не определены и <em>не будут работать</em>.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Foo&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;bar&#39;</span><span class=p>);</span>
<span class=nx>request</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Cookie&#39;</span><span class=p>,</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;foo=bar&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;bar=baz&#39;</span><span class=p>]);</span>

<span class=kd>const</span><span class=w> </span><span class=nx>headers</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>getHeaders</span><span class=p>();</span>
<span class=c1>// headers === { foo: &#39;bar&#39;, &#39;cookie&#39;: [&#39;foo=bar&#39;, &#39;bar=baz&#39;] }</span>
</code></pre></div></td></tr></table></div> <h3 id=requestgetrawheadernames>request.getRawHeaderNames<a class=headerlink href=#requestgetrawheadernames title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>getRawHeaderNames</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <ul> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string[]&gt;</code></a></li> </ul> <p>Возвращает массив, содержащий уникальные имена текущих исходящих необработанных заголовков. Имена заголовков возвращаются с установленным точным регистром.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Foo&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;bar&#39;</span><span class=p>);</span>
<span class=nx>request</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Set-Cookie&#39;</span><span class=p>,</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;foo=bar&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;bar=baz&#39;</span><span class=p>]);</span>

<span class=kd>const</span><span class=w> </span><span class=nx>headerNames</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>getRawHeaderNames</span><span class=p>();</span>
<span class=c1>// headerNames === [&#39;Foo&#39;, &#39;Set-Cookie&#39;]</span>
</code></pre></div></td></tr></table></div> <h3 id=requesthasheader>request.hasHeader<a class=headerlink href=#requesthasheader title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>hasHeader</span><span class=p>(</span><span class=nx>name</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>name</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Возвращает <code>true</code>, если заголовок, обозначенный <code>name</code>, в настоящее время установлен в исходящих заголовках. Соответствие имени заголовка не чувствительно к регистру.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>hasContentType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>hasHeader</span><span class=p>(</span><span class=s1>&#39;content-type&#39;</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <h3 id=requestmaxheaderscount>request.maxHeadersCount<a class=headerlink href=#requestmaxheaderscount title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> <strong>По умолчанию:</strong> <code>2000</code>.</li> </ul> <p>Ограничивает максимальное количество заголовков ответа. Если установлено значение 0, ограничение не будет применяться.</p> <h3 id=requestpath>request.path<a class=headerlink href=#requestpath title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> Путь запроса.</li> </ul> <h3 id=requestmethod>request.method<a class=headerlink href=#requestmethod title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> Метод запроса.</li> </ul> <h3 id=requesthost>request.host<a class=headerlink href=#requesthost title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> Хост запроса.</li> </ul> <h3 id=requestprotocol>request.protocol<a class=headerlink href=#requestprotocol title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> Протокол запроса.</li> </ul> <h3 id=requestremoveheader>request.removeHeader<a class=headerlink href=#requestremoveheader title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>removeHeader</span><span class=p>(</span><span class=nx>name</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>name</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> </ul> <p>Удаляет заголовок, который уже определен в объекте headers.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>removeHeader</span><span class=p>(</span><span class=s1>&#39;Content-Type&#39;</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <h3 id=requestreusedsocket>request.reusedSocket<a class=headerlink href=#requestreusedsocket title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a> Отправляется ли запрос через повторно используемый сокет.</li> </ul> <p>При отправке запроса через агент с поддержкой keep-alive, базовый сокет может быть использован повторно. Но если сервер закроет соединение в неудачное время, клиент может столкнуться с ошибкой 'ECONNRESET'.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>http</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;node:http&#39;</span><span class=p>);</span>

<span class=c1>// По умолчанию сервер имеет таймаут ожидания 5 секунд</span>
<span class=nx>http</span><span class=p>.</span><span class=nx>createServer</span><span class=p>((</span><span class=nx>req</span><span class=p>,</span><span class=w> </span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=s1>&#39;hello\n&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span>
<span class=p>}).</span><span class=nx>listen</span><span class=p>(</span><span class=mf>3000</span><span class=p>);</span>

<span class=nx>setInterval</span><span class=p>(()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Адаптация агента keep-alive</span>
<span class=w>    </span><span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;http://localhost:3000&#39;</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>agent</span><span class=w> </span><span class=p>},</span><span class=w> </span><span class=p>(</span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>res</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;data&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=c1>// Ничего не делать</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>});</span>
<span class=p>},</span><span class=w> </span><span class=mf>5000</span><span class=p>);</span><span class=w> </span><span class=c1>// Отправка запроса с интервалом в 5 секунд, так что легко нарваться на таймаут простоя.</span>
</code></pre></div></td></tr></table></div> <p>Пометив запрос, использовал ли он повторно сокет или нет, мы можем сделать автоматический повтор ошибки на его основе.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>http</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;node:http&#39;</span><span class=p>);</span>
<span class=kd>const</span><span class=w> </span><span class=nx>agent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>Agent</span><span class=p>({</span><span class=w> </span><span class=nx>keepAlive</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=p>});</span>

<span class=kd>function</span><span class=w> </span><span class=nx>retriableRequest</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>req</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>http</span>
<span class=w>        </span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;http://localhost:3000&#39;</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>agent</span><span class=w> </span><span class=p>},</span><span class=w> </span><span class=p>(</span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=c1>// ...</span>
<span class=w>        </span><span class=p>})</span>
<span class=w>        </span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;error&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>err</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=c1>// Проверяем, нужна ли повторная попытка</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span>
<span class=w>                </span><span class=nx>req</span><span class=p>.</span><span class=nx>reusedSocket</span><span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>                </span><span class=nx>err</span><span class=p>.</span><span class=nx>code</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ECONNRESET&#39;</span>
<span class=w>            </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=nx>retriableRequest</span><span class=p>();</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>
<span class=p>}</span>

<span class=nx>retriableRequest</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <h3 id=requestsetheader>request.setHeader<a class=headerlink href=#requestsetheader title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span><span class=w> </span><span class=nx>value</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>имя</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> <li><code>value</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Data_types><code>&lt;any&gt;</code></a></li> </ul> <p>Устанавливает значение одного заголовка для объекта headers. Если этот заголовок уже существует в отправляемых заголовках, его значение будет заменено. Для отправки нескольких заголовков с одинаковым именем используйте массив строк. Значения, не являющиеся строками, будут сохранены без изменений. Поэтому <a href=#requestgetheader><code>request.getHeader()</code></a> может возвращать нестроковые значения. Однако нестроковые значения будут преобразованы в строки для передачи по сети.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Content-Type&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;application/json&#39;</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <p>или</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Cookie&#39;</span><span class=p>,</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=s1>&#39;type=ninja&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;language=javascript&#39;</span><span class=p>,</span>
<span class=p>]);</span>
</code></pre></div></td></tr></table></div> <p>Когда значение представляет собой строку, будет выдано исключение, если оно содержит символы вне кодировки <code>latin1</code>.</p> <p>Если вам нужно передать в значении символы UTF-8, пожалуйста, кодируйте значение, используя стандарт <a href=https://www.rfc-editor.org/rfc/rfc8187.txt>RFC 8187</a>.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>filename</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Rock 🎵.txt&#39;</span><span class=p>;</span>
<span class=nx>request</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span>
<span class=w>    </span><span class=s1>&#39;Content-Disposition&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=sb>`attachment; filename*=utf-8&#39;&#39;</span><span class=si>${</span><span class=nb>encodeURIComponent</span><span class=p>(</span>
<span class=w>        </span><span class=nx>filename</span>
<span class=w>    </span><span class=p>)</span><span class=si>}</span><span class=sb>`</span>
<span class=p>);</span>
</code></pre></div></td></tr></table></div> <h3 id=requestsetnodelay>request.setNoDelay<a class=headerlink href=#requestsetnodelay title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>setNoDelay</span><span class=p>([</span><span class=nx>noDelay</span><span class=p>]);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>noDelay</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Как только сокет будет назначен этому запросу и подключен <a href=../net/#socketsetnodelaynodelay><code>socket.setNoDelay()</code></a> будет вызван.</p> <h3 id=requestsetsocketkeepalive>request.setSocketKeepAlive<a class=headerlink href=#requestsetsocketkeepalive title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>setSocketKeepAlive</span><span class=p>([</span><span class=nx>enable</span><span class=p>][,</span><span class=w> </span><span class=nx>initialDelay</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>enable</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> <li><code>initialDelay</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a></li> </ul> <p>Как только сокет будет назначен этому запросу и подключен <a href=../net/#socketsetkeepaliveenable-initialdelay><code>socket.setKeepAlive()</code></a> будет вызван.</p> <h3 id=requestsettimeout>request.setTimeout<a class=headerlink href=#requestsettimeout title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>setTimeout</span><span class=p>(</span><span class=nx>timeout</span><span class=p>[,</span><span class=w> </span><span class=nx>callback</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>timeout</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> Миллисекунды до завершения запроса.</li> <li><code>callback</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function><code>&lt;Function&gt;</code></a> Необязательная функция, которая будет вызвана, когда произойдет таймаут. Аналогично привязке к событию <code>timeout</code>.</li> <li>Возвращает: {http.ClientRequest}</li> </ul> <p>Когда сокет назначен этому запросу и подключен, будет вызвана функция <a href=../net/#socketsettimeouttimeout-callback><code>socket.setTimeout()</code></a>.</p> <h3 id=requestsocket>request.socket<a class=headerlink href=#requestsocket title="Permanent link">&para;</a></h3> <ul> <li>{stream.Duplex}</li> </ul> <p>Ссылка на базовый сокет. Обычно пользователи не хотят обращаться к этому свойству. В частности, сокет не будет испускать события `'readable'' из-за того, как парсер протокола присоединяется к сокету.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>http</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;node:http&#39;</span><span class=p>);</span>
<span class=kd>const</span><span class=w> </span><span class=nx>options</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>host</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;www.google.com&#39;</span><span class=p>,</span>
<span class=p>};</span>
<span class=kd>const</span><span class=w> </span><span class=nx>req</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>options</span><span class=p>);</span>
<span class=nx>req</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span>
<span class=nx>req</span><span class=p>.</span><span class=nx>once</span><span class=p>(</span><span class=s1>&#39;response&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>ip</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>req</span><span class=p>.</span><span class=nx>socket</span><span class=p>.</span><span class=nx>localAddress</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>port</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>req</span><span class=p>.</span><span class=nx>socket</span><span class=p>.</span><span class=nx>localPort</span><span class=p>;</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=sb>`Ваш IP-адрес - </span><span class=si>${</span><span class=nx>ip</span><span class=si>}</span><span class=sb>, а порт источника - </span><span class=si>${</span><span class=nx>port</span><span class=si>}</span><span class=sb>.`</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=c1>// Потребляем объект ответа</span>
<span class=p>});</span>
</code></pre></div></td></tr></table></div> <p>Это свойство гарантированно является экземпляром класса <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>, подкласса {stream.Duplex}, если пользователь не указал тип сокета, отличный от <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>.</p> <h3 id=requestuncork>request.uncork<a class=headerlink href=#requestuncork title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>uncork</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>См. <a href=../stream/#writableuncork><code>writable.uncork()</code></a>.</p> <h3 id=requestwritableended>request.writableEnded<a class=headerlink href=#requestwritableended title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Является <code>true</code> после вызова <a href=#requestend><code>request.end()</code></a>. Это свойство не указывает, были ли данные выгружены, для этого используйте <a href=#requestwritablefinished><code>request.writableFinished</code></a>.</p> <h3 id=requestwritablefinished>request.writableFinished<a class=headerlink href=#requestwritablefinished title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Является <code>true</code>, если все данные были выгружены в базовую систему, непосредственно перед тем, как будет выпущено событие <a href=#event-finish><code>'finish'</code></a>.</p> <h3 id=requestwrite>request.write<a class=headerlink href=#requestwrite title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>request</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=nx>chunk</span><span class=p>[,</span><span class=w> </span><span class=nx>encoding</span><span class=p>][,</span><span class=w> </span><span class=nx>callback</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>chunk</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> | <a href=../buffer/#buffer><code>&lt;Buffer&gt;</code></a> | <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array><code>&lt;Uint8Array&gt;</code></a></li> <li><code>encoding</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> <li><code>обратный вызов</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function><code>&lt;Function&gt;</code></a></li> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Отправляет фрагмент тела. Этот метод может быть вызван несколько раз. Если не задана <code>Content-Length</code>, данные будут автоматически закодированы в кодировке передачи HTTP Chunked, чтобы сервер знал, когда данные заканчиваются. Добавляется заголовок <code>Transfer-Encoding: chunked</code>. Вызов <a href=#requestend><code>request.end()</code></a> необходим для завершения отправки запроса.</p> <p>Аргумент <code>encoding</code> является необязательным и применяется только в том случае, если <code>chunk</code> является строкой. По умолчанию используется значение <code>'utf8</code>.</p> <p>Аргумент <code>callback</code> необязателен и будет вызван, когда этот кусок данных будет смыт, но только если кусок не пустой.</p> <p>Возвращает <code>true</code>, если все данные были успешно сброшены в буфер ядра. Возвращает <code>false</code>, если все данные или их часть были помещены в пользовательскую память. Когда буфер снова станет свободным, будет выдано сообщение `'drain''.</p> <p>Когда функция <code>write</code> вызывается с пустой строкой или буфером, она ничего не делает и ждет новых данных.</p> <h2 id=httpserver>http.Server<a class=headerlink href=#httpserver title="Permanent link">&para;</a></h2> <ul> <li>Расширяет: {net.Server}</li> </ul> <h3 id=checkcontinue>Событие: checkContinue<a class=headerlink href=#checkcontinue title="Permanent link">&para;</a></h3> <ul> <li><code>запрос</code> {http.IncomingMessage}</li> <li><code>ответ</code> {http.ServerResponse}</li> </ul> <p>Выдается каждый раз, когда получен запрос с HTTP <code>Expect: 100-continue</code>. Если это событие не прослушивается, сервер автоматически отвечает на запрос с <code>100 Continue</code>.</p> <p>Обработка этого события включает вызов <a href=#responsewritecontinue><code>response.writeContinue()</code></a>, если клиент должен продолжить отправку тела запроса, или генерацию соответствующего HTTP ответа (например, 400 Bad Request), если клиент не должен продолжать отправку тела запроса.</p> <p>Когда это событие испущено и обработано, событие <a href=#event-request><code>'request'</code></a> не будет испущено.</p> <h3 id=checkexpectation>Событие: checkExpectation<a class=headerlink href=#checkexpectation title="Permanent link">&para;</a></h3> <ul> <li><code>запрос</code> {http.IncomingMessage}</li> <li><code>ответ</code> {http.ServerResponse}</li> </ul> <p>Выдается каждый раз, когда получен запрос с заголовком HTTP <code>Expect</code>, значение которого не равно <code>100-continue</code>. Если это событие не прослушивается, сервер автоматически отвечает на него сообщением <code>417 Expectation Failed</code>.</p> <p>Когда это событие испущено и обработано, событие <a href=#event-request><code>'request'</code></a> не будет испущено.</p> <h3 id=clienterror>Событие: clientError<a class=headerlink href=#clienterror title="Permanent link">&para;</a></h3> <ul> <li><code>exception</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error><code>&lt;Error&gt;</code></a></li> <li><code>socket</code> {stream.Duplex}</li> </ul> <p>Если клиентское соединение испускает событие `'error'', оно будет передано сюда. Слушатель этого события отвечает за закрытие/уничтожение базового сокета. Например, можно пожелать более изящно закрыть сокет с помощью пользовательского HTTP-ответа вместо резкого разрыва соединения. Сокет <strong>должен быть закрыт или уничтожен</strong> до завершения работы слушателя.</p> <p>Это событие гарантированно передается экземпляру класса <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>, подкласса {stream.Duplex}, если пользователь не укажет тип сокета, отличный от <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>.</p> <p>Поведение по умолчанию заключается в попытке закрыть сокет с HTTP '400 Bad Request', или HTTP '431 Request Header Fields Too Large' в случае ошибки <a href=../errors/#hpe_header_overflow><code>HPE_HEADER_OVERFLOW</code></a>. Если сокет не доступен для записи или были отправлены заголовки текущего присоединенного <a href=#httpserverresponse><code>http.ServerResponse</code></a>, он немедленно уничтожается.</p> <p><code>socket</code> - это объект <a href=../net/#class-netsocket><code>net.Socket</code></a>, с которого произошла ошибка.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>http</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;node:http&#39;</span><span class=p>);</span>

<span class=kd>const</span><span class=w> </span><span class=nx>server</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>createServer</span><span class=p>((</span><span class=nx>req</span><span class=p>,</span><span class=w> </span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span>
<span class=p>});</span>
<span class=nx>server</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;clientError&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>err</span><span class=p>,</span><span class=w> </span><span class=nx>socket</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>socket</span><span class=p>.</span><span class=nx>end</span><span class=p>(</span><span class=s1>&#39;HTTP/1.1 400 Bad Request\r\n\r\n&#39;</span><span class=p>);</span>
<span class=p>});</span>
<span class=nx>server</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mf>8000</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <p>Когда происходит событие <code>clientError</code>, не существует ни объекта <code>request</code>, ни объекта <code>response</code>, поэтому любой отправленный HTTP-ответ, включая заголовки ответа и полезную нагрузку, <em>должен</em> быть записан непосредственно в объект <code>socket</code>. Необходимо следить за тем, чтобы ответ был правильно отформатированным сообщением HTTP-ответа.</p> <p><code>err</code> - это экземпляр <code>Error</code> с двумя дополнительными колонками:</p> <ul> <li><code>bytesParsed</code>: количество байт пакета запроса, который Node.js, возможно, разобрал правильно;</li> <li><code>rawPacket</code>: необработанный пакет текущего запроса.</li> </ul> <p>В некоторых случаях клиент уже получил ответ и/или сокет уже был уничтожен, как в случае ошибок <code>ECONNRESET</code>. Прежде чем пытаться отправить данные в сокет, лучше проверить, что он все еще доступен для записи.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>server</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;clientError&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>err</span><span class=p>,</span><span class=w> </span><span class=nx>socket</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nx>code</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ECONNRESET&#39;</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=o>!</span><span class=nx>socket</span><span class=p>.</span><span class=nx>writable</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>return</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=nx>socket</span><span class=p>.</span><span class=nx>end</span><span class=p>(</span><span class=s1>&#39;HTTP/1.1 400 Bad Request\r\n\r\n&#39;</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div></td></tr></table></div> <h3 id=close_1>Событие: close<a class=headerlink href=#close_1 title="Permanent link">&para;</a></h3> <p>Выдается при закрытии сервера.</p> <h3 id=connect_1>Событие: connect<a class=headerlink href=#connect_1 title="Permanent link">&para;</a></h3> <ul> <li><code>request</code> {http.IncomingMessage} Аргументы для HTTP-запроса, как в событии <a href=#event-request><code>'request'</code></a></li> <li><code>socket</code> {stream.Duplex} Сетевой сокет между сервером и клиентом</li> <li><code>head</code> <a href=../buffer/#buffer><code>&lt;Buffer&gt;</code></a> Первый пакет туннелируемого потока (может быть пустым).</li> </ul> <p>Выдается каждый раз, когда клиент запрашивает метод HTTP <code>CONNECT</code>. Если это событие не прослушивается, то клиенты, запрашивающие метод <code>CONNECT</code>, будут иметь закрытые соединения.</p> <p>Это событие гарантированно передается экземпляру класса <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>, подкласса {stream.Duplex}, если пользователь не укажет тип сокета, отличный от <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>.</p> <p>После испускания этого события сокет запроса не будет иметь слушателя события <code>'data'</code>, что означает, что для обработки данных, отправленных на сервер по этому сокету, его нужно будет привязать.</p> <h3 id=connection>Событие: connection<a class=headerlink href=#connection title="Permanent link">&para;</a></h3> <ul> <li><code>socket</code> {stream.Duplex}</li> </ul> <p>Это событие возникает при установлении нового TCP-потока. <code>socket</code> обычно представляет собой объект типа <a href=../net/#class-netsocket><code>net.Socket</code></a>. Обычно пользователи не хотят обращаться к этому событию. В частности, сокет не будет испускать события <code>readable</code> из-за того, как парсер протокола присоединяется к сокету. Доступ к <code>socket</code> можно также получить через <code>request.socket</code>.</p> <p>Это событие также может быть явно вызвано пользователями для инъекции соединений в HTTP-сервер. В этом случае может быть передан любой поток <a href=../stream/#class-streamduplex><code>Duplex</code></a>.</p> <p>Если здесь вызывается <code>socket.setTimeout()</code>, то таймаут будет заменен на <code>server.keepAliveTimeout</code>, когда сокет обслужит запрос (если <code>server.keepAliveTimeout</code> ненулевой).</p> <p>Это событие гарантированно передается экземпляру класса <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>, подкласса {stream.Duplex}, если пользователь не укажет тип сокета, отличный от <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>.</p> <h3 id=droprequest>Событие: dropRequest<a class=headerlink href=#droprequest title="Permanent link">&para;</a></h3> <ul> <li><code>request</code> {http.IncomingMessage} Аргументы для HTTP-запроса, как в событии <a href=#event-request><code>'request'</code></a></li> <li><code>socket</code> {stream.Duplex} Сетевой сокет между сервером и клиентом</li> </ul> <p>Когда количество запросов на сокете достигнет порога <code>server.maxRequestsPerSocket</code>, сервер отменит новые запросы и вместо них выдаст событие <code>'dropRequest'</code>, а затем отправит <code>503</code> клиенту.</p> <h3 id=request>Событие: request<a class=headerlink href=#request title="Permanent link">&para;</a></h3> <ul> <li><code>запрос</code> {http.IncomingMessage}</li> <li><code>ответ</code> {http.ServerResponse}</li> </ul> <p>Выдается каждый раз, когда поступает запрос. На одно соединение может приходиться несколько запросов (в случае соединений HTTP Keep-Alive).</p> <h3 id=upgrade_1>Событие: upgrade<a class=headerlink href=#upgrade_1 title="Permanent link">&para;</a></h3> <ul> <li><code>request</code> {http.IncomingMessage} Аргументы для HTTP-запроса, как в событии <a href=#event-request><code>'request'</code></a></li> <li><code>socket</code> {stream.Duplex} Сетевой сокет между сервером и клиентом</li> <li><code>head</code> <a href=../buffer/#buffer><code>&lt;Buffer&gt;</code></a> Первый пакет обновленного потока (может быть пустым).</li> </ul> <p>Выдается каждый раз, когда клиент запрашивает обновление HTTP. Прослушивание этого события необязательно, и клиенты не могут настаивать на смене протокола.</p> <p>После испускания этого события сокет запроса не будет иметь слушателя события <code>'data'</code>, что означает, что его нужно будет привязать, чтобы обрабатывать данные, отправленные серверу на этом сокете.</p> <p>Это событие гарантированно передается экземпляру класса <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>, подкласса {stream.Duplex}, если пользователь не укажет тип сокета, отличный от <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>.</p> <h3 id=serverclose>server.close<a class=headerlink href=#serverclose title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>server</span><span class=p>.</span><span class=nx>close</span><span class=p>([</span><span class=nx>callback</span><span class=p>]);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>callback</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function><code>&lt;Function&gt;</code></a></li> </ul> <p>Останавливает сервер от приема новых соединений и закрывает все соединения, подключенные к этому серверу, которые не посылают запрос или не ожидают ответа. См. <a href=../net/#serverclosecallback><code>net.Server.close()</code></a>.</p> <h3 id=servercloseallconnections>server.closeAllConnections<a class=headerlink href=#servercloseallconnections title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>server</span><span class=p>.</span><span class=nx>closeAllConnections</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>Закрывает все соединения, подключенные к этому серверу.</p> <h3 id=servercloseidleconnections>server.closeIdleConnections<a class=headerlink href=#servercloseidleconnections title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>server</span><span class=p>.</span><span class=nx>closeIdleConnections</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>Закрывает все соединения, подключенные к этому серверу, которые не посылают запрос и не ожидают ответа.</p> <h3 id=serverheaderstimeout>server.headersTimeout<a class=headerlink href=#serverheaderstimeout title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> <strong>По умолчанию:</strong> Минимальное значение между <a href=#serverrequesttimeout><code>server.requestTimeout</code></a> или <code>60000</code>.</li> </ul> <p>Ограничивает количество времени, в течение которого парсер будет ждать получения полных заголовков HTTP.</p> <p>Если таймаут истекает, сервер отвечает статусом 408, не пересылая запрос слушателю запросов, а затем закрывает соединение.</p> <p>Это значение должно быть ненулевым (например, 120 секунд) для защиты от потенциальных атак Denial-of-Service в случае, если сервер развернут без обратного прокси.</p> <h3 id=serverlisten>server.listen<a class=headerlink href=#serverlisten title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>server</span><span class=p>.</span><span class=nx>listen</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>Запускает HTTP-сервер, прослушивающий соединения. Этот метод идентичен <a href=../net/#serverlisten><code>server.listen()</code></a> из <a href=../net/#class-netserver><code>net.Server</code></a>.</p> <h3 id=serverlistening>server.listening<a class=headerlink href=#serverlistening title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a> Указывает, прослушивает ли сервер соединения или нет.</li> </ul> <h3 id=servermaxheaderscount>server.maxHeadersCount<a class=headerlink href=#servermaxheaderscount title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> <strong>По умолчанию:</strong> <code>2000</code>.</li> </ul> <p>Ограничивает максимальное количество входящих заголовков. Если установлено значение 0, ограничение не будет применяться.</p> <h3 id=serverrequesttimeout>server.requestTimeout<a class=headerlink href=#serverrequesttimeout title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> <strong>По умолчанию:</strong> <code>300000</code>.</li> </ul> <p>Устанавливает значение таймаута в миллисекундах для получения всего запроса от клиента.</p> <p>Если таймаут истекает, сервер отвечает статусом 408 без пересылки запроса слушателю запроса, а затем закрывает соединение.</p> <p>Это значение должно быть ненулевым (например, 120 секунд) для защиты от потенциальных атак Denial-of-Service в случае, если сервер развернут без обратного прокси.</p> <h3 id=serversettimeout>server.setTimeout<a class=headerlink href=#serversettimeout title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>server</span><span class=p>.</span><span class=nx>setTimeout</span><span class=p>([</span><span class=nx>msecs</span><span class=p>][,</span><span class=w> </span><span class=nx>callback</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>msecs</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> <strong>По умолчанию:</strong> 0 (без таймаута)</li> <li><code>callback</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function><code>&lt;Function&gt;</code></a></li> <li>Возвращает: {http.Server}</li> </ul> <p>Устанавливает значение тайм-аута для сокетов и выдает событие <code>'timeout'</code> на объект Server, передавая сокет в качестве аргумента, если тайм-аут произошел.</p> <p>Если на объекте Server есть слушатель события <code>'timeout'</code>, то он будет вызван с тайм-аутом сокета в качестве аргумента.</p> <p>По умолчанию сервер не отключает сокеты по таймауту. Однако если событию <code>'timeout'</code> сервера назначен обратный вызов, то таймауты должны обрабатываться явно.</p> <h3 id=servermaxrequestspersocket>server.maxRequestsPerSocket<a class=headerlink href=#servermaxrequestspersocket title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> Запросы на сокет. <strong>По умолчанию:</strong> 0 (без ограничений).</li> </ul> <p>Максимальное количество запросов, которое может обработать сокет перед закрытием соединения keep alive.</p> <p>Значение <code>0</code> отключает ограничение.</p> <p>При достижении лимита значение заголовка <code>Connection</code> будет установлено на <code>close</code>, но фактически соединение закрыто не будет, последующие запросы, отправленные после достижения лимита, получат в ответ <code>503 Service Unavailable</code>.</p> <h3 id=servertimeout>server.timeout<a class=headerlink href=#servertimeout title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> Таймаут в миллисекундах. <strong>По умолчанию:</strong> 0 (таймаут отсутствует).</li> </ul> <p>Количество миллисекунд бездействия, после которого считается, что сокет завершил работу.</p> <p>Значение <code>0</code> отключает таймаут для входящих соединений.</p> <p>Логика таймаута сокета устанавливается при подключении, поэтому изменение этого значения влияет только на новые соединения с сервером, а не на существующие.</p> <h3 id=serverkeepalivetimeout>server.keepAliveTimeout<a class=headerlink href=#serverkeepalivetimeout title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> Таймаут в миллисекундах. <strong>По умолчанию:</strong> <code>5000</code> (5 секунд).</li> </ul> <p>Количество миллисекунд бездействия, в течение которых сервер должен ждать новых входящих данных, после того как он закончил писать последний ответ, прежде чем сокет будет уничтожен. Если сервер получит новые данные до истечения таймаута keep-alive, он сбросит обычный таймаут бездействия, т.е. <a href=#servertimeout><code>server.timeout</code></a>.</p> <p>Значение <code>0</code> отключает таймаут "keep-alive" для входящих соединений. Значение <code>0</code> заставляет http-сервер вести себя аналогично Node.js версий до 8.0.0, в которых не было таймаута keep-alive.</p> <p>Логика таймаута сокета устанавливается при подключении, поэтому изменение этого значения влияет только на новые подключения к серверу, а не на существующие.</p> <h2 id=httpserverresponse>http.ServerResponse<a class=headerlink href=#httpserverresponse title="Permanent link">&para;</a></h2> <ul> <li>Расширяет: {http.OutgoingMessage}</li> </ul> <p>Этот объект создается внутри HTTP-сервера, а не пользователем. Он передается в качестве второго параметра в событие <a href=#event-request><code>'request'</code></a>.</p> <h3 id=close_2>Событие: close<a class=headerlink href=#close_2 title="Permanent link">&para;</a></h3> <p>Указывает на то, что ответ завершен, или его базовое соединение было прервано преждевременно (до завершения ответа).</p> <h3 id=finish_1>Событие: finish<a class=headerlink href=#finish_1 title="Permanent link">&para;</a></h3> <p>Вызывается, когда ответ был отправлен. Точнее, это событие возникает, когда последний сегмент заголовков и тела ответа был передан операционной системе для передачи по сети. Это не означает, что клиент уже что-то получил.</p> <h3 id=responseaddtrailers>response.addTrailers<a class=headerlink href=#responseaddtrailers title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>addTrailers</span><span class=p>(</span><span class=nx>headers</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>headers</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a></li> </ul> <p>Этот метод добавляет к ответу HTTP трейлерные заголовки (заголовок, но в конце сообщения).</p> <p>Заголовки будут <strong>только</strong> если для ответа используется кодировка <code>chunked</code>; если это не так (например, если запрос был HTTP/1.0), они будут молча отброшены.</p> <p>HTTP требует отправки заголовка <code>Trailer</code> для эмиссии трейлеров, в значении которого содержится список полей заголовка. Например,</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>writeHead</span><span class=p>(</span><span class=mf>200</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;text/plain&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=nx>Trailer</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;Content-MD5&#39;</span><span class=p>,</span>
<span class=p>});</span>
<span class=nx>response</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=nx>fileData</span><span class=p>);</span>
<span class=nx>response</span><span class=p>.</span><span class=nx>addTrailers</span><span class=p>({</span>
<span class=w>    </span><span class=s1>&#39;Content-MD5&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;7895bf4b8828b55ceaf47747b4bca667&#39;</span><span class=p>,</span>
<span class=p>});</span>
<span class=nx>response</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>Попытка установить имя или значение поля заголовка, содержащее недопустимые символы, приведет к возникновению <a href=../errors/#class-typeerror><code>TypeError</code></a>.</p> <h3 id=responseconnection>response.connection<a class=headerlink href=#responseconnection title="Permanent link">&para;</a></h3> <div class="admonition danger"> <p class=admonition-title>Стабильность: 0 – устарело или набрало много негативных отзывов</p> <p>Эта фича является проблемной и ее планируют изменить. Не стоит полагаться на нее. Использование фичи может вызвать ошибки. Не стоит ожидать от нее обратной совместимости.</p> <p>Используйте <a href=#responsesocket><code>response.socket</code></a>.</p> </div> <ul> <li>{stream.Duplex}</li> </ul> <p>См. <a href=#responsesocket><code>response.socket</code></a>.</p> <h3 id=responsecork>response.cork<a class=headerlink href=#responsecork title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>cork</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>См. <a href=../stream/#writablecork><code>writable.cork()</code></a>.</p> <h3 id=responseend>response.end<a class=headerlink href=#responseend title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>end</span><span class=p>([</span><span class=nx>data</span><span class=p>[,</span><span class=w> </span><span class=nx>encoding</span><span class=p>]][,</span><span class=w> </span><span class=nx>callback</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>данные</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> | <a href=../buffer/#buffer><code>&lt;Buffer&gt;</code></a> | <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array><code>&lt;Uint8Array&gt;</code></a></li> <li><code>encoding</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> <li><code>callback</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function><code>&lt;Function&gt;</code></a></li> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/this><code>&lt;this&gt;</code></a></li> </ul> <p>Этот метод сигнализирует серверу, что все заголовки и тело ответа были отправлены; сервер должен считать это сообщение завершенным. Метод <code>response.end()</code> ДОЛЖЕН вызываться в каждом ответе.</p> <p>Если указаны <code>data</code>, это аналогично вызову <a href=#responsewritechunk-encoding-callback><code>response.write(data, encoding)</code></a>, за которым следует <code>response.end(callback)</code>.</p> <p>Если указан <code>callback</code>, он будет вызван, когда поток ответа будет завершен.</p> <h3 id=responsefinished>response.finished<a class=headerlink href=#responsefinished title="Permanent link">&para;</a></h3> <div class="admonition danger"> <p class=admonition-title>Стабильность: 0 – устарело или набрало много негативных отзывов</p> <p>Утратил актуальность. Используйте <a href=#responsewritableended><code>response.writableEnded</code></a>.</p> </div> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Свойство <code>response.finished</code> будет <code>true</code>, если был вызван <a href=#responseend><code>response.end()</code></a>.</p> <h3 id=responseflushheaders>response.flushHeaders<a class=headerlink href=#responseflushheaders title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>flushHeaders</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>Промывает заголовки ответа. См. также: <a href=#requestflushheaders><code>request.flushHeaders()</code></a>.</p> <h3 id=responsegetheader>response.getHeader<a class=headerlink href=#responsegetheader title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>getHeader</span><span class=p>(</span><span class=nx>name</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>name</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Data_types><code>&lt;any&gt;</code></a></li> </ul> <p>Считывает заголовок, который уже был поставлен в очередь, но не отправлен клиенту. Имя не чувствительно к регистру. Тип возвращаемого значения зависит от аргументов, переданных в <a href=#responsesetheadername-value><code>response.setHeader()</code></a>.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Content-Type&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;text/html&#39;</span><span class=p>);</span>
<span class=nx>response</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span>
<span class=w>    </span><span class=s1>&#39;Content-Length&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=nx>Buffer</span><span class=p>.</span><span class=nx>byteLength</span><span class=p>(</span><span class=nx>body</span><span class=p>)</span>
<span class=p>);</span>
<span class=nx>response</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Set-Cookie&#39;</span><span class=p>,</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=s1>&#39;type=ninja&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;language=javascript&#39;</span><span class=p>,</span>
<span class=p>]);</span>
<span class=kd>const</span><span class=w> </span><span class=nx>contentType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>response</span><span class=p>.</span><span class=nx>getHeader</span><span class=p>(</span><span class=s1>&#39;content-type&#39;</span><span class=p>);</span>
<span class=c1>// contentType - &#39;text/html&#39;</span>
<span class=kd>const</span><span class=w> </span><span class=nx>contentLength</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>response</span><span class=p>.</span><span class=nx>getHeader</span><span class=p>(</span><span class=s1>&#39;Content-Length&#39;</span><span class=p>);</span>
<span class=c1>// contentLength имеет тип число</span>
<span class=kd>const</span><span class=w> </span><span class=nx>setCookie</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>response</span><span class=p>.</span><span class=nx>getHeader</span><span class=p>(</span><span class=s1>&#39;set-cookie&#39;</span><span class=p>);</span>
<span class=c1>// setCookie имеет тип string[]</span>
</code></pre></div></td></tr></table></div> <h3 id=responsegetheadernames>response.getHeaderNames<a class=headerlink href=#responsegetheadernames title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>getHeaderNames</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <ul> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string[]&gt;</code></a></li> </ul> <p>Возвращает массив, содержащий уникальные имена текущих исходящих заголовков. Все имена заголовков пишутся в нижнем регистре.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Foo&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;bar&#39;</span><span class=p>);</span>
<span class=nx>response</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Set-Cookie&#39;</span><span class=p>,</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;foo=bar&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;bar=baz&#39;</span><span class=p>]);</span>

<span class=kd>const</span><span class=w> </span><span class=nx>headerNames</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>response</span><span class=p>.</span><span class=nx>getHeaderNames</span><span class=p>();</span>
<span class=c1>// headerNames === [&#39;foo&#39;, &#39;set-cookie&#39;]</span>
</code></pre></div></td></tr></table></div> <h3 id=responsegetheaders>response.getHeaders<a class=headerlink href=#responsegetheaders title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>getHeaders</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <ul> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a></li> </ul> <p>Возвращает неглубокую копию текущих исходящих заголовков. Поскольку используется неглубокая копия, значения массива могут быть изменены без дополнительных вызовов различных методов модуля http, связанных с заголовками. Ключами возвращаемого объекта являются имена заголовков, а значениями - соответствующие значения заголовков. Все имена заголовков пишутся в нижнем регистре.</p> <p>Объект, возвращаемый методом <code>response.getHeaders()</code>, <em>не</em> прототипически наследует от JavaScript <code>Object</code>. Это означает, что типичные методы <code>Object</code>, такие как <code>obj.toString()</code>, <code>obj.hasOwnProperty()</code> и другие, не определены и <em>не будут работать</em>.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Foo&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;bar&#39;</span><span class=p>);</span>
<span class=nx>response</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Set-Cookie&#39;</span><span class=p>,</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;foo=bar&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;bar=baz&#39;</span><span class=p>]);</span>

<span class=kd>const</span><span class=w> </span><span class=nx>headers</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>response</span><span class=p>.</span><span class=nx>getHeaders</span><span class=p>();</span>
<span class=c1>// headers === { foo: &#39;bar&#39;, &#39;set-cookie&#39;: [&#39;foo=bar&#39;, &#39;bar=baz&#39;] }</span>
</code></pre></div></td></tr></table></div> <h3 id=responsehasheader>response.hasHeader<a class=headerlink href=#responsehasheader title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>hasHeader</span><span class=p>(</span><span class=nx>name</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>name</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Возвращает <code>true</code>, если заголовок, обозначенный <code>name</code>, в настоящее время установлен в исходящих заголовках. Соответствие имени заголовка не чувствительно к регистру.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>hasContentType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>response</span><span class=p>.</span><span class=nx>hasHeader</span><span class=p>(</span><span class=s1>&#39;content-type&#39;</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <h3 id=responseheaderssent>response.headersSent<a class=headerlink href=#responseheaderssent title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Булево (только для чтения). <code>true</code>, если заголовки были отправлены, <code>false</code> в противном случае.</p> <h3 id=responseremoveheader>response.removeHeader<a class=headerlink href=#responseremoveheader title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>removeHeader</span><span class=p>(</span><span class=nx>name</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>name</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> </ul> <p>Удаляет заголовок, поставленный в очередь для неявной отправки.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>removeHeader</span><span class=p>(</span><span class=s1>&#39;Content-Encoding&#39;</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <h3 id=responsereq>response.req<a class=headerlink href=#responsereq title="Permanent link">&para;</a></h3> <ul> <li>{http.IncomingMessage}</li> </ul> <p>Ссылка на исходный объект HTTP <code>request</code>.</p> <h3 id=responsesenddate>response.sendDate<a class=headerlink href=#responsesenddate title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>При значении true заголовок Date будет автоматически сгенерирован и отправлен в ответ, если он еще не присутствует в заголовках. По умолчанию установлено значение true.</p> <p>Это значение следует отключать только для тестирования; HTTP требует наличия заголовка Date в ответах.</p> <h3 id=responsesetheader>response.setHeader<a class=headerlink href=#responsesetheader title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span><span class=w> </span><span class=nx>value</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>name</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> <li><code>value</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Data_types><code>&lt;any&gt;</code></a></li> <li>Возвращает: {http.ServerResponse}</li> </ul> <p>Возвращает объект ответа.</p> <p>Устанавливает одно значение заголовка для неявных заголовков. Если этот заголовок уже существует в отправляемых заголовках, его значение будет заменено. Для отправки нескольких заголовков с одинаковым именем используйте массив строк. Значения, не являющиеся строками, будут сохранены без изменений. Поэтому <a href=#responsegetheader><code>response.getHeader()</code></a> может возвращать нестроковые значения. Однако нестроковые значения будут преобразованы в строки для передачи по сети. Один и тот же объект ответа возвращается вызывающей стороне, чтобы обеспечить возможность цепочки вызовов.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Content-Type&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;text/html&#39;</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <p>или</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Set-Cookie&#39;</span><span class=p>,</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=s1>&#39;type=ninja&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;language=javascript&#39;</span><span class=p>,</span>
<span class=p>]);</span>
</code></pre></div></td></tr></table></div> <p>Попытка установить имя или значение поля заголовка, которое содержит недопустимые символы, приведет к возникновению <a href=../errors/#class-typeerror><code>TypeError</code></a>.</p> <p>Когда заголовки были установлены с помощью <a href=#responsesetheader><code>response.setHeader()</code></a>, они будут объединены с любыми заголовками, переданными в <a href=#responsewriteheadstatuscode-statusmessage-headers><code>response.writeHead()</code></a>, причем заголовки, переданные в <a href=#responsewriteheadstatuscode-statusmessage-headers><code>response.writeHead()</code></a>, будут иметь приоритет.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span></pre></div></td><td class=code><div><pre><span></span><code><span class=c1>// Возвращает content-type = text/plain</span>
<span class=kd>const</span><span class=w> </span><span class=nx>server</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>createServer</span><span class=p>((</span><span class=nx>req</span><span class=p>,</span><span class=w> </span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Content-Type&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;text/html&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;X-Foo&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;bar&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>writeHead</span><span class=p>(</span><span class=mf>200</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;text/plain&#39;</span><span class=w> </span><span class=p>});</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>end</span><span class=p>(</span><span class=s1>&#39;ok&#39;</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div></td></tr></table></div> <p>Если вызывается метод <a href=#responsewriteheadstatuscode-statusmessage-headers><code>response.writeHead()</code></a> и этот метод не был вызван, то он напрямую запишет значения предоставленных заголовков в сетевой канал без внутреннего кэширования, и обращение <a href=#responsegetheadername><code>response.getHeader()</code></a> к заголовку не даст ожидаемого результата. Если требуется постепенное накопление заголовков с возможным извлечением и изменением в будущем, используйте <a href=#responsesetheadername-value><code>response.setHeader()</code></a> вместо <a href=#responsewriteheadstatuscode-statusmessage-headers><code>response.writeHead()</code></a>.</p> <h3 id=responsesettimeout>response.setTimeout<a class=headerlink href=#responsesettimeout title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>setTimeout</span><span class=p>(</span><span class=nx>msecs</span><span class=p>[,</span><span class=w> </span><span class=nx>callback</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>msecs</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a></li> <li><code>callback</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function><code>&lt;Function&gt;</code></a></li> <li>Возвращает: {http.ServerResponse}</li> </ul> <p>Устанавливает значение тайм-аута сокета в <code>msecs</code>. Если указан обратный вызов, то он добавляется в качестве слушателя события <code>'timeout'</code> на объекте ответа.</p> <p>Если к запросу, ответу или серверу не добавлен слушатель <code>'timeout'</code>, то сокеты уничтожаются по истечении времени. Если для событий <code>'timeout'</code> запроса, ответа или сервера назначен обработчик, то сокеты с таймаутом должны обрабатываться явно.</p> <h3 id=responsesocket>response.socket<a class=headerlink href=#responsesocket title="Permanent link">&para;</a></h3> <ul> <li>{stream.Duplex}</li> </ul> <p>Ссылка на базовый сокет. Обычно пользователи не хотят обращаться к этому свойству. В частности, сокет не будет выдавать события <code>'readable'</code> из-за того, как парсер протокола подключается к сокету. После <code>response.end()</code> свойство обнуляется.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>http</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;node:http&#39;</span><span class=p>);</span>
<span class=kd>const</span><span class=w> </span><span class=nx>server</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>http</span>
<span class=w>    </span><span class=p>.</span><span class=nx>createServer</span><span class=p>((</span><span class=nx>req</span><span class=p>,</span><span class=w> </span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>ip</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>res</span><span class=p>.</span><span class=nx>socket</span><span class=p>.</span><span class=nx>remoteAddress</span><span class=p>;</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>port</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>res</span><span class=p>.</span><span class=nx>socket</span><span class=p>.</span><span class=nx>remotePort</span><span class=p>;</span>
<span class=w>        </span><span class=nx>res</span><span class=p>.</span><span class=nx>end</span><span class=p>(</span>
<span class=w>            </span><span class=sb>`Ваш IP адрес </span><span class=si>${</span><span class=nx>ip</span><span class=si>}</span><span class=sb> и ваш порт источника </span><span class=si>${</span><span class=nx>port</span><span class=si>}</span><span class=sb>.`</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>})</span>
<span class=w>    </span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mf>3000</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <p>Это свойство гарантированно является экземпляром класса <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>, подкласса {stream.Duplex}, если пользователь не указал тип сокета, отличный от <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>.</p> <h3 id=responsestatuscode>response.statusCode<a class=headerlink href=#responsestatuscode title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> <strong>По умолчанию:</strong> <code>200</code>.</li> </ul> <p>При использовании неявных заголовков (не вызывая <a href=#responsewriteheadstatuscode-statusmessage-headers><code>response.writeHead()</code></a> явно), это свойство контролирует код статуса, который будет отправлен клиенту, когда заголовки будут смыты.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>statusCode</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>404</span><span class=p>;</span>
</code></pre></div></td></tr></table></div> <p>После того, как заголовок ответа был отправлен клиенту, это свойство указывает на код статуса, который был отправлен.</p> <h3 id=responsestatusmessage>response.statusMessage<a class=headerlink href=#responsestatusmessage title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> </ul> <p>При использовании неявных заголовков (не вызывая <a href=#responsewriteheadstatuscode-statusmessage-headers><code>response.writeHead()</code></a> явно), это свойство управляет сообщением о статусе, которое будет отправлено клиенту, когда заголовки будут смыты. Если оставить это свойство как <code>undefined</code>, то будет использоваться стандартное сообщение для кода статуса.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>statusMessage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Not found&#39;</span><span class=p>;</span>
</code></pre></div></td></tr></table></div> <p>После того, как заголовок ответа был отправлен клиенту, это свойство указывает на сообщение о статусе, которое было отправлено.</p> <h3 id=responsestrictcontentlength>response.strictContentLength<a class=headerlink href=#responsestrictcontentlength title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a> <strong>По умолчанию:</strong> <code>false</code>.</li> </ul> <p>Если установлено значение <code>true</code>, Node.js будет проверять, равны ли значение заголовка <code>Content-Length</code> и размер тела в байтах. Несоответствие значения заголовка <code>Content-Length</code> приведет к возникновению <code>ошибки</code>, определяемой <code>кодом:</code> <a href=../errors/#err_http_content_length_mismatch><code>'ERR_HTTP_CONTENT_LENGTH_MISMATCH'</code></a>.</p> <h3 id=responseuncork>response.uncork<a class=headerlink href=#responseuncork title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>uncork</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>См. <a href=../stream/#writableuncork><code>writable.uncork()</code></a>.</p> <h3 id=responsewritableended>response.writableEnded<a class=headerlink href=#responsewritableended title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Является <code>true</code> после вызова <a href=#responseend><code>response.end()</code></a>. Это свойство не указывает, были ли данные удалены, для этого используйте <a href=#responsewritablefinished><code>response.writableFinished</code></a>.</p> <h3 id=responsewritablefinished>response.writableFinished<a class=headerlink href=#responsewritablefinished title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Является <code>true</code>, если все данные были выгружены в базовую систему, непосредственно перед тем, как будет выпущено событие <a href=#event-finish><code>'finish'</code></a>.</p> <h3 id=responsewrite>response.write<a class=headerlink href=#responsewrite title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=nx>chunk</span><span class=p>[,</span><span class=w> </span><span class=nx>encoding</span><span class=p>][,</span><span class=w> </span><span class=nx>callback</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>chunk</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> | <a href=../buffer/#buffer><code>&lt;Buffer&gt;</code></a> | <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array><code>&lt;Uint8Array&gt;</code></a></li> <li><code>encoding</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> <strong>По умолчанию:</strong> `'utf8''</li> <li><code>callback</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function><code>&lt;Function&gt;</code></a></li> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Если этот метод вызван и <a href=#responsewriteheadstatuscode-statusmessage-headers><code>response.writeHead()</code></a> не был вызван, он переключится в режим неявных заголовков и промоет неявные заголовки.</p> <p>При этом отправляется фрагмент тела ответа. Этот метод может быть вызван несколько раз для предоставления последовательных частей тела.</p> <p>В модуле <code>node:http</code> тело ответа опускается, если запрос является запросом HEAD. Аналогично, ответы <code>204</code> и <code>304</code> <em>не должны</em> включать тело сообщения.</p> <p><code>chunk</code> может быть строкой или буфером. Если <code>chunk</code> является строкой, второй параметр указывает, как кодировать его в поток байтов. Функция <code>callback</code> будет вызвана, когда этот кусок данных будет сброшен.</p> <p>Это необработанное тело HTTP и не имеет ничего общего с многокомпонентными кодировками тела более высокого уровня, которые могут быть использованы.</p> <p>При первом вызове <a href=#responsewrite><code>response.write()</code></a> клиенту будет отправлена буферизованная информация заголовка и первый фрагмент тела. При втором вызове <a href=#responsewrite><code>response.write()</code></a> Node.js предполагает, что данные будут передаваться потоком, и отправляет новые данные отдельно. То есть, ответ буферизируется до первого куска тела.</p> <p>Возвращает <code>true</code>, если все данные были успешно переданы в буфер ядра. Возвращает <code>false</code>, если все данные или их часть были помещены в пользовательскую память. Когда буфер снова освободится, будет выдано сообщение <code>'drain'</code>.</p> <h3 id=responsewritecontinue>response.writeContinue<a class=headerlink href=#responsewritecontinue title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>writeContinue</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>Отправляет клиенту сообщение HTTP/1.1 100 Continue, указывающее на то, что тело запроса должно быть отправлено. См. событие <a href=#event-checkcontinue><code>'checkContinue'</code></a> на <code>Server</code>.</p> <h3 id=responsewriteearlyhints>response.writeEarlyHints<a class=headerlink href=#responsewriteearlyhints title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>writeEarlyHints</span><span class=p>(</span><span class=nx>hints</span><span class=p>[,</span><span class=w> </span><span class=nx>callback</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>hints</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a></li> <li><code>callback</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function><code>&lt;Function&gt;</code></a></li> </ul> <p>Отправляет сообщение HTTP/1.1 103 Early Hints клиенту с заголовком Link, указывая, что пользовательский агент может предварительно загрузить/подключить связанные ресурсы. <code>hints</code> - это объект, содержащий значения заголовков, которые должны быть отправлены с сообщением ранних подсказок. Необязательный аргумент <code>callback</code> будет вызван, когда сообщение ответа будет записано.</p> <p><strong>Пример</strong></p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>earlyHintsLink</span><span class=w> </span><span class=o>=</span>
<span class=w>    </span><span class=s1>&#39;&lt;/styles.css&gt;; rel=preload; as=style&#39;</span><span class=p>;</span>
<span class=nx>response</span><span class=p>.</span><span class=nx>writeEarlyHints</span><span class=p>({</span>
<span class=w>    </span><span class=nx>link</span><span class=o>:</span><span class=w> </span><span class=nx>earlyHintsLink</span><span class=p>,</span>
<span class=p>});</span>

<span class=kd>const</span><span class=w> </span><span class=nx>earlyHintsLinks</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=s1>&#39;&lt;/styles.css&gt;; rel=preload; as=style&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;&lt;/scripts.js&gt;; rel=preload; as=script&#39;</span><span class=p>,</span>
<span class=p>];</span>
<span class=nx>response</span><span class=p>.</span><span class=nx>writeEarlyHints</span><span class=p>({</span>
<span class=w>    </span><span class=nx>link</span><span class=o>:</span><span class=w> </span><span class=nx>earlyHintsLinks</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;x-trace-id&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;id для диагностики&#39;</span><span class=p>,</span>
<span class=p>});</span>

<span class=kd>const</span><span class=w> </span><span class=nx>earlyHintsCallback</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;early hints message sent&#39;</span><span class=p>);</span>
<span class=nx>response</span><span class=p>.</span><span class=nx>writeEarlyHints</span><span class=p>(</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>        </span><span class=nx>link</span><span class=o>:</span><span class=w> </span><span class=nx>earlyHintsLinks</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nx>earlyHintsCallback</span>
<span class=p>);</span>
</code></pre></div></td></tr></table></div> <h3 id=responsewritehead>response.writeHead<a class=headerlink href=#responsewritehead title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>writeHead</span><span class=p>(</span><span class=nx>statusCode</span><span class=p>[,</span><span class=w> </span><span class=nx>statusMessage</span><span class=p>][,</span><span class=w> </span><span class=nx>headers</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>statusCode</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a></li> <li><code>statusMessage</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> <li><code>headers</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a> | <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array><code>&lt;Array&gt;</code></a></li> <li>Возвращает: {http.ServerResponse}</li> </ul> <p>Отправляет заголовок ответа на запрос. Код статуса - это трехзначный код статуса HTTP, например <code>404</code>. Последний аргумент, <code>headers</code>, - это заголовки ответа. Опционально в качестве второго аргумента можно указать человекочитаемое <code>statusMessage</code>.</p> <p><code>headers</code> может быть <code>массивом</code>, где ключи и значения находятся в одном списке. Это <em>не</em> список кортежей. Таким образом, четные смещения являются значениями ключей, а нечетные смещения - связанными с ними значениями. Массив имеет тот же формат, что и <code>request.rawHeaders</code>.</p> <p>Возвращает ссылку на <code>ServerResponse</code>, так что вызовы могут быть объединены в цепочку.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>body</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;hello world&#39;</span><span class=p>;</span>
<span class=nx>response</span>
<span class=w>    </span><span class=p>.</span><span class=nx>writeHead</span><span class=p>(</span><span class=mf>200</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=s1>&#39;Content-Length&#39;</span><span class=o>:</span><span class=w> </span><span class=nx>Buffer</span><span class=p>.</span><span class=nx>byteLength</span><span class=p>(</span><span class=nx>body</span><span class=p>),</span>
<span class=w>        </span><span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;text/plain&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=p>})</span>
<span class=w>    </span><span class=p>.</span><span class=nx>end</span><span class=p>(</span><span class=nx>body</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <p>Этот метод должен быть вызван только один раз для сообщения, и он должен быть вызван до вызова <a href=#responseend><code>response.end()</code></a>.</p> <p>Если <a href=#responsewrite><code>response.write()</code></a> или <a href=#responseend><code>response.end()</code></a> будут вызваны до вызова этой функции, неявные/изменяемые заголовки будут вычислены и вызовут эту функцию.</p> <p>Если заголовки были установлены с помощью <a href=#responsesetheader><code>response.setHeader()</code></a>, они будут объединены с любыми заголовками, переданными в <a href=#responsewritehead><code>response.writeHead()</code></a>, причем заголовки, переданные в <a href=#responsewritehead><code>response.writeHead()</code></a>, будут иметь приоритет.</p> <p>Если этот метод вызван, а <a href=#responsesetheader><code>response.setHeader()</code></a> не был вызван, он будет напрямую записывать переданные значения заголовков в сетевой канал без внутреннего кэширования, и <a href=#responsegetheader><code>response.getHeader()</code></a> по заголовку не даст ожидаемого результата. Если требуется постепенное накопление заголовков с возможным извлечением и изменением в будущем, используйте вместо этого <a href=#responsesetheader><code>response.setHeader()</code></a>.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span></pre></div></td><td class=code><div><pre><span></span><code><span class=c1>// Возвращает content-type = text/plain</span>
<span class=kd>const</span><span class=w> </span><span class=nx>server</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>createServer</span><span class=p>((</span><span class=nx>req</span><span class=p>,</span><span class=w> </span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Content-Type&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;text/html&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;X-Foo&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;bar&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>writeHead</span><span class=p>(</span><span class=mf>200</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;text/plain&#39;</span><span class=w> </span><span class=p>});</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>end</span><span class=p>(</span><span class=s1>&#39;ok&#39;</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div></td></tr></table></div> <p><code>Content-Length</code> считывается в байтах, а не в символах. Используйте <a href=../buffer/#static-method-bufferbytelengthstring-encoding><code>Buffer.byteLength()</code></a> для определения длины тела в байтах. Node.js будет проверять, равны ли <code>Content-Length</code> и длина переданного тела или нет.</p> <p>Попытка установить имя или значение поля заголовка, которое содержит недопустимые символы, приведет к ошибке.</p> <h3 id=responsewriteprocessing>response.writeProcessing<a class=headerlink href=#responsewriteprocessing title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>response</span><span class=p>.</span><span class=nx>writeProcessing</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>Отправляет клиенту сообщение HTTP/1.1 102 Processing, указывающее на то, что тело запроса должно быть отправлено.</p> <h2 id=httpincomingmessage>http.IncomingMessage<a class=headerlink href=#httpincomingmessage title="Permanent link">&para;</a></h2> <ul> <li>Расширяет: <a href=../stream/#streamreadable><code>&lt;stream.Readable&gt;</code></a></li> </ul> <p>Объект <code>IncomingMessage</code> создается <a href=#httpserver><code>http.Server</code></a> или <a href=#httpclientrequest><code>http.ClientRequest</code></a> и передается в качестве первого аргумента в события <a href=#request><code>'request'</code></a> и <a href=#response><code>'response'</code></a> соответственно. Он может быть использован для доступа к статусу ответа, заголовкам и данным.</p> <p>В отличие от своего значения <code>socket</code>, которое является подклассом {stream.Duplex}, само <code>IncomingMessage</code> расширяет <a href=../stream/#streamreadable><code>&lt;stream.Readable&gt;</code></a> и создается отдельно для разбора и выдачи входящих HTTP-заголовков и полезной нагрузки, поскольку базовый сокет может быть использован многократно в случае keep-alive.</p> <h3 id=aborted>Событие: aborted<a class=headerlink href=#aborted title="Permanent link">&para;</a></h3> <div class="admonition danger"> <p class=admonition-title>Стабильность: 0 – устарело или набрало много негативных отзывов</p> <p>Эта фича является проблемной и ее планируют изменить. Не стоит полагаться на нее. Использование фичи может вызвать ошибки. Не стоит ожидать от нее обратной совместимости.</p> <p>Вместо этого слушайте событие <code>'close'</code>.</p> </div> <p>Выдается, когда запрос был прерван.</p> <h3 id=close_3>Событие: close<a class=headerlink href=#close_3 title="Permanent link">&para;</a></h3> <p>Выдается, когда запрос завершен.</p> <h3 id=messageaborted>message.aborted<a class=headerlink href=#messageaborted title="Permanent link">&para;</a></h3> <div class="admonition danger"> <p class=admonition-title>Стабильность: 0 – устарело или набрало много негативных отзывов</p> <p>Эта фича является проблемной и ее планируют изменить. Не стоит полагаться на нее. Использование фичи может вызвать ошибки. Не стоит ожидать от нее обратной совместимости.</p> <p>Проверьте <code>message.destroyed</code> из {stream.Readable}.</p> </div> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a>.</li> </ul> <p>Свойство <code>message.aborted</code> будет <code>true</code>, если запрос был прерван.</p> <h3 id=messagecomplete>message.complete<a class=headerlink href=#messagecomplete title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Свойство <code>message.complete</code> будет иметь значение <code>true</code>, если было получено и успешно разобрано полное HTTP-сообщение.</p> <p>Это свойство особенно полезно как средство определения того, полностью ли клиент или сервер передал сообщение до того, как соединение было разорвано:</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>req</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>request</span><span class=p>(</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>        </span><span class=nx>host</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;127.0.0.1&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>port</span><span class=o>:</span><span class=w> </span><span class=mf>8080</span><span class=p>,</span>
<span class=w>        </span><span class=nx>method</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;POST&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=p>(</span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>res</span><span class=p>.</span><span class=nx>resume</span><span class=p>();</span>
<span class=w>        </span><span class=nx>res</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;end&#39;</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=nx>res</span><span class=p>.</span><span class=nx>complete</span><span class=p>)</span>
<span class=w>                </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span>
<span class=w>                    </span><span class=s1>&#39;The connection was terminated while the message was still being sent&#39;</span>
<span class=w>                </span><span class=p>);</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>);</span>
</code></pre></div></td></tr></table></div> <h3 id=messageconnection>message.connection<a class=headerlink href=#messageconnection title="Permanent link">&para;</a></h3> <div class="admonition danger"> <p class=admonition-title>Стабильность: 0 – устарело или набрало много негативных отзывов</p> <p>Эта фича является проблемной и ее планируют изменить. Не стоит полагаться на нее. Использование фичи может вызвать ошибки. Не стоит ожидать от нее обратной совместимости.</p> <p>Используйте <a href=#messagesocket><code>message.socket</code></a>.</p> </div> <p>Псевдоним для <a href=#messagesocket><code>message.socket</code></a>.</p> <h3 id=messagedestroy>message.destroy<a class=headerlink href=#messagedestroy title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>message</span><span class=p>.</span><span class=nx>destroy</span><span class=p>([</span><span class=nx>error</span><span class=p>]);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>error</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error><code>&lt;Error&gt;</code></a></li> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/this><code>&lt;this&gt;</code></a></li> </ul> <p>Вызывает <code>destroy()</code> на сокете, который получил <code>IncomingMessage</code>. Если указано <code>error</code>, то на сокете испускается событие <code>'error</code>, а <code>error</code> передается в качестве аргумента всем слушателям этого события.</p> <h3 id=messageheaders>message.headers<a class=headerlink href=#messageheaders title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a></li> </ul> <p>Объект заголовков запроса/ответа.</p> <p>Пары ключ-значение имен и значений заголовков. Имена заголовков приводятся в нижнем регистре.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div><pre><span></span><code><span class=c1>// Выводит что-то вроде:</span>
<span class=c1>//</span>
<span class=c1>// { { &#39;user-agent&#39;: &#39;curl/7.22.0&#39;,</span>
<span class=c1>// host: &#39;127.0.0.1:8000&#39;,</span>
<span class=c1>// accept: &#39;*/*&#39; }</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>headers</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <p>Дубликаты в необработанных заголовках обрабатываются следующими способами, в зависимости от имени заголовка:</p> <ul> <li>Дубликаты <code>age</code>, <code>authorization</code>, <code>content-length</code>, <code>content-type</code>, <code>etag</code>, <code>expires</code>, <code>from</code>, <code>host</code>, <code>if-modified-since</code>, <code>if-unmodified-since</code>, <code>last-modified</code>, <code>location</code>, <code>max-forwards</code>, <code>proxy-authorization</code>, <code>referer</code>, <code>retry-after</code>, <code>server</code> или <code>user-agent</code> отбрасываются. Чтобы разрешить объединение дубликатов перечисленных выше заголовков, используйте опцию <code>joinDuplicateHeaders</code> в <a href=#httprequestoptions-callback><code>http.request()</code></a> и <a href=#httpcreateserveroptions-requestlistener><code>http.createServer()</code></a>. См. RFC 9110 Раздел 5.3 для получения дополнительной информации.</li> <li><code>set-cookie</code> - это всегда массив. Дубликаты добавляются в массив.</li> <li>Для дублирующихся заголовков <code>cookie</code> значения объединяются с помощью <code>;</code>.</li> <li>Для всех остальных заголовков значения объединяются с помощью <code>,</code>.</li> </ul> <h3 id=messageheadersdistinct>message.headersDistinct<a class=headerlink href=#messageheadersdistinct title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a></li> </ul> <p>Аналогично <a href=#messageheaders><code>message.headers</code></a>, но нет логики объединения и значения всегда являются массивами строк, даже для заголовков, полученных только один раз.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div><pre><span></span><code><span class=c1>// Выводит что-то вроде:</span>
<span class=c1>//</span>
<span class=c1>// { &#39;user-agent&#39;: [&#39;curl/7.22.0&#39;],</span>
<span class=c1>// host: [&#39;127.0.0.1:8000&#39;],</span>
<span class=c1>// accept: [&#39;*/*&#39;] }</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>headersDistinct</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <h3 id=messagehttpversion>message.httpVersion<a class=headerlink href=#messagehttpversion title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> </ul> <p>В случае запроса сервера, версия HTTP, отправленная клиентом. В случае ответа клиента, версия HTTP подключенного сервера. Возможно, либо <code>'1.1'</code>, либо <code>'1.0'</code>.</p> <p>Также <code>message.httpVersionMajor</code> является первым целым числом, а <code>message.httpVersionMinor</code> - вторым.</p> <h3 id=messagemethod>message.method<a class=headerlink href=#messagemethod title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> </ul> <p><strong>Действителен только для запроса, полученного с <a href=#httpserver><code>http.Server</code></a>.</strong>.</p> <p>Метод запроса в виде строки. Только для чтения. Примеры: <code>'GET'</code>, <code>'DELETE'</code>.</p> <h3 id=messagerawheaders>message.rawHeaders<a class=headerlink href=#messagerawheaders title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string[]&gt;</code></a></li> </ul> <p>Список необработанных заголовков запроса/ответа в том виде, в котором они были получены.</p> <p>Ключи и значения находятся в одном списке. Это <em>не</em> список кортежей. Таким образом, четные смещения - это значения ключей, а нечетные смещения - связанные с ними значения.</p> <p>Имена заголовков не выделяются нижним регистром, а дубликаты не объединяются.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span class=c1>// Выводит что-то вроде:</span>
<span class=c1>//</span>
<span class=c1>// [ &#39;user-agent&#39;,</span>
<span class=c1>// &#39;this is invalid because there can be only one&#39;,</span>
<span class=c1>// &#39;User-Agent&#39;,</span>
<span class=c1>// &#39;curl/7.22.0&#39;,</span>
<span class=c1>// &#39;Host&#39;,</span>
<span class=c1>// &#39;127.0.0.1:8000&#39;,</span>
<span class=c1>// &#39;ACCEPT&#39;,</span>
<span class=c1>// &#39;*/*&#39; ]</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>rawHeaders</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <h3 id=messagerawtrailers>message.rawTrailers<a class=headerlink href=#messagerawtrailers title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string[]&gt;</code></a></li> </ul> <p>Необработанные ключи и значения трейлеров запроса/ответа точно в том виде, в котором они были получены. Заполняются только при событии <code>конец</code>.</p> <h3 id=messagesettimeout>message.setTimeout<a class=headerlink href=#messagesettimeout title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>message</span><span class=p>.</span><span class=nx>setTimeout</span><span class=p>(</span><span class=nx>msecs</span><span class=p>[,</span><span class=w> </span><span class=nx>callback</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>msecs</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a></li> <li><code>callback</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function><code>&lt;Function&gt;</code></a></li> <li>Возвращает: {http.IncomingMessage}</li> </ul> <p>Вызывает <code>message.socket.setTimeout(msecs, callback)</code>.</p> <h3 id=messagesocket>message.socket<a class=headerlink href=#messagesocket title="Permanent link">&para;</a></h3> <ul> <li>{stream.Duplex}</li> </ul> <p>Объект <a href=../net/#class-netsocket><code>net.Socket</code></a>, связанный с соединением.</p> <p>При поддержке HTTPS используйте <a href=../tls/#tlssocketgetpeercertificatedetailed><code>request.socket.getPeerCertificate()</code></a> для получения аутентификационных данных клиента.</p> <p>Это свойство гарантированно является экземпляром класса <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>, подкласса {stream.Duplex}, если пользователь не указал тип сокета, отличный от <a href=../net/#netsocket><code>&lt;net.Socket&gt;</code></a>, или не обнулен внутренне.</p> <h3 id=messagestatuscode>message.statusCode<a class=headerlink href=#messagestatuscode title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a></li> </ul> <p><strong>Действительно только для ответа, полученного от <a href=#httpclientrequest><code>http.ClientRequest</code></a>.</strong>.</p> <p>Трехзначный код состояния ответа HTTP. НАПРИМЕР, <code>404</code>.</p> <h3 id=messagestatusmessage>message.statusMessage<a class=headerlink href=#messagestatusmessage title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> </ul> <p><strong>Действительно только для ответа, полученного из <a href=#httpclientrequest><code>http.ClientRequest</code></a>.</strong>.</p> <p>Сообщение о статусе ответа HTTP (фраза причины). Например, <code>OK</code> или <code>Internal Server Error</code>.</p> <h3 id=messagetrailers>message.trailers<a class=headerlink href=#messagetrailers title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a></li> </ul> <p>Объект трейлеров запроса/ответа. Заполняется только при событии <code>end</code>.</p> <h3 id=messagetrailersdistinct>message.trailersDistinct<a class=headerlink href=#messagetrailersdistinct title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a></li> </ul> <p>Аналогичен <a href=#messagetrailers><code>message.trailers</code></a>, но здесь нет логики объединения и значения всегда являются массивами строк, даже для заголовков, полученных только один раз. Заполняется только при событии <code>end</code>.</p> <h3 id=messageurl>message.url<a class=headerlink href=#messageurl title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> </ul> <p><strong>Действительно только для запроса, полученного с <a href=#httpserver><code>http.Server</code></a>.</strong>.</p> <p>Строка URL запроса. Она содержит только тот URL, который присутствует в фактическом HTTP-запросе. Возьмем следующий запрос:</p> <div class="language-http highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nf>GET</span> <span class=nn>/status?name=ryan</span> <span class=kr>HTTP</span><span class=o>/</span><span class=m>1.1</span>
<span class=na>Accept</span><span class=o>:</span> <span class=l>text/plain</span>
</code></pre></div></td></tr></table></div> <p>Разберем URL на части:</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=ow>new</span><span class=w> </span><span class=nx>URL</span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>url</span><span class=p>,</span><span class=w> </span><span class=sb>`http://</span><span class=si>${</span><span class=nx>request</span><span class=p>.</span><span class=nx>headers</span><span class=p>.</span><span class=nx>host</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <p>Когда <code>request.url</code> будет <code>'/status?name=ryan'</code> и <code>request.headers.host</code> будет <code>'localhost:3000'</code>:</p> <div class="language-console highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span></pre></div></td><td class=code><div><pre><span></span><code><span class=gp>$ </span>node
<span class=go>&gt; new URL(request.url, `http://${request.headers.host}`)</span>
<span class=go>URL {</span>
<span class=go>  href: &#39;http://localhost:3000/status?name=ryan&#39;,</span>
<span class=go>  origin: &#39;http://localhost:3000&#39;,</span>
<span class=go>  protocol: &#39;http:&#39;,</span>
<span class=go>  username: &#39;&#39;,</span>
<span class=go>  password: &#39;&#39;,</span>
<span class=go>  host: &#39;localhost:3000&#39;,</span>
<span class=go>  hostname: &#39;localhost&#39;,</span>
<span class=go>  port: &#39;3000&#39;,</span>
<span class=go>  pathname: &#39;/status&#39;,</span>
<span class=go>  search: &#39;?name=ryan&#39;,</span>
<span class=go>  searchParams: URLSearchParams { &#39;name&#39; =&gt; &#39;ryan&#39; },</span>
<span class=go>  hash: &#39;&#39;</span>
<span class=go>}</span>
</code></pre></div></td></tr></table></div> <h2 id=httpoutgoingmessage>http.OutgoingMessage<a class=headerlink href=#httpoutgoingmessage title="Permanent link">&para;</a></h2> <ul> <li>Расширяет: <a href=../stream/#stream><code>&lt;Stream&gt;</code></a></li> </ul> <p>Этот класс служит в качестве родительского класса для <a href=#httpclientrequest><code>http.ClientRequest</code></a> и <a href=#httpserverresponse><code>http.ServerResponse</code></a>. Это абстрактное исходящее сообщение с точки зрения участников HTTP-транзакции.</p> <h3 id=drain>Событие: drain<a class=headerlink href=#drain title="Permanent link">&para;</a></h3> <p>Выдается, когда буфер сообщения снова свободен.</p> <h3 id=finish_2>Событие: finish<a class=headerlink href=#finish_2 title="Permanent link">&para;</a></h3> <p>Выдается при успешном завершении передачи.</p> <h3 id=prefinish>Событие: prefinish<a class=headerlink href=#prefinish title="Permanent link">&para;</a></h3> <p>Вызывается после вызова функции <code>outgoingMessage.end()</code>. Когда это событие происходит, все данные были обработаны, но не обязательно полностью смыты.</p> <h3 id=outgoingmessageaddtrailers>outgoingMessage.addTrailers<a class=headerlink href=#outgoingmessageaddtrailers title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>addTrailers</span><span class=p>(</span><span class=nx>headers</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>headers</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a></li> </ul> <p>Добавляет HTTP трейлеры (заголовки, но в конце сообщения) к сообщению.</p> <p>Трейлеры будут <strong>только</strong> если сообщение закодировано в виде чанков. В противном случае трейлеры будут молча отброшены.</p> <p>HTTP требует отправки заголовка <code>Trailer</code> для создания трейлеров, в значении которого содержится список имен полей заголовка, например.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>message</span><span class=p>.</span><span class=nx>writeHead</span><span class=p>(</span><span class=mf>200</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;text/plain&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=nx>Trailer</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;Content-MD5&#39;</span><span class=p>,</span>
<span class=p>});</span>
<span class=nx>message</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=nx>fileData</span><span class=p>);</span>
<span class=nx>message</span><span class=p>.</span><span class=nx>addTrailers</span><span class=p>({</span>
<span class=w>    </span><span class=s1>&#39;Content-MD5&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;7895bf4b8828b55ceaf47747b4bca667&#39;</span><span class=p>,</span>
<span class=p>});</span>
<span class=nx>message</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>Попытка установить имя или значение поля заголовка, содержащее недопустимые символы, приведет к возникновению ошибки <code>TypeError</code>.</p> <h3 id=outgoingmessageappendheader>outgoingMessage.appendHeader<a class=headerlink href=#outgoingmessageappendheader title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>appendHeader</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span><span class=w> </span><span class=nx>value</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>name</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> имя заголовка</li> <li><code>value</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> | <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string[]&gt;</code></a> Значение заголовка</li> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/this><code>&lt;this&gt;</code></a></li> </ul> <p>Добавляет одно значение заголовка для объекта заголовка.</p> <p>Если значение является массивом, это эквивалентно вызову этого метода несколько раз.</p> <p>Если предыдущего значения для заголовка не было, это эквивалентно вызову <a href=#outgoingmessagesetheader><code>outgoingMessage.setHeader(name, value)</code></a>.</p> <p>В зависимости от значения параметра <code>options.uniqueHeaders</code> при создании клиентского запроса или сервера, заголовок будет отправлен несколько раз или один раз со значениями, объединенными с помощью <code>;</code>.</p> <h3 id=outgoingmessageconnection>outgoingMessage.connection<a class=headerlink href=#outgoingmessageconnection title="Permanent link">&para;</a></h3> <div class="admonition danger"> <p class=admonition-title>Стабильность: 0 – устарело или набрало много негативных отзывов</p> <p>Эта фича является проблемной и ее планируют изменить. Не стоит полагаться на нее. Использование фичи может вызвать ошибки. Не стоит ожидать от нее обратной совместимости.</p> <p>Используйте <a href=#outgoingmessagesocket><code>outgoingMessage.socket</code></a> вместо этого.</p> </div> <p>Псевдоним <a href=#outgoingmessagesocket><code>outgoingMessage.socket</code></a>.</p> <h3 id=outgoingmessagecork>outgoingMessage.cork<a class=headerlink href=#outgoingmessagecork title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>cork</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>См. <a href=../stream/#writablecork><code>writable.cork()</code></a>.</p> <h3 id=outgoingmessagedestroy>outgoingMessage.destroy<a class=headerlink href=#outgoingmessagedestroy title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>destroy</span><span class=p>([</span><span class=nx>error</span><span class=p>]);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>error</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error><code>&lt;Error&gt;</code></a> Необязательно, ошибка, которую нужно выдать с событием <code>error</code>.</li> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/this><code>&lt;this&gt;</code></a></li> </ul> <p>Уничтожает сообщение. Если сокет связан с сообщением и подключен, этот сокет также будет уничтожен.</p> <h3 id=outgoingmessageend>outgoingMessage.end<a class=headerlink href=#outgoingmessageend title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>end</span><span class=p>(</span><span class=nx>chunk</span><span class=p>[,</span><span class=w> </span><span class=nx>encoding</span><span class=p>][,</span><span class=w> </span><span class=nx>callback</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>chunk</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> | <a href=../buffer/#buffer><code>&lt;Buffer&gt;</code></a> | <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array><code>&lt;Uint8Array&gt;</code></a></li> <li><code>encoding</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> Необязательно, <strong>по умолчанию</strong>: <code>utf8</code></li> <li><code>callback</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function><code>&lt;Function&gt;</code></a> Необязательно</li> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/this><code>&lt;this&gt;</code></a></li> </ul> <p>Завершает исходящее сообщение. Если какие-либо части тела остались неотправленными, то они будут переданы в базовую систему. Если сообщение разбито на части, будет отправлен завершающий фрагмент <code>0\r\n\r\n</code>, и отправлены трейлеры (если они есть).</p> <p>Если указано <code>chunk</code>, это эквивалентно вызову <code>outgoingMessage.write(chunk, encoding)</code>, за которым следует <code>outgoingMessage.end(callback)</code>.</p> <p>Если указан <code>callback</code>, он будет вызван, когда сообщение будет завершено (эквивалентно слушателю события <code>'finish'</code>).</p> <h3 id=outgoingmessageflushheaders>outgoingMessage.flushHeaders<a class=headerlink href=#outgoingmessageflushheaders title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>flushHeaders</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>Смывает заголовки сообщений.</p> <p>По причине эффективности Node.js обычно буферизирует заголовки сообщений до тех пор, пока не будет вызвана функция <code>outgoingMessage.end()</code> или не будет записан первый фрагмент данных сообщения. Затем он пытается упаковать заголовки и данные в один TCP-пакет.</p> <p>Обычно это желательно (это экономит время прохождения TCP), но не тогда, когда первые данные не будут отправлены, возможно, намного позже. Функция <code>outgoingMessage.flushHeaders()</code> обходит оптимизацию и запускает сообщение.</p> <h3 id=outgoingmessagegetheader>outgoingMessage.getHeader<a class=headerlink href=#outgoingmessagegetheader title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>getHeader</span><span class=p>(</span><span class=nx>name</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>name</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> Имя заголовка</li> <li>Возвращает <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> | <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Undefined_type><code>&lt;undefined&gt;</code></a></li> </ul> <p>Получает значение HTTP-заголовка с заданным именем. Если этот заголовок не установлен, возвращаемое значение будет <code>undefined</code>.</p> <h3 id=outgoingmessagegetheadernames>outgoingMessage.getHeaderNames<a class=headerlink href=#outgoingmessagegetheadernames title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>getHeaderNames</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <ul> <li>Возвращает <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string[]&gt;</code></a></li> </ul> <p>Возвращает массив, содержащий уникальные имена текущих заголовков исходящих сообщений. Все имена в нижнем регистре.</p> <h3 id=outgoingmessagegetheaders>outgoingMessage.getHeaders<a class=headerlink href=#outgoingmessagegetheaders title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>getHeaders</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <ul> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a></li> </ul> <p>Возвращает неглубокую копию текущих заголовков исходящего сообщения. Поскольку используется неглубокая копия, значения массива могут быть изменены без дополнительных вызовов различных методов модуля HTTP, связанных с заголовками. Ключами возвращаемого объекта являются имена заголовков, а значениями - соответствующие значения заголовков. Все имена заголовков пишутся в нижнем регистре.</p> <p>Объект, возвращаемый методом <code>outgoingMessage.getHeaders()</code>, прототипически не наследует от JavaScript <code>Object</code>. Это означает, что типичные методы <code>Object</code>, такие как <code>obj.toString()</code>, <code>obj.hasOwnProperty()</code> и другие, не определены и не будут работать.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Foo&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;bar&#39;</span><span class=p>);</span>
<span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Set-Cookie&#39;</span><span class=p>,</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=s1>&#39;foo=bar&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=s1>&#39;bar=baz&#39;</span><span class=p>,</span>
<span class=p>]);</span>

<span class=kd>const</span><span class=w> </span><span class=nx>headers</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>getHeaders</span><span class=p>();</span>
<span class=c1>// headers === { foo: &#39;bar&#39;, &#39;set-cookie&#39;: [&#39;foo=bar&#39;, &#39;bar=baz&#39;] }</span>
</code></pre></div></td></tr></table></div> <h3 id=outgoingmessagehasheader>outgoingMessage.hasHeader<a class=headerlink href=#outgoingmessagehasheader title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>hasHeader</span><span class=p>(</span><span class=nx>name</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>name</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> <li>Возвращает <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Возвращает <code>true</code>, если заголовок, обозначенный <code>name</code>, в настоящее время установлен в исходящих заголовках. Имя заголовка не чувствительно к регистру.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>hasContentType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>hasHeader</span><span class=p>(</span>
<span class=w>    </span><span class=s1>&#39;content-type&#39;</span>
<span class=p>);</span>
</code></pre></div></td></tr></table></div> <h3 id=outgoingmessageheaderssent>outgoingMessage.headersSent<a class=headerlink href=#outgoingmessageheaderssent title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Только для чтения. <code>true</code>, если заголовки были отправлены, иначе <code>false</code>.</p> <h3 id=outgoingmessagepipe>outgoingMessage.pipe<a class=headerlink href=#outgoingmessagepipe title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>pipe</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>Переопределяет метод <code>stream.pipe()</code>, унаследованный от унаследованного класса <code>Stream</code>, который является родительским классом <code>http.OutgoingMessage</code>.</p> <p>Вызов этого метода вызовет <code>ошибку</code>, поскольку <code>outgoingMessage</code> является потоком только для записи.</p> <h3 id=outgoingmessageremoveheader>outgoingMessage.removeHeader<a class=headerlink href=#outgoingmessageremoveheader title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>removeHeader</span><span class=p>(</span><span class=nx>name</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>name</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> Имя заголовка</li> </ul> <p>Удаляет заголовок, который находится в очереди на неявную отправку.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>removeHeader</span><span class=p>(</span><span class=s1>&#39;Content-Encoding&#39;</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <h3 id=outgoingmessagesetheader>outgoingMessage.setHeader<a class=headerlink href=#outgoingmessagesetheader title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span><span class=w> </span><span class=nx>value</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>name</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> Имя заголовка</li> <li><code>value</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Data_types><code>&lt;any&gt;</code></a> Значение заголовка</li> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/this><code>&lt;this&gt;</code></a></li> </ul> <p>Устанавливает одно значение заголовка. Если заголовок уже существует в отправляемых заголовках, его значение будет заменено. Используйте массив строк для отправки нескольких заголовков с одинаковым именем.</p> <h3 id=outgoingmessagesetheaders>outgoingMessage.setHeaders<a class=headerlink href=#outgoingmessagesetheaders title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>setHeaders</span><span class=p>(</span><span class=nx>headers</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>headers</code> {Headers} | {Map}</li> <li>Возвращает: {http.ServerResponse}</li> </ul> <p>Возвращает объект ответа.</p> <p>Устанавливает несколько значений заголовков для неявных заголовков. <code>headers</code> должен быть экземпляром <a href=../globals/#class-headers><code>Headers</code></a> или <code>Map</code>, если заголовок уже существует в отправляемых заголовках, его значение будет заменено.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>headers</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Headers</span><span class=p>({</span><span class=w> </span><span class=nx>foo</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;bar&#39;</span><span class=w> </span><span class=p>});</span>
<span class=nx>response</span><span class=p>.</span><span class=nx>setHeaders</span><span class=p>(</span><span class=nx>headers</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <p>или</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>headers</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nb>Map</span><span class=p>([[</span><span class=s1>&#39;foo&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;bar&#39;</span><span class=p>]]);</span>
<span class=nx>res</span><span class=p>.</span><span class=nx>setHeaders</span><span class=p>(</span><span class=nx>headers</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <p>Когда заголовки были установлены с помощью <a href=#outgoingmessagesetheaders><code>outgoingMessage.setHeaders()</code></a>, они будут объединены с любыми заголовками, переданными в <a href=#responsewritehead><code>response.writeHead()</code></a>, причем заголовки, переданные в <a href=#responsewritehead><code>response.writeHead()</code></a>, будут иметь приоритет.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span class=c1>// Возвращает content-type = text/plain</span>
<span class=kd>const</span><span class=w> </span><span class=nx>server</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>createServer</span><span class=p>((</span><span class=nx>req</span><span class=p>,</span><span class=w> </span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>headers</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Headers</span><span class=p>({</span>
<span class=w>        </span><span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;text/html&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>setHeaders</span><span class=p>(</span><span class=nx>headers</span><span class=p>);</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>writeHead</span><span class=p>(</span><span class=mf>200</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;text/plain&#39;</span><span class=w> </span><span class=p>});</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>end</span><span class=p>(</span><span class=s1>&#39;ok&#39;</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div></td></tr></table></div> <h3 id=outgoingmessagesettimeout>outgoingMessage.setTimeout<a class=headerlink href=#outgoingmessagesettimeout title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>setTimeout</span><span class=p>(</span><span class=nx>msesc</span><span class=p>[,</span><span class=w> </span><span class=nx>callback</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>msesc</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a></li> <li><code>callback</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function><code>&lt;Function&gt;</code></a> Необязательная функция, которая будет вызываться при возникновении тайм-аута. Аналогично привязке к событию <code>timeout</code>.</li> <li>Возвращает: <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/this><code>&lt;this&gt;</code></a></li> </ul> <p>Когда сокет связан с сообщением и подключен, будет вызвана функция <a href=../net/#socketsettimeouttimeout-callback><code>socket.setTimeout()</code></a> с <code>msecs</code> в качестве первого параметра.</p> <h3 id=outgoingmessagesocket>outgoingMessage.socket<a class=headerlink href=#outgoingmessagesocket title="Permanent link">&para;</a></h3> <ul> <li>{stream.Duplex}</li> </ul> <p>Ссылка на базовый сокет. Обычно пользователи не хотят обращаться к этому свойству.</p> <p>После вызова <code>outgoingMessage.end()</code> это свойство будет обнулено.</p> <h3 id=outgoingmessageuncork>outgoingMessage.uncork<a class=headerlink href=#outgoingmessageuncork title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>uncork</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>См. <a href=../stream/#writableuncork><code>writable.uncork()</code></a></p> <h3 id=outgoingmessagewritablecorked>outgoingMessage.writableCorked<a class=headerlink href=#outgoingmessagewritablecorked title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a></li> </ul> <p>Количество раз, когда <code>outgoingMessage.cork()</code> был вызван.</p> <h3 id=outgoingmessagewritableended>outgoingMessage.writableEnded<a class=headerlink href=#outgoingmessagewritableended title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Является <code>true</code>, если была вызвана функция <code>outgoingMessage.end()</code>. Это свойство не указывает, были ли данные удалены. Для этого используйте <code>message.writableFinished</code>.</p> <h3 id=outgoingmessagewritablefinished>outgoingMessage.writableFinished<a class=headerlink href=#outgoingmessagewritablefinished title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Является <code>true</code>, если все данные были переданы в базовую систему.</p> <h3 id=outgoingmessagewritablehighwatermark>outgoingMessage.writableHighWaterMark<a class=headerlink href=#outgoingmessagewritablehighwatermark title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a></li> </ul> <p><code>highWaterMark</code> базового сокета, если он назначен. Иначе, уровень буфера по умолчанию, когда <a href=../stream/#writablewritechunk-encoding-callback><code>writable.write()</code></a> начинает возвращать false (<code>16384</code>).</p> <h3 id=outgoingmessagewritablelength>outgoingMessage.writableLength<a class=headerlink href=#outgoingmessagewritablelength title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a></li> </ul> <p>Количество буферизованных байтов.</p> <h3 id=outgoingmessagewritableobjectmode>outgoingMessage.writableObjectMode<a class=headerlink href=#outgoingmessagewritableobjectmode title="Permanent link">&para;</a></h3> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Всегда <code>false</code>.</p> <h3 id=outgoingmessagewrite>outgoingMessage.write<a class=headerlink href=#outgoingmessagewrite title="Permanent link">&para;</a></h3> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>outgoingMessage</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=nx>chunk</span><span class=p>[,</span><span class=w> </span><span class=nx>encoding</span><span class=p>][,</span><span class=w> </span><span class=nx>callback</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>chunk</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> | <a href=../buffer/#buffer><code>&lt;Buffer&gt;</code></a> | <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array><code>&lt;Uint8Array&gt;</code></a></li> <li><code>encoding</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> <strong>По умолчанию</strong>: <code>utf8</code></li> <li><code>callback</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function><code>&lt;Function&gt;</code></a></li> <li>Возвращает <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a></li> </ul> <p>Отправляет фрагмент тела. Этот метод может быть вызван несколько раз.</p> <p>Аргумент <code>encoding</code> имеет значение только тогда, когда <code>chunk</code> является строкой. По умолчанию это <code>'utf8</code>.</p> <p>Аргумент <code>callback</code> является необязательным и будет вызван, когда этот фрагмент данных будет удален.</p> <p>Возвращает <code>true</code>, если все данные были успешно сброшены в буфер ядра. Возвращает <code>false</code>, если все данные или их часть были помещены в пользовательскую память. Событие `'drain'' будет выдано, когда буфер снова освободится.</p> <h2 id=httpmethods>http.METHODS<a class=headerlink href=#httpmethods title="Permanent link">&para;</a></h2> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string[]&gt;</code></a></li> </ul> <p>Список методов HTTP, которые поддерживаются парсером.</p> <h2 id=httpstatus_codes>http.STATUS_CODES<a class=headerlink href=#httpstatus_codes title="Permanent link">&para;</a></h2> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a></li> </ul> <p>Коллекция всех стандартных кодов состояния ответа HTTP и краткое описание каждого из них. Например, <code>http.STATUS_CODES[404] === 'Not Found'</code>.</p> <h2 id=httpcreateserver>http.createServer<a class=headerlink href=#httpcreateserver title="Permanent link">&para;</a></h2> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>http</span><span class=p>.</span><span class=nx>createServer</span><span class=p>([</span><span class=nx>options</span><span class=p>][,</span><span class=w> </span><span class=nx>requestListener</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <ul> <li> <p><code>options</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a></p> <ul> <li><code>connectionsCheckingInterval</code>: Устанавливает значение интервала в миллисекундах для проверки таймаута запроса и заголовков в неполных запросах. <strong>По умолчанию:</strong> <code>30000</code>.</li> <li><code>headersTimeout</code>: Устанавливает значение таймаута в миллисекундах для получения полных заголовков HTTP от клиента. Дополнительную информацию смотрите в <a href=#serverheaderstimeout><code>server.headersTimeout</code></a>. <strong>По умолчанию:</strong> <code>60000</code>.</li> <li><code>insecureHTTPParser</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a> Использовать небезопасный парсер HTTP, который принимает недействительные заголовки HTTP, если <code>true</code>. Следует избегать использования небезопасного парсера. Дополнительную информацию смотрите в <a href=../cli/#--insecure-http-parser><code>--insecure-http-parser</code></a>. <strong>По умолчанию:</strong> <code>false</code>.</li> <li><code>IncomingMessage</code> {http.IncomingMessage} Определяет класс <code>IncomingMessage</code>, который будет использоваться. Полезно для расширения оригинального <code>IncomingMessage</code>. <strong>По умолчанию:</strong> <code>IncomingMessage</code>.</li> <li><code>keepAlive</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a> Если установлено значение <code>true</code>, это включает функцию keep-alive на сокете сразу после получения нового входящего соединения, аналогично тому, как это делается в [<code>socket.setKeepAlive([enable][, initialDelay])</code>][<code>socket.setKeepAlive(enable, initialDelay)</code>]. <strong>По умолчанию:</strong> <code>false</code>.</li> <li><code>keepAliveInitialDelay</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> Если задано положительное число, оно устанавливает начальную задержку перед отправкой первого зонда keepalive на неработающем сокете. <strong>По умолчанию:</strong> <code>0</code>.</li> <li><code>keepAliveTimeout</code>: Количество миллисекунд бездействия, в течение которых сервер должен ожидать поступления дополнительных данных, после того как он закончил писать последний ответ, прежде чем сокет будет уничтожен. Дополнительную информацию смотрите в <a href=#serverkeepalivetimeout><code>server.keepAliveTimeout</code></a>. <strong>По умолчанию:</strong> <code>5000</code>.</li> <li><code>maxHeaderSize</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> Опционально переопределяет значение параметра <a href=../cli/#--max-http-header-sizesize><code>--max-http-header-size</code></a> для запросов, полученных этим сервером, т.е. максимальную длину заголовков запроса в байтах. <strong>По умолчанию:</strong> 16384 (16 KiB).</li> <li><code>noDelay</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a> Если установлено значение <code>true</code>, то отключает использование алгоритма Нагла сразу после получения нового входящего соединения. <strong>По умолчанию:</strong> <code>true</code>.</li> <li><code>requestTimeout</code>: Устанавливает значение таймаута в миллисекундах для получения всего запроса от клиента. Дополнительную информацию смотрите в <a href=#serverrequesttimeout><code>server.requestTimeout</code></a>. <strong>По умолчанию:</strong> <code>300000</code>.</li> <li><code>requireHostHeader</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a> Заставляет сервер отвечать кодом состояния 400 (Bad Request) на любой запрос HTTP/1.1, в котором отсутствует заголовок Host (как предписано спецификацией). <strong>По умолчанию:</strong> <code>true</code>.</li> <li><code>joinDuplicateHeaders</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a> Объединяет значения строк полей нескольких заголовков в запросе с помощью <code>,</code> вместо того, чтобы отбрасывать дубликаты. Более подробную информацию смотрите в <a href=#messageheaders><code>message.headers</code></a>. <strong>По умолчанию:</strong> <code>false</code>.</li> <li><code>ServerResponse</code> {http.ServerResponse} Определяет класс <code>ServerResponse</code>, который будет использоваться. Полезен для расширения оригинального <code>ServerResponse</code>. <strong>По умолчанию:</strong> <code>ServerResponse</code>.</li> <li><code>uniqueHeaders</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array><code>&lt;Array&gt;</code></a> Список заголовков ответа, которые должны быть отправлены только один раз. Если значение заголовка представляет собой массив, элементы будут объединены с помощью <code>;</code>.</li> </ul> </li> <li> <p><code>requestListener</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function><code>&lt;Function&gt;</code></a></p> </li> <li> <p>Возвращает: {http.Server}</p> </li> </ul> <p>Возвращает новый экземпляр <a href=#httpserver><code>http.Server</code></a>.</p> <p><code>requestListener</code> - это функция, которая автоматически добавляется к событию <a href=#event-request><code>'request'</code></a>.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>http</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;node:http&#39;</span><span class=p>);</span>

<span class=c1>// Создаем локальный сервер для получения данных</span>
<span class=kd>const</span><span class=w> </span><span class=nx>server</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>createServer</span><span class=p>((</span><span class=nx>req</span><span class=p>,</span><span class=w> </span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>writeHead</span><span class=p>(</span><span class=mf>200</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;application/json&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>end</span><span class=p>(</span>
<span class=w>        </span><span class=nb>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>({</span>
<span class=w>            </span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;Hello World!&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>})</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>});</span>

<span class=nx>server</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mf>8000</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <hr> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>http</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;node:http&#39;</span><span class=p>);</span>

<span class=c1>// Создаем локальный сервер для получения данных</span>
<span class=kd>const</span><span class=w> </span><span class=nx>server</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>createServer</span><span class=p>();</span>

<span class=c1>// Прослушиваем событие запроса</span>
<span class=nx>server</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;request&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>request</span><span class=p>,</span><span class=w> </span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>writeHead</span><span class=p>(</span><span class=mf>200</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;application/json&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>end</span><span class=p>(</span>
<span class=w>        </span><span class=nb>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>({</span>
<span class=w>            </span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;Hello World!&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>})</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>});</span>

<span class=nx>server</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mf>8000</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <h2 id=httpget>http.get<a class=headerlink href=#httpget title="Permanent link">&para;</a></h2> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>options</span><span class=p>[,</span><span class=w> </span><span class=nx>callback</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>url</span><span class=p>[,</span><span class=w> </span><span class=nx>options</span><span class=p>][,</span><span class=w> </span><span class=nx>callback</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>url</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> | <a href=../url/#the-whatwg-url-api><code>&lt;URL&gt;</code></a></li> <li><code>options</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a> Принимает те же <code>options</code>, что и <a href=#httprequestoptions-callback><code>http.request()</code></a>, с <code>method</code>, всегда установленным на <code>GET</code>. Свойства, унаследованные от прототипа, игнорируются.</li> <li><code>callback</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function><code>&lt;Function&gt;</code></a></li> <li>Возвращает: {http.ClientRequest}</li> </ul> <p>Поскольку большинство запросов - это GET-запросы без тела, Node.js предоставляет этот удобный метод. Единственное отличие этого метода от <a href=#httprequest><code>http.request()</code></a> в том, что он устанавливает метод на GET и автоматически вызывает <code>req.end()</code>. Обратный вызов должен позаботиться о потреблении данных ответа по причинам, указанным в разделе <a href=#httpclientrequest><code>http.ClientRequest</code></a>.</p> <p>Обратный вызов вызывается с единственным аргументом, который является экземпляром <a href=#httpincomingmessage><code>http.IncomingMessage</code></a>.</p> <p>Пример получения JSON:</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;http://localhost:8000/&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>statusCode</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>res</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>contentType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>res</span><span class=p>.</span><span class=nx>headers</span><span class=p>[</span><span class=s1>&#39;content-type&#39;</span><span class=p>];</span>

<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>error</span><span class=p>;</span>
<span class=w>    </span><span class=c1>// Any 2xx status code signals a successful response but</span>
<span class=w>    </span><span class=c1>// here we&#39;re only checking for 200.</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>statusCode</span><span class=w> </span><span class=o>!==</span><span class=w> </span><span class=mf>200</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>error</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=ne>Error</span><span class=p>(</span>
<span class=w>            </span><span class=s1>&#39;Request Failed.\n&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>                </span><span class=sb>`Status Code: </span><span class=si>${</span><span class=nx>statusCode</span><span class=si>}</span><span class=sb>`</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=sr>/^application\/json/</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>contentType</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>error</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=ne>Error</span><span class=p>(</span>
<span class=w>            </span><span class=s1>&#39;Invalid content-type.\n&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>                </span><span class=sb>`Expected application/json but received </span><span class=si>${</span><span class=nx>contentType</span><span class=si>}</span><span class=sb>`</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span>
<span class=w>        </span><span class=c1>// Consume response data to free up memory</span>
<span class=w>        </span><span class=nx>res</span><span class=p>.</span><span class=nx>resume</span><span class=p>();</span>
<span class=w>        </span><span class=k>return</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>setEncoding</span><span class=p>(</span><span class=s1>&#39;utf8&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>rawData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=p>;</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;data&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>chunk</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>rawData</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=nx>chunk</span><span class=p>;</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;end&#39;</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=nx>parsedData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>rawData</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>parsedData</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>});</span>
<span class=p>}).</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;error&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`Got error: </span><span class=si>${</span><span class=nx>e</span><span class=p>.</span><span class=nx>message</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=p>});</span>

<span class=c1>// Create a local server to receive data from</span>
<span class=kd>const</span><span class=w> </span><span class=nx>server</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>createServer</span><span class=p>((</span><span class=nx>req</span><span class=p>,</span><span class=w> </span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>writeHead</span><span class=p>(</span><span class=mf>200</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;application/json&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>end</span><span class=p>(</span>
<span class=w>        </span><span class=nb>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>({</span>
<span class=w>            </span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;Hello World!&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>})</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>});</span>

<span class=nx>server</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mf>8000</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <h2 id=httpglobalagent>http.globalAgent<a class=headerlink href=#httpglobalagent title="Permanent link">&para;</a></h2> <ul> <li>{http.Agent}</li> </ul> <p>Глобальный экземпляр <code>Agent</code>, который используется по умолчанию для всех клиентских HTTP-запросов.</p> <h2 id=httpmaxheadersize>http.maxHeaderSize<a class=headerlink href=#httpmaxheadersize title="Permanent link">&para;</a></h2> <ul> <li><a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a></li> </ul> <p>Свойство только для чтения, определяющее максимально допустимый размер HTTP-заголовков в байтах. По умолчанию 16 килобайт. Настраивается с помощью опции CLI <a href=../cli/#--max-http-header-sizesize><code>--max-http-header-size</code></a>.</p> <p>Его можно переопределить для серверов и клиентских запросов, передав параметр <code>maxHeaderSize</code>.</p> <h2 id=httprequest>http.request<a class=headerlink href=#httprequest title="Permanent link">&para;</a></h2> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>http</span><span class=p>.</span><span class=nx>request</span><span class=p>(</span><span class=nx>options</span><span class=p>[,</span><span class=w> </span><span class=nx>callback</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <h2 id=httprequest_1>http.request<a class=headerlink href=#httprequest_1 title="Permanent link">&para;</a></h2> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>http</span><span class=p>.</span><span class=nx>request</span><span class=p>(</span><span class=nx>url</span><span class=p>[,</span><span class=w> </span><span class=nx>options</span><span class=p>][,</span><span class=w> </span><span class=nx>callback</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>url</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> | <a href=../url/#the-whatwg-url-api><code>&lt;URL&gt;</code></a></li> <li><code>options</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a><ul> <li><code>agent</code> {http.Agent} | <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a> Управляет поведением <a href=#httpagent><code>Agent</code></a>. Возможные значения:<ul> <li><code>undefined</code> (по умолчанию): использовать <a href=#httpglobalagent><code>http.globalAgent</code></a> для данного хоста и порта.</li> <li><code>Agent</code> объект: явно использовать переданный <code>Agent</code>.</li> <li><code>false</code>: заставляет использовать новый <code>Agent</code> со значениями по умолчанию.</li> </ul> </li> <li><code>auth</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> Базовая аутентификация (<code>'user:password'</code>) для вычисления заголовка Authorization.</li> <li><code>createConnection</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function><code>&lt;Function&gt;</code></a> Функция, создающая сокет/поток для использования в запросе, когда опция <code>agent</code> не используется. Это можно использовать, чтобы не создавать собственный класс <code>Agent</code> только для переопределения функции по умолчанию <code>createConnection</code>. Подробнее см. в <a href=#agentcreateconnection><code>agent.createConnection()</code></a>. Любой поток <a href=../stream/#class-streamduplex><code>Duplex</code></a> является допустимым возвращаемым значением.</li> <li><code>defaultPort</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> Порт по умолчанию для протокола. <strong>По умолчанию:</strong> <code>agent.defaultPort</code>, если используется <code>Agent</code>, иначе <code>undefined</code>.</li> <li><code>family</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> Семейство IP-адресов для использования при разрешении <code>host</code> или <code>hostname</code>. Допустимыми значениями являются <code>4</code> или <code>6</code>. Если значение не указано, будут использоваться IP v4 и v6.</li> <li><code>headers</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object><code>&lt;Object&gt;</code></a> Объект, содержащий заголовки запроса.</li> <li><code>hints</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> Необязательные <a href=../dns/#supported-getaddrinfo-flags><code>dns.lookup()</code> hints</a>.</li> <li><code>host</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> Доменное имя или IP-адрес сервера, на который будет отправлен запрос. <strong>По умолчанию:</strong> <code>'localhost'</code>.</li> <li><code>hostname</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> Псевдоним для <code>host</code>. Для поддержки <a href=../url/#urlparseurlstring-parsequerystring-slashesdenotehost><code>url.parse()</code></a>, <code>hostname</code> будет использоваться, если указаны и <code>host</code> и <code>hostname</code>.</li> <li><code>insecureHTTPParser</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a> Использовать небезопасный парсер HTTP, который принимает недействительные заголовки HTTP, если <code>true</code>. Следует избегать использования небезопасного парсера. Дополнительную информацию смотрите в <a href=../cli/#--insecure-http-parser><code>--insecure-http-parser</code></a>. <strong>По умолчанию:</strong> <code>false</code>.</li> <li><code>localAddress</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> Локальный интерфейс для привязки сетевых соединений.</li> <li><code>localPort</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> Локальный порт для подключения.</li> <li><code>lookup</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function><code>&lt;Function&gt;</code></a> Пользовательская функция поиска. <strong>По умолчанию:</strong> <a href=../dns/#dnslookuphostname-options-callback><code>dns.lookup()</code></a>.</li> <li><code>maxHeaderSize</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> Опционально переопределяет значение параметра <a href=../cli/#--max-http-header-sizesize><code>--max-http-header-size</code></a> (максимальная длина заголовков ответа в байтах) для ответов, полученных от сервера. <strong>По умолчанию:</strong> 16384 (16 KiB).</li> <li><code>method</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> Строка, определяющая метод запроса HTTP. <strong>По умолчанию:</strong> <code>GET</code>.</li> <li><code>path</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> Путь запроса. Должен включать строку запроса, если таковая имеется. Например, <code>'/index.html?page=12'</code>. Исключение возникает, если путь запроса содержит недопустимые символы. В настоящее время отклоняются только пробелы, но в будущем это может измениться. <strong>По умолчанию:</strong> <code>'/'</code>.</li> <li><code>port</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> Порт удаленного сервера. <strong>По умолчанию:</strong> <code>defaultPort</code>, если установлен, иначе <code>80</code>.</li> <li><code>protocol</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> Используемый протокол. <strong>По умолчанию:</strong> <code>'http:'</code>.</li> <li><code>setHost</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a>: Определяет, следует ли автоматически добавлять заголовок <code>Host</code>. По умолчанию <code>true</code>.</li> <li><code>signal</code> <a href=../globals/#abortsignal><code>&lt;AbortSignal&gt;</code></a>: Сигнал прерывания, который может быть использован для прерывания текущего запроса.</li> <li><code>socketPath</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a>. Сокет домена Unix. Не может быть использован, если указано одно из <code>host</code> или <code>port</code>, так как они определяют TCP-сокет.</li> <li><code>timeout</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a>: Число, определяющее таймаут сокета в миллисекундах. Это задает таймаут до подключения сокета.</li> <li><code>uniqueHeaders</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array><code>&lt;Array&gt;</code></a>. Список заголовков запроса, которые должны быть отправлены только один раз. Если значение заголовка представляет собой массив, элементы будут объединены с помощью <code>;</code>.</li> <li><code>joinDuplicateHeaders</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Boolean_type><code>&lt;boolean&gt;</code></a> Объединяет значения строк полей нескольких заголовков в запросе с помощью <code>,</code> вместо того, чтобы отбрасывать дубликаты. Более подробную информацию смотрите в <a href=#messageheaders><code>message.headers</code></a>. <strong>По умолчанию:</strong> <code>false</code>.</li> </ul> </li> <li><code>callback</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function><code>&lt;Function&gt;</code></a></li> <li>Возвращает: {http.ClientRequest}</li> </ul> <p>Также поддерживаются <code>опции</code> в <a href=../net/#socketconnectoptions-connectlistener><code>socket.connect()</code></a>.</p> <p>Node.js поддерживает несколько соединений для каждого сервера для выполнения HTTP-запросов. Эта функция позволяет прозрачно отправлять запросы.</p> <p><code>url</code> может быть строкой или объектом <a href=../url/#the-whatwg-url-api><code>URL</code></a>. Если <code>url</code> - строка, она автоматически разбирается с помощью <a href=../url/#new-urlinput-base><code>new URL()</code></a>. Если это объект <a href=../url/#the-whatwg-url-api><code>URL</code></a>, то он будет автоматически преобразован в обычный объект <code>options</code>.</p> <p>Если указаны и <code>url</code>, и <code>options</code>, объекты будут объединены, причем свойства <code>options</code> будут иметь приоритет.</p> <p>Необязательный параметр <code>callback</code> будет добавлен как одноразовый слушатель для события <a href=#event-response><code>'response'</code></a>.</p> <p><code>http.request()</code> возвращает экземпляр класса <a href=#httpclientrequest><code>http.ClientRequest</code></a>. Экземпляр <code>ClientRequest</code> представляет собой поток, доступный для записи. Если нужно загрузить файл с помощью POST-запроса, то пишите в объект <code>ClientRequest</code>.</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>http</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;node:http&#39;</span><span class=p>);</span>

<span class=kd>const</span><span class=w> </span><span class=nx>postData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>({</span>
<span class=w>    </span><span class=nx>msg</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;Hello World!&#39;</span><span class=p>,</span>
<span class=p>});</span>

<span class=kd>const</span><span class=w> </span><span class=nx>options</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>hostname</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;www.google.com&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=nx>port</span><span class=o>:</span><span class=w> </span><span class=mf>80</span><span class=p>,</span>
<span class=w>    </span><span class=nx>path</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;/upload&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=nx>method</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;POST&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=nx>headers</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;application/json&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=s1>&#39;Content-Length&#39;</span><span class=o>:</span><span class=w> </span><span class=nx>Buffer</span><span class=p>.</span><span class=nx>byteLength</span><span class=p>(</span><span class=nx>postData</span><span class=p>),</span>
<span class=w>    </span><span class=p>},</span>
<span class=p>};</span>

<span class=kd>const</span><span class=w> </span><span class=nx>req</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>request</span><span class=p>(</span><span class=nx>options</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`STATUS: </span><span class=si>${</span><span class=nx>res</span><span class=p>.</span><span class=nx>statusCode</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`HEADERS: </span><span class=si>${</span><span class=nb>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>res</span><span class=p>.</span><span class=nx>headers</span><span class=p>)</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>setEncoding</span><span class=p>(</span><span class=s1>&#39;utf8&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;data&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>chunk</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`BODY: </span><span class=si>${</span><span class=nx>chunk</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;end&#39;</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;No more data in response.&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=p>});</span>
<span class=p>});</span>

<span class=nx>req</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;error&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`problem with request: </span><span class=si>${</span><span class=nx>e</span><span class=p>.</span><span class=nx>message</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=p>});</span>

<span class=c1>// Write data to request body</span>
<span class=nx>req</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=nx>postData</span><span class=p>);</span>
<span class=nx>req</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span>
</code></pre></div></td></tr></table></div> <p>В примере был вызван <code>req.end()</code>. При использовании <code>http.request()</code> необходимо всегда вызывать <code>req.end()</code> для обозначения окончания запроса - даже если в тело запроса не записываются данные.</p> <p>Если во время запроса встречается какая-либо ошибка (будь то разрешение DNS, ошибки на уровне TCP или фактические ошибки разбора HTTP), на возвращаемом объекте запроса выдается событие <code>'error'</code>. Как и в случае со всеми событиями <code>'error'</code>, если не зарегистрированы слушатели, ошибка будет сброшена.</p> <p>Есть несколько специальных заголовков, на которые следует обратить внимание.</p> <ul> <li> <p>Отправка 'Connection: keep-alive' уведомляет Node.js о том, что соединение с сервером должно сохраняться до следующего запроса.</p> </li> <li> <p>Отправка заголовка 'Content-Length' отключит кодировку по умолчанию.</p> </li> <li> <p>Отправка заголовка 'Expect' немедленно отправит заголовки запроса. Обычно при отправке 'Expect: 100-continue' следует установить таймаут и слушателя для события <code>'continue'</code>. См. RFC 2616 Раздел 8.2.3 для получения дополнительной информации.</p> </li> <li> <p>Отправка заголовка <code>Authorization</code> отменяет использование опции <code>auth</code> для вычисления базовой аутентификации.</p> </li> </ul> <p>Пример с использованием <a href=../url/#the-whatwg-url-api><code>URL</code></a> в качестве <code>options</code>:</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>options</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>URL</span><span class=p>(</span><span class=s1>&#39;http://abc:<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="7c0405063c19041d110c1019521f1311">[email&#160;protected]</a>&#39;</span><span class=p>);</span>

<span class=kd>const</span><span class=w> </span><span class=nx>req</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>request</span><span class=p>(</span><span class=nx>options</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// ...</span>
<span class=p>});</span>
</code></pre></div></td></tr></table></div> <p>При успешном запросе будут выданы следующие события в следующем порядке:</p> <ul> <li><code>socket</code></li> <li><code>response</code><ul> <li><code>'data'</code> любое количество раз, на объекте <code>res</code> (<code>'data'</code> не будет выдаваться вообще, если тело ответа пустое, например, при большинстве перенаправлений)</li> <li><code>'end'</code> на объекте <code>res</code>.</li> </ul> </li> <li><code>close</code>.</li> </ul> <p>В случае ошибки соединения будут выданы следующие события:</p> <ul> <li><code>socket</code></li> <li><code>error</code></li> <li><code>close</code></li> </ul> <p>В случае преждевременного закрытия соединения до получения ответа, будут выданы следующие события в следующем порядке:</p> <ul> <li><code>socket</code></li> <li><code>error</code> с ошибкой с сообщением <code>'Error: socket hang up'</code> и кодом <code>'ECONNRESET'</code></li> <li><code>close</code></li> </ul> <p>В случае преждевременного закрытия соединения после получения ответа, следующие события будут выдаваться в следующем порядке:</p> <ul> <li><code>socket</code></li> <li><code>response</code><ul> <li><code>data</code> любое количество раз, на объекте <code>res</code>.</li> </ul> </li> <li>(здесь соединение закрыто)</li> <li><code>aborted</code> на объекте <code>res</code></li> <li><code>error</code> на объекте <code>res</code> с ошибкой с сообщением <code>Ошибка: прервано</code> и кодом <code>ECONNRESET</code>.</li> <li><code>close</code></li> <li><code>close</code> объекта <code>res</code></li> </ul> <p>Если <code>req.destroy()</code> вызывается до назначения сокета, то следующие события будут выдаваться в следующем порядке:</p> <ul> <li>(<code>req.destroy()</code> вызывается здесь)</li> <li><code>'error'</code> с ошибкой с сообщением <code>'Error: socket hang up'</code> и кодом <code>'ECONNRESET'</code>.</li> <li><code>close</code>.</li> </ul> <p>Если <code>req.destroy()</code> вызывается до успешного соединения, то следующие события будут выдаваться в следующем порядке:</p> <ul> <li><code>'socket'</code></li> <li>(<code>req.destroy()</code> вызывается здесь)</li> <li><code>'error'</code> с ошибкой с сообщением <code>'Error: socket hang up'</code> и кодом <code>'ECONNRESET'</code></li> <li><code>close</code>.</li> </ul> <p>Если <code>req.destroy()</code> вызывается после получения ответа, то следующие события будут выдаваться в следующем порядке:</p> <ul> <li><code>'socket'</code></li> <li><code>response</code><ul> <li><code>data</code> любое количество раз, на объекте <code>res</code>.</li> </ul> </li> <li>(<code>req.destroy()</code> вызывается здесь)</li> <li><code>aborted</code> на объекте <code>res</code></li> <li><code>'error'</code> на объекте <code>res</code> с ошибкой с сообщением <code>'Error: aborted'</code> и кодом <code>'ECONNRESET'</code>.</li> <li><code>close</code></li> <li><code>close</code> объекта `res``</li> </ul> <p>Если <code>req.abort()</code> вызывается до назначения сокета, то следующие события будут выдаваться в следующем порядке:</p> <ul> <li>(<code>req.abort()</code> вызывается здесь)</li> <li><code>abort</code></li> <li><code>close</code>.</li> </ul> <p>Если <code>req.abort()</code> вызывается до успешного соединения, то следующие события будут выдаваться в следующем порядке:</p> <ul> <li><code>'socket'</code></li> <li>(<code>req.abort()</code> вызывается здесь)</li> <li><code>'abort'</code></li> <li><code>'error'</code> с ошибкой с сообщением <code>'Error: socket hang up'</code> и кодом <code>'ECONNRESET'</code></li> <li><code>close</code>.</li> </ul> <p>Если <code>req.abort()</code> вызывается после получения ответа, то следующие события будут выдаваться в следующем порядке:</p> <ul> <li><code>'socket'</code></li> <li><code>response</code><ul> <li><code>data</code> любое количество раз, на объекте <code>res</code>.</li> </ul> </li> <li>(<code>req.abort()</code> вызывается здесь)</li> <li><code>'abort'</code></li> <li><code>aborted</code> на объекте <code>res</code></li> <li><code>error</code> на объекте <code>res</code> с ошибкой с сообщением <code>'Error: aborted'</code> и кодом <code>'ECONNRESET'</code>.</li> <li><code>close</code></li> <li><code>close</code> на объекте <code>res</code></li> </ul> <p>Установка опции <code>timeout</code> или использование функции <code>setTimeout()</code> не прервет запрос и не сделает ничего, кроме добавления события <code>'timeout'</code>.</p> <p>Передача <code>AbortSignal</code> и последующий вызов <code>abort</code> на соответствующем <code>AbortController</code> будет вести себя так же, как вызов <code>.destroy()</code> на самом запросе.</p> <h2 id=httpvalidateheadername>http.validateHeaderName<a class=headerlink href=#httpvalidateheadername title="Permanent link">&para;</a></h2> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>http</span><span class=p>.</span><span class=nx>validateHeaderName</span><span class=p>(</span><span class=nx>name</span><span class=p>[,</span><span class=w> </span><span class=nx>label</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>name</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> <li><code>label</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a> Метка для сообщения об ошибке. <strong>По умолчанию:</strong> <code>Имя заголовка</code>.</li> </ul> <p>Выполняет низкоуровневые проверки предоставленного <code>name</code>, которые выполняются при вызове <code>res.setHeader(name, value)</code>.</p> <p>Передача недопустимого значения в качестве <code>name</code> приведет к возникновению <a href=../errors/#class-typeerror><code>TypeError</code></a>, идентифицируемой <code>code: 'ERR_INVALID_HTTP_TOKEN'</code>.</p> <p>Нет необходимости использовать этот метод перед передачей заголовков в HTTP-запрос или ответ. Модуль HTTP автоматически проверит такие заголовки. Примеры:</p> <p>Пример:</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>validateHeaderName</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;node:http&#39;</span><span class=p>);</span>

<span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>validateHeaderName</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>);</span>
<span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>err</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=w> </span><span class=ow>instanceof</span><span class=w> </span><span class=ne>TypeError</span><span class=p>);</span><span class=w> </span><span class=c1>// --&gt; true</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nx>code</span><span class=p>);</span><span class=w> </span><span class=c1>// --&gt; &#39;ERR_INVALID_HTTP_TOKEN&#39;</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span><span class=w> </span><span class=c1>// --&gt; &#39;Имя заголовка должно быть действительным HTTP-токеном [&quot;&quot;]&#39;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <h2 id=httpvalidateheadervalue>http.validateHeaderValue<a class=headerlink href=#httpvalidateheadervalue title="Permanent link">&para;</a></h2> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>http</span><span class=p>.</span><span class=nx>validateHeaderValue</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span><span class=w> </span><span class=nx>value</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>name</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#String_type><code>&lt;string&gt;</code></a></li> <li><code>value</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Data_types><code>&lt;any&gt;</code></a></li> </ul> <p>Выполняет низкоуровневые проверки предоставленного <code>значения</code>, которые выполняются при вызове <code>res.setHeader(name, value)</code>.</p> <p>Передача недопустимого значения в качестве <code>value</code> приведет к возникновению <a href=../errors/#class-typeerror><code>TypeError</code></a>.</p> <ul> <li>Ошибка неопределенного значения идентифицируется <code>code: 'ERR_HTTP_INVALID_HEADER_VALUE'</code>.</li> <li>Ошибка недопустимого символа значения идентифицируется <code>кодом: 'ERR_INVALID_CHAR'</code>.</li> </ul> <p>Нет необходимости использовать этот метод перед передачей заголовков в HTTP-запрос или ответ. Модуль HTTP автоматически проверит такие заголовки.</p> <p>Примеры:</p> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>validateHeaderValue</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;node:http&#39;</span><span class=p>);</span>

<span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>validateHeaderValue</span><span class=p>(</span><span class=s1>&#39;x-my-header&#39;</span><span class=p>,</span><span class=w> </span><span class=kc>undefined</span><span class=p>);</span>
<span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>err</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=w> </span><span class=ow>instanceof</span><span class=w> </span><span class=ne>TypeError</span><span class=p>);</span><span class=w> </span><span class=c1>// --&gt; true</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span>
<span class=w>        </span><span class=nx>err</span><span class=p>.</span><span class=nx>code</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ERR_HTTP_INVALID_HEADER_VALUE&#39;</span>
<span class=w>    </span><span class=p>);</span><span class=w> </span><span class=c1>// --&gt; true</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span><span class=w> </span><span class=c1>// --&gt; &#39;Недопустимое значение &quot;undefined&quot; для заголовка &quot;x-my-header&quot;&#39;</span>
<span class=p>}</span>

<span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>validateHeaderValue</span><span class=p>(</span><span class=s1>&#39;x-my-header&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;oʊmɪɡə&#39;</span><span class=p>);</span>
<span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>err</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=w> </span><span class=ow>instanceof</span><span class=w> </span><span class=ne>TypeError</span><span class=p>);</span><span class=w> </span><span class=c1>// --&gt; true</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nx>code</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ERR_INVALID_CHAR&#39;</span><span class=p>);</span><span class=w> </span><span class=c1>// --&gt; true</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span><span class=w> </span><span class=c1>// --&gt; &#39;Недопустимый символ в содержимом заголовка [&quot;x-my-header&quot;]&#39;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <h2 id=httpsetmaxidlehttpparsers>http.setMaxIdleHTTPParsers<a class=headerlink href=#httpsetmaxidlehttpparsers title="Permanent link">&para;</a></h2> <div class="language-js highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>http</span><span class=p>.</span><span class=nx>setMaxIdleHTTPParsers</span><span class=p>(</span><span class=nx>max</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <ul> <li><code>max</code> <a href=https://developer.mozilla.org/docs/Web/JavaScript/Data_structures#Number_type><code>&lt;number&gt;</code></a> <strong>По умолчанию:</strong> <code>1000</code>.</li> </ul> <p>Устанавливает максимальное количество неработающих парсеров HTTP.</p> <h2 id=__comments>Комментарии</h2> <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src=https://giscus.app/client.js data-repo=xsltdev/nodejsdev.ru data-repo-id="MDEwOlJlcG9zaXRvcnkzNDkxNzU3ODg=" data-category=Announcements data-category-id=DIC_kwDOFM__7M4CRQ9U data-mapping=title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=ru crossorigin=anonymous async></script> <script>
	var giscus = document.querySelector(
		'script[src*=giscus]'
	);

	/* Set palette on initial load */
	var palette = __md_get('__palette');
	if (palette && typeof palette.color === 'object') {
		var theme =
			palette.color.scheme === 'slate'
				? 'dark'
				: 'light';
		giscus.setAttribute('data-theme', theme);
	}

	/* Register event handlers after documented loaded */
	document.addEventListener(
		'DOMContentLoaded',
		function () {
			var ref = document.querySelector(
				'[data-md-component=palette]'
			);
			ref.addEventListener('change', function () {
				var palette = __md_get('__palette');
				if (
					palette &&
					typeof palette.color === 'object'
				) {
					var theme =
						palette.color.scheme === 'slate'
							? 'dark'
							: 'light';

					/* Instruct Giscus to change theme */
					var frame = document.querySelector(
						'.giscus-frame'
					);
					frame.contentWindow.postMessage(
						{
							giscus: {
								setConfig: { theme },
							},
						},
						'https://giscus.app'
					);
				}
			});
		}
	);
</script> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> К началу </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label="Нижний колонтитул"> <a href=../globals/ class="md-footer__link md-footer__link--prev" aria-label="Назад: Глобальные объекты"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Назад </span> <div class=md-ellipsis> Глобальные объекты </div> </div> </a> <a href=../http2/ class="md-footer__link md-footer__link--next" aria-label="Вперед: HTTP/2"> <div class=md-footer__title> <span class=md-footer__direction> Вперед </span> <div class=md-ellipsis> HTTP/2 </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> (☭) Народное достояние с 2021 года </div> </div> <div class=md-social> <a href=https://ruitunion.org/ target=_blank title="Профсоюз работников ИТ" class=md-social__link> <?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg width=256 height=256 viewbox="0 0 256 256" fill=none version=1.1 id=svg4 sodipodi:docname=logo.svg inkscape:export-filename=logo.jpg inkscape:export-xdpi=192 inkscape:export-ydpi=192 inkscape:version="1.2 (dc2aedaf03, 2022-05-15)" xmlns:inkscape=http://www.inkscape.org/namespaces/inkscape xmlns:sodipodi=http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd xmlns=http://www.w3.org/2000/svg xmlns:svg=http://www.w3.org/2000/svg> <defs id=defs8 /> <sodipodi:namedview id=namedview6 pagecolor=#ffffff bordercolor=#666666 borderopacity=1.0 inkscape:showpageshadow=2 inkscape:pageopacity=0.0 inkscape:pagecheckerboard=0 inkscape:deskcolor=#d1d1d1 showgrid=false inkscape:zoom=3.0546875 inkscape:cx=111.95908 inkscape:cy=128 inkscape:window-width=1920 inkscape:window-height=1011 inkscape:window-x=0 inkscape:window-y=0 inkscape:window-maximized=1 inkscape:current-layer=svg4 /> <path fill-rule=evenodd clip-rule=evenodd fill=#c830a1 id=path2 style=stroke-width:1.07697 d="M 224.16296,36.985938 C 214.56607,27.214897 142.06864,1.8749399 128.25218,1.8749399 c -13.82832,0 -86.325416,25.3399571 -95.898186,35.1109981 -6.008855,6.108367 -7.44252,11.336849 -7.547094,26.888966 l 0.0034,4.734044 c 0.02833,4.180803 0.113944,9.002836 0.213672,14.615797 l 0.001,0.05847 0.0089,0.51727 c 0.218733,12.59044 0.515438,29.665405 0.515438,53.142305 0,24.96313 8.191663,45.24142 19.890482,61.47461 L 59.730409,186.30578 C 50.314435,172.94704 43.841297,156.61046 43.841297,136.9428 c 0,-23.59106 -0.295413,-40.731613 -0.514038,-53.412411 l -0.01036,-0.594811 c -0.47559,-26.432546 -0.390186,-30.380723 1.829237,-32.652702 7.524047,-6.393981 72.764944,-29.784727 83.106024,-29.784727 10.34108,0 75.59478,23.390746 82.97204,29.660551 0.72696,0.736434 1.23744,1.622028 1.58316,3.272918 h 18.46467 c -0.76357,-7.954944 -2.70643,-11.963432 -7.10909,-16.44568 z m 7.42249,40.171256 h -18.28806 c -0.0291,1.785512 -0.0613,3.695951 -0.098,5.741121 -0.23155,12.738315 -0.53633,30.058175 -0.53633,54.044485 0,64.38675 -69.8136,93.21512 -84.42272,98.51705 -7.97391,-2.87767 -32.354172,-12.71257 -52.873177,-31.53588 L 60.98592,216.11206 c 27.802023,26.40735 62.20986,37.35476 64.62013,38.09464 0.86588,0.27355 1.75654,0.3974 2.64612,0.3974 0.89065,0 1.78024,-0.12385 2.64612,-0.3974 4.08495,-1.2536 100.05712,-31.82021 100.05712,-117.2639 0,-23.5146 0.29617,-40.589665 0.51479,-53.180215 v -6.47e-4 -5.39e-4 l 0.009,-0.515438 0.001,-0.05675 c 0.0377,-2.120988 0.0733,-4.128894 0.10447,-6.032011 z m -65.21063,8.19834 c -2.03548,0 -3.68432,1.679645 -3.68432,3.751522 v 13.635434 c 0,2.07101 1.64884,3.75108 3.68432,3.75108 h 13.39321 c 2.0344,0 3.68433,-1.68007 3.68433,-3.75108 V 89.107056 c 0,-2.071877 -1.64993,-3.751522 -3.68433,-3.751522 z m -20.76186,21.140196 c -2.0344,0 -3.68432,1.68007 -3.68432,3.7511 v 13.63553 c 0,2.07209 1.64992,3.7511 3.68432,3.7511 h 13.39322 c 2.0344,0 3.68432,-1.67901 3.68432,-3.7511 v -13.63553 c 0,-2.07103 -1.64992,-3.7511 -3.68432,-3.7511 z m -24.44618,24.59803 c 0,-2.07101 1.64993,-3.75109 3.68432,-3.75109 h 13.39214 c 2.03548,0 3.6854,1.68008 3.6854,3.75109 v 13.63554 c 0,2.07101 -1.64992,3.75109 -3.6854,3.75109 H 124.8511 c -2.03439,0 -3.68432,-1.68008 -3.68432,-3.75109 z m -17.07754,17.38878 c -2.03439,0 -3.68432,1.68009 -3.68432,3.75218 v 13.63445 c 0,2.0721 1.64993,3.7511 3.68432,3.7511 h 13.39322 c 2.0344,0 3.68432,-1.679 3.68432,-3.7511 v -13.63445 c 0,-2.07209 -1.64992,-3.75218 -3.68432,-3.75218 z M 79.643387,131.09376 c 0,-2.07101 1.649706,-3.75109 3.684751,-3.75109 h 13.392468 c 2.035477,0 3.684314,1.68008 3.684314,3.75109 v 13.63554 c 0,2.07101 -1.648837,3.75109 -3.684314,3.75109 H 83.328138 c -2.035045,0 -3.684751,-1.68008 -3.684751,-3.75109 z"/> </svg> </a> <a href=https://github.com/xsltdev target=_blank rel=noopener title=GitHub class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://boosty.to/bndby target=_blank rel=noopener title=Boosty class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M378.9 80c-27.3 0-53 13.1-69 35.2l-34.4 47.6c-4.5 6.2-11.7 9.9-19.4 9.9s-14.9-3.7-19.4-9.9l-34.4-47.6c-16-22.1-41.7-35.2-69-35.2-47 0-85.1 38.1-85.1 85.1 0 49.9 32 98.4 68.1 142.3 41.1 50 91.4 94 125.9 120.3 3.2 2.4 7.9 4.2 14 4.2s10.8-1.8 14-4.2c34.5-26.3 84.8-70.4 125.9-120.3 36.2-43.9 68.1-92.4 68.1-142.3 0-47-38.1-85.1-85.1-85.1zM271 87.1C296 52.5 336.2 32 378.9 32 452.4 32 512 91.6 512 165.1c0 68.6-42.9 128.9-79.1 172.8-44.1 53.6-97.3 100.1-133.8 127.9-12.3 9.4-27.5 14.1-43.1 14.1s-30.8-4.7-43.1-14.1C176.4 438 123.2 391.5 79.1 338 42.9 294.1 0 233.7 0 165.1 0 91.6 59.6 32 133.1 32 175.8 32 216 52.5 241 87.1l15 20.7z"/></svg> </a> <a href=https://www.linkedin.com/in/bndby/ target=_blank rel=noopener title=LinkedIn class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.prune", "navigation.tabs", "navigation.tracking", "navigation.top", "navigation.footer", "navigation.indexes", "content.action.edit", "content.tabs.link", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440", "clipboard.copy": "\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440", "search.result.more.one": "\u0415\u0449\u0451 1 \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.more.other": "\u0415\u0449\u0451 # \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.none": "\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e", "search.result.one": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e 1 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435", "search.result.other": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439: #", "search.result.placeholder": "\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430", "search.result.term.missing": "\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442", "select.version": "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0440\u0441\u0438\u044e"}, "version": null}</script> <script src=../../assets/javascripts/bundle.92b07e13.min.js></script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script><script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"71189fa4d109451498adfc3fdd52ffcf","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
</body> </html>